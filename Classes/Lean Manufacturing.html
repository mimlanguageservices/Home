<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <title>Lean Manufacturing - MIM Language Services</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }

        /* ========== LOADING SCREEN STYLES ========== */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.85) 0%, rgba(22, 33, 62, 0.85) 50%, rgba(15, 52, 96, 0.85) 100%),
                        url('https://static.wixstatic.com/media/593d03_e09c0e9f9c374910a0e642b0489908e4~mv2.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            transform: scale(1.1);
            pointer-events: none;
        }

        .game-title {
            font-size: 4rem;
            font-weight: 700;
            color: #fff;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(102, 126, 234, 0.8), 0 0 60px rgba(118, 75, 162, 0.5);
            animation: titlePulse 3s ease-in-out infinite;
        }

        .game-subtitle {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 60px;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        @keyframes titlePulse {
            0%, 100% { text-shadow: 0 0 30px rgba(102, 126, 234, 0.8), 0 0 60px rgba(118, 75, 162, 0.5); }
            50% { text-shadow: 0 0 50px rgba(102, 126, 234, 1), 0 0 100px rgba(118, 75, 162, 0.8); }
        }

        .level-select-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .select-prompt {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 30px;
            animation: fadeInUp 1s ease 0.5s both;
        }

        .level-cards {
            display: flex;
            gap: 30px;
            perspective: 1000px;
        }

        .level-card {
            width: 200px;
            height: 280px;
            background: linear-gradient(145deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0.05) 100%);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            animation: cardFloat 3s ease-in-out infinite;
            backdrop-filter: blur(10px);
        }

        .level-card:nth-child(1) { animation-delay: 0s; }
        .level-card:nth-child(2) { animation-delay: 0.5s; }
        .level-card:nth-child(3) { animation-delay: 1s; }

        @keyframes cardFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .level-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s;
            opacity: 0;
        }

        .level-card:hover::before {
            animation: shine 0.8s ease;
        }

        @keyframes shine {
            0% { left: -50%; opacity: 1; }
            100% { left: 150%; opacity: 0; }
        }

        .level-card:hover {
            transform: translateY(-15px) scale(1.05);
            border-color: rgba(102, 126, 234, 0.8);
            box-shadow: 0 20px 60px rgba(102, 126, 234, 0.4), 0 0 40px rgba(102, 126, 234, 0.2);
        }

        .level-card.b1-card:hover { border-color: #4ade80; box-shadow: 0 20px 60px rgba(74, 222, 128, 0.4); }
        .level-card.b2-card:hover { border-color: #60a5fa; box-shadow: 0 20px 60px rgba(96, 165, 250, 0.4); }
        .level-card.c1-card:hover { border-color: #f472b6; box-shadow: 0 20px 60px rgba(244, 114, 182, 0.4); }

        /* Image Card Hover Effects */
        .image-card:hover {
            transform: translateY(-10px) scale(1.05);
            border-color: #f472b6;
            box-shadow: 0 20px 60px rgba(244, 114, 182, 0.4);
        }
        .image-card:hover .image-card-bg {
            filter: grayscale(0%) !important;
        }
        .image-card:hover .image-card-overlay {
            background: rgba(0,0,0,0.1) !important;
        }
        .vocab-card:hover { border-color: #4ade80; box-shadow: 0 20px 60px rgba(74, 222, 128, 0.4); }
        .quiz-card:hover { border-color: #60a5fa; box-shadow: 0 20px 60px rgba(96, 165, 250, 0.4); }
        .writing-card:hover { border-color: #f472b6; box-shadow: 0 20px 60px rgba(244, 114, 182, 0.4); }

        .level-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .b1-card .level-icon { color: #4ade80; }
        .b2-card .level-icon { color: #60a5fa; }
        .c1-card .level-icon { color: #f472b6; }

        .level-name {
            font-size: 2.5rem;
            font-weight: 700;
            color: #fff;
            margin-bottom: 10px;
        }

        .level-desc {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.7);
            text-align: center;
            padding: 0 15px;
        }

        .level-difficulty {
            margin-top: 15px;
            display: flex;
            gap: 5px;
        }

        .difficulty-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
        }

        .b1-card .difficulty-dot:nth-child(-n+1) { background: #4ade80; }
        .b2-card .difficulty-dot:nth-child(-n+2) { background: #60a5fa; }
        .c1-card .difficulty-dot:nth-child(-n+3) { background: #f472b6; }

        .powered-by {
            position: absolute;
            bottom: 30px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
        }

        .powered-by a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s;
        }

        .powered-by a:hover {
            color: #fff;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ========== MAIN APP STYLES ========== */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            opacity: 0;
            transition: opacity 0.5s ease 0.3s;
        }

        .app-container.visible {
            opacity: 1;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            position: relative;
            z-index: 100;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .menu-toggle {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .menu-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .menu-toggle span {
            width: 22px;
            height: 3px;
            background: white;
            border-radius: 2px;
            transition: all 0.3s ease;
        }

        .menu-toggle.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .menu-toggle.active span:nth-child(2) {
            opacity: 0;
        }

        .menu-toggle.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        .header-title {
            display: flex;
            flex-direction: column;
        }

        .header h1 {
            color: #2d3748;
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .current-level-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .current-level-badge.b1 { background: rgba(74, 222, 128, 0.2); color: #166534; }
        .current-level-badge.b2 { background: rgba(96, 165, 250, 0.2); color: #1e40af; }
        .current-level-badge.c1 { background: rgba(244, 114, 182, 0.2); color: #9d174d; }

        .current-level-badge:hover {
            transform: scale(1.05);
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .header .website a {
            color: #4c51bf;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .header .website a:hover {
            color: #553c9a;
        }

        .header-image {
            width: 100px;
            height: 65px;
            border-radius: 10px;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .main-container {
            display: flex;
            flex: 1;
            height: calc(100vh - 95px);
            position: relative;
            overflow: hidden;
        }

        /* Collapsible Navigation */
        .navigation {
            width: 280px;
            background: rgba(45, 55, 72, 0.98);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            position: absolute;
            left: -280px;
            top: 0;
            height: 100%;
            z-index: 50;
            transition: left 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 5px 0 30px rgba(0, 0, 0, 0.3);
        }

        .navigation.open {
            left: 0;
        }

        .nav-item {
            padding: 16px 24px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 500;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 40;
        }

        .nav-overlay.visible {
            opacity: 1;
            visibility: visible;
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .section {
            display: none;
            flex: 1;
            padding: 40px;
            overflow: hidden;
            height: 100%;
        }

        .section.active {
            display: flex;
            flex-direction: column;
        }

        .section h2 {
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 2.2rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: -0.5px;
        }

        /* Discussion Slideshow Styles */
        #discussion {
            padding: 0;
            background: white;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 40px 100px;
        }

        .slide-content-wrapper {
            position: relative;
            width: 100%;
            max-width: 1800px;
            height: 95%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .discussion-slide {
            display: none;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 20px;
            padding: 60px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .discussion-slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(30px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* Difficulty content - hide by default */
        .difficulty-content {
            display: none;
        }

        /* Horizontal layout slides */
        .slide-horizontal {
            flex-direction: row !important;
            gap: 30px;
        }

        .slide-text-section-left {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding-right: 20px;
            max-width: 50%;
            max-height: 100%;
            overflow-y: auto;
            padding-top: 10px;
            padding-bottom: 10px;
        }

        .slide-text-section-left::-webkit-scrollbar {
            width: 8px;
        }
        .slide-text-section-left::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        .slide-text-section-left::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 4px;
        }

        .slide-text-section-left h3 {
            font-size: 1.8rem;
            color: #2d3748;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .slide-text-section-left p {
            font-size: 1.15rem;
            line-height: 1.8;
            color: #4a5568;
            margin-bottom: 20px;
        }

        .slide-text-section-left ul {
            margin-top: 15px;
            padding-left: 25px;
        }

        .slide-text-section-left li {
            font-size: 1.1rem;
            line-height: 1.7;
            color: #4a5568;
            margin-bottom: 12px;
        }

        .slide-image-section-right {
            flex: 1;
            max-width: 45%;
            height: 100%;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
        }

        .slide-image-section-right img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Navigation Arrows */
        .slide-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(45, 55, 72, 0.9);
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .slide-arrow:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: translateY(-50%) scale(1.1);
        }

        .slide-arrow.prev { left: -70px; }
        .slide-arrow.next { right: -70px; }

        /* Slide Indicators */
        .slide-indicators {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(45, 55, 72, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transform: scale(1.2);
        }

        .indicator-dot:hover {
            background: rgba(102, 126, 234, 0.6);
        }

        /* Vocabulary Highlight Links */
        .vocab-link {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            padding: 3px 8px;
            border-radius: 6px;
            font-weight: 500;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .vocab-link:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        /* Slide Choice Links */
        .slide-choice-link {
            color: #4c51bf;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .slide-choice-link:hover {
            color: #667eea;
            text-decoration: underline;
        }

        /* Vocabulary Section */
        .reading-container {
            display: flex;
            flex-direction: column;
            flex: 1;
            overflow: hidden;
        }

        .reading-nav {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .page-btn {
            padding: 12px 28px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 25px;
            color: #2d3748;
            cursor: pointer;
            font-weight: 500;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .page-btn:hover {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .page-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
        }

        .vocab-page {
            display: none;
            flex: 1;
            overflow-y: auto;
        }

        .vocab-page.active {
            display: block;
        }

        .vocab-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
            padding: 20px 0;
        }

        .flashcard {
            background: transparent;
            width: 100%;
            height: 220px;
            perspective: 1000px;
            cursor: pointer;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            padding: 25px;
            backdrop-filter: blur(10px);
        }

        .flashcard-front {
            background: rgba(255, 255, 255, 0.9);
            color: #2d3748;
        }

        .flashcard-back {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            transform: rotateY(180deg);
        }

        .flashcard-term {
            font-weight: 700;
            font-size: 2rem;
            text-align: center;
        }

        .flashcard-definition {
            font-weight: 500;
            line-height: 1.5;
            text-align: center;
            font-size: 1.5rem;
        }

        .flashcard-hint {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.1rem;
            color: #a0aec0;
            opacity: 0.8;
        }

        /* Quiz Section */
        .quiz-container {
            display: flex;
            flex-direction: column;
            height: calc(100% - 120px);
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .quiz-nav {
            display: flex;
            gap: 12px;
        }

        .progress-container {
            flex: 1;
            margin: 0 30px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: width 0.3s ease;
            width: 0%;
            border-radius: 20px;
        }

        .quiz-page {
            display: none;
            flex: 1;
        }

        .quiz-page.active {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .quiz-question {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 50px;
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .quiz-question h3 {
            color: #2d3748;
            margin-bottom: 35px;
            font-size: 2rem;
            font-weight: 600;
        }

        .quiz-input {
            width: 100%;
            max-width: 450px;
            padding: 18px 25px;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 25px;
            font-size: 1.6rem;
            text-align: center;
            margin: 25px auto;
            display: block;
            font-weight: 500;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        .quiz-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .quiz-input.correct {
            border-color: #48bb78;
            background: rgba(72, 187, 120, 0.1);
        }

        .quiz-input.incorrect {
            border-color: #f56565;
            background: rgba(245, 101, 101, 0.1);
        }

        #quiz-counter {
            text-align: center;
            margin-bottom: 10px;
            font-weight: 500;
            color: #4a5568;
        }

        .multiple-choice {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 35px auto;
            max-width: 700px;
        }

        .choice {
            padding: 25px;
            background: rgba(255, 255, 255, 0.8);
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #2d3748;
            font-size: 1.25rem;
        }

        .choice:hover {
            background: rgba(102, 126, 234, 0.1);
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .choice.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
        }

        .choice.correct {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: #ffffff;
        }

        .choice.incorrect {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
            color: #ffffff;
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border: none;
            padding: 18px 35px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.5rem;
            font-weight: 600;
            margin: 25px auto;
            display: block;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .nav-btn {
            padding: 12px 25px;
            background: rgba(45, 55, 72, 0.9);
            color: #ffffff;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            background: rgba(102, 126, 234, 0.9);
            transform: translateY(-2px);
        }

        .nav-btn:disabled {
            background: rgba(160, 174, 192, 0.5);
            cursor: not-allowed;
        }

        .feedback {
            padding: 20px;
            border-radius: 12px;
            margin: 25px 0;
            font-weight: 500;
            text-align: center;
        }

        .feedback.correct {
            background: rgba(72, 187, 120, 0.1);
            color: #2f855a;
            border: 1px solid rgba(72, 187, 120, 0.3);
        }

        .feedback.incorrect {
            background: rgba(245, 101, 101, 0.1);
            color: #c53030;
            border: 1px solid rgba(245, 101, 101, 0.3);
        }

        .results-summary {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 50px;
            text-align: center;
            max-width: 700px;
            margin: 0 auto;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .results-summary h3 {
            color: #2d3748;
            font-size: 2.2rem;
            margin-bottom: 25px;
        }

        .score {
            font-size: 4rem;
            font-weight: 700;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 25px 0;
        }

        /* Writing Section */
        .writing-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 100px);
            padding: 10px;
            overflow: hidden;
            justify-content: center;
            align-items: center;
        }

        .writing-content {
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 30px;
            max-width: 95%;
            width: 95%;
            margin: 0 auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            max-height: calc(100vh - 140px);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .writing-objective {
            color: #4a5568;
            text-align: center;
            margin-bottom: 25px;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .writing-question {
            color: #2d3748;
            font-size: 1.8rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 30px;
        }

        .writing-form .form-group {
            margin-bottom: 20px;
        }

        .writing-form .form-group label {
            display: block;
            color: #2d3748;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .writing-form .form-group input,
        .writing-form .form-group textarea {
            width: 100%;
            padding: 12px 20px;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 12px;
            font-size: 1.1rem;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }

        .writing-form .form-group input:focus,
        .writing-form .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 15px rgba(102, 126, 234, 0.2);
        }

        .writing-form .form-group textarea {
            min-height: 150px;
            resize: vertical;
        }

        /* Popup Overlay */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .popup-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            text-align: center;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .popup-word {
            font-size: 2.5rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .popup-definition {
            font-size: 1.3rem;
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 30px;
        }

        .popup-close {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .popup-close:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        /* Vocab Popup */
        #vocabPopup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 10000;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            /* Hide scrollbar but keep functionality */
            body {
                overflow-y: auto;
                overflow-x: hidden;
                touch-action: pan-y;
                -ms-overflow-style: none;
                scrollbar-width: none;
            }

            body::-webkit-scrollbar {
                display: none;
            }

            /* Fixed header */
            .header {
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                z-index: 1000;
            }

            .app-container {
                padding-top: 60px;
            }

            .loading-screen {
                padding: 20px;
            }

            .game-title {
                font-size: 2rem;
                padding: 0 10px;
            }

            .game-subtitle {
                display: none;
            }

            .level-cards {
                flex-direction: column;
                gap: 15px;
            }

            .level-card {
                width: 220px;
                height: 150px;
            }

            .level-icon {
                font-size: 2rem;
                margin-bottom: 8px;
            }

            .level-name {
                font-size: 1.8rem;
            }

            .level-desc {
                font-size: 0.85rem;
            }

            .select-prompt {
                font-size: 1.1rem;
                margin-bottom: 20px;
            }

            .header {
                padding: 10px 15px;
            }

            .header h1 {
                font-size: 1.1rem;
            }

            .header-image {
                width: 60px;
                height: 40px;
            }

            .header .website {
                display: none;
            }

            .powered-by {
                display: none;
            }

            .menu-toggle {
                width: 40px;
                height: 40px;
            }

            .current-level-badge {
                font-size: 0.75rem;
                padding: 3px 8px;
            }

            .current-level-badge span[style*="click to change"],
            .current-level-badge span:last-child {
                display: none;
            }

            .navigation {
                width: 100%;
                left: -100%;
            }

            .main-container {
                height: auto;
                min-height: calc(100vh - 70px);
                overflow-y: auto;
                -ms-overflow-style: none;
                scrollbar-width: none;
            }

            .main-container::-webkit-scrollbar {
                display: none;
            }

            .section {
                padding: 15px;
                overflow-y: auto;
                -ms-overflow-style: none;
                scrollbar-width: none;
            }

            .section::-webkit-scrollbar {
                display: none;
            }

            .section h2 {
                font-size: 1.5rem;
                margin-bottom: 15px;
            }

            /* Slideshow mobile */
            .slideshow-container {
                padding: 10px 8px;
                touch-action: pan-y pinch-zoom;
                height: calc(100vh - 130px);
                overflow: hidden;
            }

            .slide-content-wrapper {
                height: 100%;
                overflow: hidden;
            }

            .discussion-slide {
                padding: 15px 12px;
                border-radius: 12px;
                overflow: hidden;
                height: auto;
                max-height: none;
            }

            .slide-horizontal {
                flex-direction: column !important;
                gap: 10px;
            }

            .slide-text-section-left {
                max-width: 100%;
                padding-right: 0;
                max-height: none;
                overflow-y: visible;
            }

            .slide-text-section-left h3 {
                font-size: 1.1rem;
                margin-bottom: 8px;
            }

            .slide-text-section-left p {
                font-size: 0.85rem;
                line-height: 1.5;
                margin-bottom: 8px;
            }

            .slide-text-section-left li {
                font-size: 0.8rem;
                margin-bottom: 6px;
            }

            .slide-image-section-right {
                max-width: 100%;
                height: 120px;
                flex-shrink: 0;
            }

            /* Video iframe responsive */
            .slide-image-section-right iframe {
                height: 120px !important;
            }

            /* Full-screen image/video slides on mobile */
            .slide-image-only {
                height: calc(100vh - 180px) !important;
                padding: 10px !important;
            }

            .slide-image-only > div {
                height: 100% !important;
                min-height: 200px;
            }

            .slide-image-only iframe {
                position: absolute;
                top: 0;
                left: 0;
                width: 100% !important;
                height: 100% !important;
            }

            .slide-image-only img {
                width: 100%;
                height: 100%;
                object-fit: cover;
            }

            /* Lesson Complete slide - allow scrolling */
            .lesson-complete-slide {
                overflow-y: auto !important;
                height: auto !important;
                max-height: none !important;
                -ms-overflow-style: none;
                scrollbar-width: none;
            }

            .lesson-complete-slide::-webkit-scrollbar {
                display: none;
            }

            .lesson-complete-slide > div {
                height: auto !important;
                min-height: 100%;
                padding: 20px 15px !important;
            }

            .lesson-complete-slide .menu-card.image-card {
                width: 140px !important;
                height: 160px !important;
            }

            .lesson-complete-slide .menu-card.image-card span {
                font-size: 1.2rem !important;
            }

            /* Hide desktop arrows on mobile */
            .slide-arrow {
                display: none;
            }

            /* Mobile slide indicators */
            .slide-indicators {
                bottom: 10px;
                gap: 6px;
            }

            .indicator-dot {
                width: 8px;
                height: 8px;
            }

            /* Vocabulary mobile */
            .vocab-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .flashcard {
                height: 160px;
            }

            .flashcard-term {
                font-size: 1.5rem;
            }

            .flashcard-definition {
                font-size: 1.1rem;
            }

            .flashcard-hint {
                font-size: 0.9rem;
            }

            .reading-nav {
                gap: 8px;
                margin-bottom: 15px;
            }

            .page-btn {
                padding: 8px 16px;
                font-size: 0.9rem;
            }

            /* Quiz mobile */
            #quiz {
                overflow: hidden;
                height: calc(100vh - 130px);
            }

            .quiz-container {
                height: 100%;
                overflow: hidden;
            }

            .quiz-header {
                flex-direction: column;
                gap: 8px;
                margin-bottom: 10px;
            }

            .quiz-nav {
                order: 2;
                width: 100%;
                justify-content: space-between;
            }

            .progress-container {
                margin: 0;
                width: 100%;
                order: 1;
            }

            #quiz-counter {
                font-size: 0.8rem;
            }

            .quiz-question {
                padding: 15px 12px;
                border-radius: 12px;
            }

            .quiz-question h3 {
                font-size: 1rem;
                margin-bottom: 12px;
            }

            .quiz-input {
                font-size: 1rem;
                padding: 10px 14px;
                max-width: 100%;
                margin: 12px auto;
            }

            .check-button {
                font-size: 1rem;
                padding: 10px 20px;
                margin: 12px auto;
            }

            .nav-btn {
                padding: 8px 14px;
                font-size: 0.85rem;
            }

            .feedback {
                padding: 10px;
                margin: 10px 0;
                font-size: 0.9rem;
            }

            .multiple-choice {
                grid-template-columns: 1fr;
                gap: 8px;
            }

            .choice {
                padding: 15px;
                font-size: 1rem;
            }

            .results-summary {
                padding: 30px 20px;
            }

            .results-summary h3 {
                font-size: 1.6rem;
            }

            .score {
                font-size: 3rem;
            }

            /* Popup mobile */
            .popup-content {
                margin: 20px;
                padding: 25px;
                max-width: calc(100% - 40px);
            }

            .popup-word {
                font-size: 1.8rem;
            }

            .popup-definition {
                font-size: 1.1rem;
            }

            /* Vocab link */
            .vocab-link {
                padding: 2px 6px;
                font-size: 0.9rem;
            }

            /* Menu card mobile */
            .menu-card.image-card {
                width: 150px !important;
                height: 170px !important;
            }

            .menu-card.image-card span {
                font-size: 1.4rem !important;
            }
        }

        /* Extra small devices */
        @media (max-width: 380px) {
            .game-title {
                font-size: 1.6rem;
            }

            .level-card {
                width: 180px;
                height: 130px;
            }

            .level-name {
                font-size: 1.5rem;
            }

            .header h1 {
                font-size: 0.95rem;
            }

            .slide-text-section-left h3 {
                font-size: 1.1rem;
            }

            .slide-text-section-left p {
                font-size: 0.85rem;
            }
        }

        /* Swipe hint animation */
        .swipe-hint {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(45, 55, 72, 0.6);
            font-size: 0.85rem;
            display: none;
            align-items: center;
            gap: 8px;
            animation: swipeHintFade 2s ease-in-out infinite;
        }

        @media (max-width: 768px) {
            .swipe-hint {
                display: flex;
            }
        }

        @keyframes swipeHintFade {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Audio elements -->
    <audio id="flipSound" preload="auto">
        <source src="https://static.wixstatic.com/mp3/593d03_f6267363dcfb42e49efc4d6a65189d09.mp3" type="audio/mpeg">
    </audio>
    <audio id="correctSound" preload="auto">
        <source src="https://static.wixstatic.com/mp3/593d03_4391e836785b44ddba85840f97312533.mp3" type="audio/mpeg">
    </audio>
    <audio id="incorrectSound" preload="auto">
        <source src="https://static.wixstatic.com/mp3/593d03_c6e79e59849d42888e3648e90d034582.mp3" type="audio/mpeg">
    </audio>

    <!-- ========== LOADING SCREEN ========== -->
    <div class="loading-screen" id="loadingScreen">
        <h1 class="game-title">Lean Manufacturing</h1>
        <p class="game-subtitle">An Interactive Learning Experience</p>

        <div class="level-select-container">
            <p class="select-prompt">Select Your Level</p>

            <div class="level-cards">
                <div class="level-card b1-card" onclick="startGame('B1')">
                    <div class="level-icon">&#9733;</div>
                    <div class="level-name">B1</div>
                    <div class="level-desc">Intermediate</div>
                </div>

                <div class="level-card b2-card" onclick="startGame('B2')">
                    <div class="level-icon">&#9733;&#9733;</div>
                    <div class="level-name">B2</div>
                    <div class="level-desc">Upper-Intermediate</div>
                </div>

                <div class="level-card c1-card" onclick="startGame('C1')">
                    <div class="level-icon">&#9733;&#9733;&#9733;</div>
                    <div class="level-name">C1</div>
                    <div class="level-desc">Advanced</div>
                </div>
            </div>
        </div>

        <div class="powered-by">
            Powered by <a href="https://www.mimlanguageservices.com/" target="_blank">MIM Language Services</a>
        </div>
    </div>

    <!-- ========== MAIN APPLICATION ========== -->
    <div class="app-container" id="appContainer">
        <div class="header">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle" onclick="toggleNav()">
                    <span></span>
                    <span></span>
                    <span></span>
                </button>
                <div class="header-title">
                    <h1>Lean Manufacturing</h1>
                    <div class="current-level-badge b2" id="levelBadge" onclick="showLoadingScreen()">
                        <span>Level: </span><span id="currentLevelText">B2</span>
                        <span style="font-size: 0.75rem; opacity: 0.7;">(click to change)</span>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="website">
                    <a href="https://www.mimlanguageservices.com/" target="_blank">www.mimlanguageservices.com</a>
                </div>
                <a href="https://www.mimlanguageservices.com/" target="_blank">
                    <img src="https://static.wixstatic.com/media/593d03_8958d96b0f6d4d1ea9dffa7f89bffe8b~mv2.png" alt="MIM Logo" class="header-image">
                </a>
            </div>
        </div>

        <div class="main-container">
            <!-- Navigation Overlay -->
            <div class="nav-overlay" id="navOverlay" onclick="toggleNav()"></div>

            <!-- Collapsible Navigation -->
            <div class="navigation" id="navigation">
                <div class="nav-item active" onclick="showSection('discussion', this)">Lesson</div>
                <div class="nav-item" onclick="showSection('vocabulary', this)">Vocabulary</div>
                <div class="nav-item" onclick="showSection('quiz', this)">Interactive Quiz</div>
                <div class="nav-item" onclick="openWritingForm(this)">Writing</div>
            </div>

            <div class="content">
                <!-- Discussion Section -->
                <div class="section active" id="discussion">
                    <div class="slideshow-container">
                        <div class="slide-content-wrapper">
                            <!-- Navigation Arrows -->
                            <button class="slide-arrow prev" onclick="changeSlide(-1)">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <polyline points="15 18 9 12 15 6"></polyline>
                                </svg>
                            </button>
                            <button class="slide-arrow next" onclick="changeSlide(1)">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <polyline points="9 18 15 12 9 6"></polyline>
                                </svg>
                            </button>

                            <!-- Slide 1 - Introduction Image -->
                            <div class="discussion-slide active slide-image-only">
                                <img src="https://images.unsplash.com/photo-1565043666747-69f6646db940?w=1920" alt="Lean Manufacturing" style="width: 100%; height: 100%; object-fit: cover; border-radius: 16px;">
                            </div>

                            <!-- Slide 2 - Video -->
                            <div class="discussion-slide slide-image-only">
                                <div style="position: relative; width: 100%; height: 100%; border-radius: 16px; overflow: hidden;">
                                    <iframe src="https://www.youtube.com/embed/wfsRAZUnonI?enablejsapi=1&origin=file://" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none;" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                                </div>
                            </div>

                            <!-- Slide 3 - Factory Scenario -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <h3>You work in a factory. You notice that workers spend a lot of time walking to get tools and materials.</h3>
                                        <p>What do you think is the problem?</p>
                                        <ul>
                                            <li><a href="#" onclick="goToSlide(4); return false;" class="slide-choice-link">The factory is too big. We need a smaller building.</a></li>
                                            <li><a href="#" onclick="goToSlide(5); return false;" class="slide-choice-link">The tools and materials are in the wrong places. We should organize them better.</a></li>
                                            <li><a href="#" onclick="goToSlide(6); return false;" class="slide-choice-link">Workers are too slow. They need to walk faster.</a></li>
                                            <li><a href="#" onclick="goToSlide(7); return false;" class="slide-choice-link">We need more workers to bring tools to people.</a></li>
                                            <li><a href="#" onclick="goToSlide(8); return false;" class="slide-choice-link">This is normal. All factories are like this.</a></li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <h3>You're a manager at a manufacturing plant. You observe that employees spend significant time moving around the facility to retrieve tools and materials.</h3>
                                        <p>How would you address this inefficiency?</p>
                                        <ul>
                                            <li><a href="#" onclick="goToSlide(4); return false;" class="slide-choice-link">Relocate to a smaller facility to reduce distances.</a></li>
                                            <li><a href="#" onclick="goToSlide(5); return false;" class="slide-choice-link">Reorganize the workspace to position tools and materials closer to where they're needed.</a></li>
                                            <li><a href="#" onclick="goToSlide(6); return false;" class="slide-choice-link">Implement time tracking to ensure workers move more quickly.</a></li>
                                            <li><a href="#" onclick="goToSlide(7); return false;" class="slide-choice-link">Hire additional staff to deliver materials to workstations.</a></li>
                                            <li><a href="#" onclick="goToSlide(8); return false;" class="slide-choice-link">Accept this as a standard cost of manufacturing operations.</a></li>
                                        </ul>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <h3>As a production supervisor at a manufacturing facility, you've identified that employees expend considerable time traversing the premises to procure tools and raw materials.</h3>
                                        <p>What strategic intervention would you propose?</p>
                                        <ul>
                                            <li><a href="#" onclick="goToSlide(4); return false;" class="slide-choice-link">Advocate for facility downsizing to minimize logistical inefficiencies.</a></li>
                                            <li><a href="#" onclick="goToSlide(5); return false;" class="slide-choice-link">Implement workplace reorganization to optimize material flow and reduce non-value-added movement.</a></li>
                                            <li><a href="#" onclick="goToSlide(6); return false;" class="slide-choice-link">Institute performance metrics to incentivize expeditious movement.</a></li>
                                            <li><a href="#" onclick="goToSlide(7); return false;" class="slide-choice-link">Recruit supplementary personnel to facilitate material transportation.</a></li>
                                            <li><a href="#" onclick="goToSlide(8); return false;" class="slide-choice-link">Acknowledge this as an inherent characteristic of manufacturing operations.</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1581091226825-a6a2a5aee158?w=800" alt="Factory" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 4 - What is Lean Manufacturing -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>What is Lean Manufacturing?</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p><span class="vocab-link" onclick="showPopup('lean', 'a system that reduces waste and improves efficiency')">Lean</span> manufacturing is a way to make products better and faster. The main idea is simple: remove <span class="vocab-link" onclick="showPopup('waste', 'anything that does not add value or is not needed')">waste</span>. Waste is anything that does not help the customer. If something takes time but doesn't make the product better, it is waste. <span class="vocab-link" onclick="showPopup('Toyota', 'a Japanese car company that created the lean system')">Toyota</span> in Japan created this system. Now factories all over the world use lean manufacturing.</p>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>Lean manufacturing is a <span class="vocab-link" onclick="showPopup('methodology', 'a system of methods used in a particular area of study or activity')">methodology</span> focused on minimizing waste while maximizing <span class="vocab-link" onclick="showPopup('productivity', 'the rate at which goods are produced or work is completed')">productivity</span>. The core principle is straightforward: eliminate any activity that doesn't add <span class="vocab-link" onclick="showPopup('value', 'the importance or worth of something to a customer')">value</span> from the customer's perspective. Developed by Toyota in post-war Japan, this approach has revolutionized manufacturing globally. Lean thinking challenges traditional mass production by focusing on <span class="vocab-link" onclick="showPopup('efficiency', 'the ability to do something well without wasting time or resources')">efficiency</span> and continuous improvement.</p>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Lean manufacturing represents a <span class="vocab-link" onclick="showPopup('paradigm', 'a typical example or pattern of something; a model')">paradigm</span> shift in production philosophy, fundamentally oriented toward the systematic elimination of waste whilst <span class="vocab-link" onclick="showPopup('optimizing', 'making the best or most effective use of a situation or resource')">optimizing</span> value creation. The <span class="vocab-link" onclick="showPopup('methodology', 'a system of methods used in a particular area of study or activity')">methodology</span> operates on a deceptively simple premise: any activity that fails to contribute directly to customer value constitutes waste and should be <span class="vocab-link" onclick="showPopup('eradicated', 'completely destroyed or removed')">eradicated</span>. Pioneered by Toyota in the aftermath of World War II, this approach has since <span class="vocab-link" onclick="showPopup('permeated', 'spread throughout something')">permeated</span> manufacturing sectors worldwide, fundamentally reconceptualizing traditional mass production paradigms.</p>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800" alt="Lean Manufacturing" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 5 - The Toyota Production System -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>The Toyota Production System</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p>After World War II, Japan was very poor. Toyota could not <span class="vocab-link" onclick="showPopup('afford', 'to have enough money to pay for something')">afford</span> to waste anything. Two men, Taiichi Ohno and Eiji Toyoda, created a new way to make cars. They called it the Toyota <span class="vocab-link" onclick="showPopup('production', 'the process of making or growing goods to be sold')">Production</span> System (TPS).</p>
                                        <p>The main ideas were simple: make only what customers need, when they need it. Don't keep extra <span class="vocab-link" onclick="showPopup('inventory', 'all the goods and materials that a business has in stock')">inventory</span>. Stop and fix problems immediately. Ask workers for ideas to make things better.</p>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>The Toyota Production System emerged from necessity. Post-war Japan lacked the resources for traditional mass production. Engineers Taiichi Ohno and Eiji Toyoda developed a <span class="vocab-link" onclick="showPopup('revolutionary', 'involving or causing a complete change')">revolutionary</span> approach that would later become known as "lean manufacturing."</p>
                                        <p>TPS introduced concepts like <span class="vocab-link" onclick="showPopup('just-in-time', 'a system where materials arrive exactly when needed, not before')">just-in-time</span> production, where parts arrive exactly when needed, and <span class="vocab-link" onclick="showPopup('jidoka', 'automation with a human touch; machines that stop when problems occur')">jidoka</span> (automation with a human touch), which empowers any worker to stop the production line when they spot a <span class="vocab-link" onclick="showPopup('defect', 'a fault or problem in something')">defect</span>. This was radically different from Western mass production.</p>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>The Toyota Production System <span class="vocab-link" onclick="showPopup('emerged', 'came into existence; developed')">emerged</span> from the constraints of post-war Japan, where resource <span class="vocab-link" onclick="showPopup('scarcity', 'a situation in which something is not easy to find or get')">scarcity</span> necessitated unprecedented efficiency. Engineers Taiichi Ohno and Eiji Toyoda <span class="vocab-link" onclick="showPopup('pioneered', 'developed or was the first to use new methods')">pioneered</span> a production methodology that would fundamentally <span class="vocab-link" onclick="showPopup('reconceptualize', 'think about something in a new or different way')">reconceptualize</span> manufacturing philosophy globally.</p>
                                        <p>TPS introduced <span class="vocab-link" onclick="showPopup('seminal', 'strongly influencing later developments; highly original')">seminal</span> concepts including just-in-time productionthe <span class="vocab-link" onclick="showPopup('synchronization', 'the operation of things at the same time or rate')">synchronization</span> of material flow with actual demandand jidoka, which <span class="vocab-link" onclick="showPopup('democratizes', 'makes something accessible to everyone')">democratizes</span> quality control by empowering frontline workers to halt production upon detecting anomalies. This represented a <span class="vocab-link" onclick="showPopup('paradigm', 'a typical example or pattern of something; a model')">paradigm</span> shift from traditional Western mass production models.</p>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1619551734325-81aaf323686c?w=800" alt="Toyota Production" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 6 - The Seven Wastes (Muda) -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>The Seven Wastes (Muda)</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p>In Japanese, <span class="vocab-link" onclick="showPopup('muda', 'the Japanese word for waste or uselessness')">muda</span> means waste. Toyota found seven types of waste in factories:</p>
                                        <ul>
                                            <li><strong>Transport:</strong> Moving things from place to place</li>
                                            <li><strong>Inventory:</strong> Keeping too many materials or products</li>
                                            <li><strong>Motion:</strong> Workers moving around too much</li>
                                            <li><strong>Waiting:</strong> People or machines doing nothing</li>
                                            <li><strong>Overproduction:</strong> Making more than customers need</li>
                                            <li><strong>Over-processing:</strong> Doing more work than necessary</li>
                                            <li><strong>Defects:</strong> Making products with mistakes</li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>Central to lean thinking is the concept of <span class="vocab-link" onclick="showPopup('muda', 'the Japanese word for waste or uselessness')">muda</span> (waste). Toyota identified seven categories of waste that add cost without adding value:</p>
                                        <ul>
                                            <li><strong>Transport:</strong> Unnecessary movement of materials between processes</li>
                                            <li><strong>Inventory:</strong> Excess stock that ties up <span class="vocab-link" onclick="showPopup('capital', 'money or assets used to generate income')">capital</span> and space</li>
                                            <li><strong>Motion:</strong> Unnecessary movement by workers</li>
                                            <li><strong>Waiting:</strong> <span class="vocab-link" onclick="showPopup('idle', 'not working or being used')">Idle</span> time when resources are not being utilized</li>
                                            <li><strong>Overproduction:</strong> Making more than customer demand requires</li>
                                            <li><strong>Over-processing:</strong> Performing unnecessary operations</li>
                                            <li><strong>Defects:</strong> Products requiring <span class="vocab-link" onclick="showPopup('rework', 'work done again to correct mistakes')">rework</span> or scrapping</li>
                                        </ul>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Fundamental to lean philosophy is the concept of mudaa Japanese term <span class="vocab-link" onclick="showPopup('encompassing', 'including or containing everything')">encompassing</span> waste, futility, and purposelessness. Toyota's <span class="vocab-link" onclick="showPopup('taxonomy', 'a system for classifying things')">taxonomy</span> identifies seven <span class="vocab-link" onclick="showPopup('canonical', 'accepted as being standard or authoritative')">canonical</span> categories:</p>
                                        <ul>
                                            <li><strong>Transport:</strong> <span class="vocab-link" onclick="showPopup('Superfluous', 'unnecessary; more than what is needed')">Superfluous</span> material conveyance between processes</li>
                                            <li><strong>Inventory:</strong> Excessive stock representing <span class="vocab-link" onclick="showPopup('immobilized', 'prevented from moving or being used')">immobilized</span> capital and spatial inefficiency</li>
                                            <li><strong>Motion:</strong> Non-value-adding worker movement</li>
                                            <li><strong>Waiting:</strong> Resource <span class="vocab-link" onclick="showPopup('dormancy', 'a state of inactivity')">dormancy</span> during production cycles</li>
                                            <li><strong>Overproduction:</strong> Output exceeding actual demandconsidered the most <span class="vocab-link" onclick="showPopup('egregious', 'outstandingly bad; shocking')">egregious</span> waste</li>
                                            <li><strong>Over-processing:</strong> Superfluous operations beyond specification requirements</li>
                                            <li><strong>Defects:</strong> Non-conforming products necessitating rework or disposal</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?w=800" alt="Seven Wastes" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 7 - Just-in-Time (JIT) -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Just-in-Time (JIT)</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p><span class="vocab-link" onclick="showPopup('just-in-time', 'a system where materials arrive exactly when needed, not before')">Just-in-Time</span> means making things only when customers want them. Don't make products and keep them in a <span class="vocab-link" onclick="showPopup('warehouse', 'a large building where goods are stored')">warehouse</span>. Instead, make them when someone orders them. This saves money because you don't need big storage spaces. You also don't waste materials making things nobody buys.</p>
                                        <p>Think of a restaurant: a good cook doesn't make 100 meals in the morning and hope customers come. The cook makes each meal when someone orders it.</p>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>Just-in-Time production is a cornerstone of lean manufacturing. The principle is to produce only what is needed, when it is needed, and in the quantity needed. This approach eliminates the costs associated with maintaining large <span class="vocab-link" onclick="showPopup('inventory', 'all the goods and materials that a business has in stock')">inventories</span> and reduces the risk of <span class="vocab-link" onclick="showPopup('obsolescence', 'the state of being outdated or no longer useful')">obsolescence</span>.</p>
                                        <p>JIT requires precise <span class="vocab-link" onclick="showPopup('coordination', 'the organization of different elements to work together effectively')">coordination</span> with suppliers and careful demand <span class="vocab-link" onclick="showPopup('forecasting', 'predicting future events based on current data')">forecasting</span>. When implemented correctly, it dramatically reduces <span class="vocab-link" onclick="showPopup('lead time', 'the time between starting and completing a process')">lead times</span> and working capital requirements.</p>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Just-in-Time production constitutes a <span class="vocab-link" onclick="showPopup('cornerstone', 'an important quality or feature on which something depends')">cornerstone</span> of lean methodology, embodying the principle of producing precisely what is required, precisely when required, in precisely the quantities demanded. This approach <span class="vocab-link" onclick="showPopup('obviates', 'removes or prevents a difficulty')">obviates</span> the capital immobilization inherent in maintaining substantial inventory buffers whilst <span class="vocab-link" onclick="showPopup('mitigating', 'making something less severe or serious')">mitigating</span> obsolescence risk.</p>
                                        <p>Successful JIT implementation <span class="vocab-link" onclick="showPopup('necessitates', 'makes something necessary')">necessitates</span> <span class="vocab-link" onclick="showPopup('meticulous', 'showing great attention to detail')">meticulous</span> supplier coordination and sophisticated demand <span class="vocab-link" onclick="showPopup('prognostication', 'the action of predicting future events')">prognostication</span>. When executed proficiently, JIT dramatically <span class="vocab-link" onclick="showPopup('attenuates', 'reduces the strength or effect of something')">attenuates</span> lead times and working capital requirements.</p>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1553413077-190dd305871c?w=800" alt="Just-in-Time" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 8 - Kaizen (Continuous Improvement) -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Kaizen (Continuous Improvement)</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p><span class="vocab-link" onclick="showPopup('kaizen', 'a Japanese word meaning continuous improvement')">Kaizen</span> is a Japanese word. "Kai" means change, and "zen" means good. Together it means "change for better" or <span class="vocab-link" onclick="showPopup('continuous', 'happening without stopping; ongoing')">continuous</span> improvement. The idea is simple: every day, try to make something a little bit better.</p>
                                        <p>In lean factories, everyone can suggest improvements - not just managers. A worker might notice a faster way to do a task. This small change helps the whole company. Many small improvements add up to big results!</p>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p><span class="vocab-link" onclick="showPopup('kaizen', 'a Japanese word meaning continuous improvement')">Kaizen</span> represents the philosophy of continuous, <span class="vocab-link" onclick="showPopup('incremental', 'increasing gradually by small amounts')">incremental</span> improvement. Rather than waiting for major innovations, kaizen encourages all employees to constantly look for small improvements in their daily work.</p>
                                        <p>This <span class="vocab-link" onclick="showPopup('democratic', 'involving all members of a group in decision-making')">democratic</span> approach to improvement has profound effects: workers feel <span class="vocab-link" onclick="showPopup('empowered', 'given the authority or power to do something')">empowered</span> and engaged, problems are identified early, and the <span class="vocab-link" onclick="showPopup('cumulative', 'increasing by successive additions')">cumulative</span> effect of thousands of small improvements can be transformative.</p>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Kaizen <span class="vocab-link" onclick="showPopup('embodies', 'gives a physical form to an idea or quality')">embodies</span> the philosophy of continuous, incremental amelioration. Rather than <span class="vocab-link" onclick="showPopup('awaiting', 'waiting for')">awaiting</span> <span class="vocab-link" onclick="showPopup('transformative', 'causing a major change')">transformative</span> innovations, kaizen <span class="vocab-link" onclick="showPopup('cultivates', 'develops or improves by careful attention')">cultivates</span> an organizational culture wherein every employee actively identifies opportunities for marginal improvements in their quotidian operations.</p>
                                        <p>This democratized approach to process enhancement yields <span class="vocab-link" onclick="showPopup('manifold', 'many and various')">manifold</span> benefits: heightened employee engagement and <span class="vocab-link" onclick="showPopup('autonomy', 'the right or condition of self-government; independence')">autonomy</span>, early anomaly detection, and the compounding effect of myriad incremental improvements which can prove profoundly transformative over time.</p>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1552664730-d307ca884978?w=800" alt="Kaizen" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 9 - The 5S Methodology -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>The 5S Methodology</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p>5S is a way to keep your workplace <span class="vocab-link" onclick="showPopup('organized', 'arranged in a neat and efficient way')">organized</span>. The five S words are Japanese:</p>
                                        <ul>
                                            <li><strong>Seiri (Sort):</strong> Remove things you don't need</li>
                                            <li><strong>Seiton (Set in order):</strong> Put everything in the right place</li>
                                            <li><strong>Seiso (Shine):</strong> Keep everything clean</li>
                                            <li><strong>Seiketsu (Standardize):</strong> Make rules for keeping things organized</li>
                                            <li><strong>Shitsuke (Sustain):</strong> Keep doing these things every day</li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>5S is a <span class="vocab-link" onclick="showPopup('systematic', 'done according to a fixed plan or system')">systematic</span> approach to workplace organization. Each "S" represents a step toward creating an efficient, safe, and <span class="vocab-link" onclick="showPopup('sustainable', 'able to continue over a period of time')">sustainable</span> work environment:</p>
                                        <ul>
                                            <li><strong>Seiri (Sort):</strong> Eliminate unnecessary items from the workspace</li>
                                            <li><strong>Seiton (Set in order):</strong> Arrange necessary items for easy access</li>
                                            <li><strong>Seiso (Shine):</strong> Clean the workspace and equipment regularly</li>
                                            <li><strong>Seiketsu (Standardize):</strong> Establish <span class="vocab-link" onclick="showPopup('protocols', 'official procedures or systems of rules')">protocols</span> to maintain organization</li>
                                            <li><strong>Shitsuke (Sustain):</strong> <span class="vocab-link" onclick="showPopup('Embed', 'to fix something firmly in a surrounding mass')">Embed</span> these practices into daily routines</li>
                                        </ul>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>5S constitutes a systematic <span class="vocab-link" onclick="showPopup('methodology', 'a system of methods used in a particular area of study or activity')">methodology</span> for workplace organization and <span class="vocab-link" onclick="showPopup('standardization', 'the process of making things of the same type have the same features')">standardization</span>. Each element contributes to creating an efficient, ergonomically optimized environment:</p>
                                        <ul>
                                            <li><strong>Seiri (Sort):</strong> <span class="vocab-link" onclick="showPopup('Systematically', 'in a methodical manner')">Systematically</span> eliminate superfluous items from the workspace</li>
                                            <li><strong>Seiton (Set in order):</strong> <span class="vocab-link" onclick="showPopup('Configure', 'arrange or set up')">Configure</span> essential items for optimal accessibility</li>
                                            <li><strong>Seiso (Shine):</strong> Maintain <span class="vocab-link" onclick="showPopup('immaculate', 'perfectly clean and tidy')">immaculate</span> workspace conditions</li>
                                            <li><strong>Seiketsu (Standardize):</strong> <span class="vocab-link" onclick="showPopup('Codify', 'arrange according to a system')">Codify</span> organizational protocols</li>
                                            <li><strong>Shitsuke (Sustain):</strong> <span class="vocab-link" onclick="showPopup('Institutionalize', 'establish as a norm within an organization')">Institutionalize</span> these practices as organizational norms</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?w=800" alt="5S Methodology" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 10 - Kanban System -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Kanban System</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p><span class="vocab-link" onclick="showPopup('kanban', 'a Japanese word meaning signboard or billboard; a visual scheduling system')">Kanban</span> means "sign" or "card" in Japanese. It's a simple way to control production. When a worker needs more parts, they send a kanban card to the previous <span class="vocab-link" onclick="showPopup('station', 'a place where a particular type of work is done')">station</span>. This tells them: "Please make more parts."</p>
                                        <p>It's like a restaurant kitchen. The waiter gives a ticket to the cook. The cook only makes food when there is a ticket. No ticket = no cooking. This prevents making too much food.</p>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p><span class="vocab-link" onclick="showPopup('kanban', 'a Japanese word meaning signboard or billboard; a visual scheduling system')">Kanban</span> is a visual <span class="vocab-link" onclick="showPopup('scheduling', 'planning when activities or events will happen')">scheduling</span> system that controls the <span class="vocab-link" onclick="showPopup('logistics', 'the detailed organization of a complex operation')">logistics</span> of production. Physical cards or digital signals <span class="vocab-link" onclick="showPopup('trigger', 'to cause something to start')">trigger</span> the movement of materials and the start of production activities.</p>
                                        <p>This "pull system" ensures that production is driven by actual demand rather than <span class="vocab-link" onclick="showPopup('forecasts', 'predictions about future events')">forecasts</span>. Each kanban represents a specific quantity and acts as a work order, preventing overproduction and maintaining <span class="vocab-link" onclick="showPopup('optimal', 'best or most favorable')">optimal</span> inventory levels.</p>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Kanban constitutes a visual scheduling <span class="vocab-link" onclick="showPopup('mechanism', 'a system of parts working together')">mechanism</span> that orchestrates production logistics through signal-based communication. Physical cards or electronic <span class="vocab-link" onclick="showPopup('analogues', 'things that are comparable to something else')">analogues</span> <span class="vocab-link" onclick="showPopup('precipitate', 'cause an event to happen suddenly')">precipitate</span> material movement and production initiation.</p>
                                        <p>This "pull system" ensures production <span class="vocab-link" onclick="showPopup('cadence', 'a regular rhythm')">cadence</span> remains <span class="vocab-link" onclick="showPopup('tethered', 'tied or connected to')">tethered</span> to actual demand rather than <span class="vocab-link" onclick="showPopup('speculative', 'based on guessing rather than knowing')">speculative</span> forecasts. Each kanban represents a <span class="vocab-link" onclick="showPopup('discrete', 'individually separate and distinct')">discrete</span> quantity authorization, effectively preventing overproduction whilst maintaining optimal work-in-progress levels.</p>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1531403009284-440f080d1e12?w=800" alt="Kanban System" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 11 - Value Stream Mapping -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Value Stream Mapping</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p><span class="vocab-link" onclick="showPopup('value stream', 'all the steps needed to deliver a product or service to a customer')">Value stream</span> mapping is like drawing a picture of how you make something. You write down every step from start to finish. Then you can see:</p>
                                        <ul>
                                            <li><strong>Where is the waste?</strong> Which steps take time but don't help the customer?</li>
                                            <li><strong>Where are the <span class="vocab-link" onclick="showPopup('bottlenecks', 'points where flow is blocked or slowed down')">bottlenecks</span>?</strong> Which steps are too slow?</li>
                                            <li><strong>What can we remove?</strong> Which steps are not necessary?</li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p><span class="vocab-link" onclick="showPopup('value stream', 'all the steps needed to deliver a product or service to a customer')">Value Stream</span> Mapping (VSM) is a lean technique for <span class="vocab-link" onclick="showPopup('visualizing', 'forming a mental image of something')">visualizing</span> the entire production process. It documents every step required to deliver a product, including:</p>
                                        <ul>
                                            <li><strong>Process steps:</strong> All activities from raw materials to finished product</li>
                                            <li><strong>Information flow:</strong> How data and orders move through the system</li>
                                            <li><strong>Time metrics:</strong> <span class="vocab-link" onclick="showPopup('Cycle time', 'the time needed to complete one unit of work')">Cycle times</span>, wait times, and <span class="vocab-link" onclick="showPopup('lead time', 'the time between starting and completing a process')">lead times</span></li>
                                        </ul>
                                        <p>By creating a visual map, teams can identify waste and design a more <span class="vocab-link" onclick="showPopup('streamlined', 'made more efficient by removing unnecessary elements')">streamlined</span> future state.</p>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Value Stream Mapping (VSM) constitutes a lean <span class="vocab-link" onclick="showPopup('diagnostic', 'relating to the identification of problems')">diagnostic</span> technique for <span class="vocab-link" onclick="showPopup('holistically', 'in a way that considers the whole system')">holistically</span> visualizing production processes. It <span class="vocab-link" onclick="showPopup('delineates', 'describes or marks the outline of')">delineates</span> every activity requisite for product delivery:</p>
                                        <ul>
                                            <li><strong>Process <span class="vocab-link" onclick="showPopup('taxonomy', 'a system for classifying things')">taxonomy</span>:</strong> Comprehensive activity <span class="vocab-link" onclick="showPopup('enumeration', 'the act of counting or listing things')">enumeration</span> from raw material to finished goods</li>
                                            <li><strong>Information <span class="vocab-link" onclick="showPopup('architecture', 'the structure or design of something')">architecture</span>:</strong> Data and order flow <span class="vocab-link" onclick="showPopup('pathways', 'routes along which something travels')">pathways</span></li>
                                            <li><strong>Temporal metrics:</strong> Cycle times, queue durations, and aggregate lead times</li>
                                        </ul>
                                        <p>This visualization enables teams to pinpoint value-destroying activities and architect optimized future-state configurations.</p>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1454165804606-c3d57bc86b40?w=800" alt="Value Stream Mapping" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 12 - Poka-Yoke (Error-Proofing) -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Poka-Yoke (Error-Proofing)</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p><span class="vocab-link" onclick="showPopup('poka-yoke', 'a Japanese term meaning mistake-proofing or error-proofing')">Poka-yoke</span> means "mistake-proofing" in Japanese. The idea is to design things so that mistakes are impossible or easy to find.</p>
                                        <ul>
                                            <li><strong>Example 1:</strong> USB cables only fit one way. You cannot plug them in wrong.</li>
                                            <li><strong>Example 2:</strong> Your car won't start unless you press the brake pedal. This prevents <span class="vocab-link" onclick="showPopup('accidents', 'things that happen by chance, often causing damage')">accidents</span>.</li>
                                            <li><strong>Example 3:</strong> A machine stops automatically if a part is missing.</li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p><span class="vocab-link" onclick="showPopup('poka-yoke', 'a Japanese term meaning mistake-proofing or error-proofing')">Poka-yoke</span> refers to techniques that make it impossible to make mistakes or make errors immediately <span class="vocab-link" onclick="showPopup('detectable', 'able to be discovered or noticed')">detectable</span>. There are two types:</p>
                                        <ul>
                                            <li><strong>Prevention:</strong> Design that makes errors physically impossible (a SIM card that only fits one way)</li>
                                            <li><strong>Detection:</strong> <span class="vocab-link" onclick="showPopup('Mechanisms', 'systems of parts working together')">Mechanisms</span> that alert operators to errors (sensors that detect missing components)</li>
                                        </ul>
                                        <p>Poka-yoke shifts quality control from <span class="vocab-link" onclick="showPopup('inspection', 'careful examination to check quality')">inspection</span> after production to prevention during production.</p>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Poka-yoke <span class="vocab-link" onclick="showPopup('encompasses', 'includes or contains')">encompasses</span> techniques rendering errors either physically impossible or immediately <span class="vocab-link" onclick="showPopup('discernible', 'able to be perceived or recognized')">discernible</span>. The methodology <span class="vocab-link" onclick="showPopup('bifurcates', 'divides into two branches')">bifurcates</span> into two categories:</p>
                                        <ul>
                                            <li><strong>Prevention mechanisms:</strong> Design configurations that <span class="vocab-link" onclick="showPopup('preclude', 'prevent from happening')">preclude</span> error occurrence (asymmetric connectors)</li>
                                            <li><strong>Detection mechanisms:</strong> Systems that <span class="vocab-link" onclick="showPopup('instantaneously', 'immediately; without delay')">instantaneously</span> identify anomalies (presence sensors, weight verification)</li>
                                        </ul>
                                        <p>This approach fundamentally <span class="vocab-link" onclick="showPopup('reorients', 'changes the focus or direction of')">reorients</span> quality assurance from post-production inspection to <span class="vocab-link" onclick="showPopup('in-process', 'happening during the production process')">in-process</span> prevention.</p>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1581092918056-0c4c3acd3789?w=800" alt="Poka-Yoke" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 13 - Benefits of Lean Manufacturing -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Benefits of Lean Manufacturing</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p>Lean manufacturing helps companies in many ways:</p>
                                        <ul>
                                            <li><strong>Save money:</strong> Less waste means lower costs</li>
                                            <li><strong>Better <span class="vocab-link" onclick="showPopup('quality', 'how good or bad something is')">quality</span>:</strong> Finding problems early means fewer defects</li>
                                            <li><strong>Faster <span class="vocab-link" onclick="showPopup('delivery', 'the act of bringing goods to customers')">delivery</span>:</strong> Products are made quickly when customers order them</li>
                                            <li><strong>Happier workers:</strong> Employees can share their ideas and see improvements</li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>Properly implemented lean manufacturing delivers <span class="vocab-link" onclick="showPopup('substantial', 'of considerable importance or size')">substantial</span> benefits:</p>
                                        <ul>
                                            <li><strong>Cost reduction:</strong> Eliminating waste directly improves <span class="vocab-link" onclick="showPopup('margins', 'the amount of profit made on something')">profit margins</span></li>
                                            <li><strong>Quality improvement:</strong> Built-in quality and early defect detection reduce <span class="vocab-link" onclick="showPopup('rework', 'work done again to correct mistakes')">rework</span> costs</li>
                                            <li><strong>Shorter lead times:</strong> <span class="vocab-link" onclick="showPopup('Streamlined', 'made more efficient')">Streamlined</span> processes enable faster customer response</li>
                                            <li><strong>Employee engagement:</strong> Kaizen <span class="vocab-link" onclick="showPopup('empowers', 'gives power or authority to')">empowers</span> workers to contribute meaningfully</li>
                                            <li><strong>Flexibility:</strong> Lean systems can <span class="vocab-link" onclick="showPopup('adapt', 'change to suit new conditions')">adapt</span> quickly to changing demand</li>
                                        </ul>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Rigorously implemented lean manufacturing <span class="vocab-link" onclick="showPopup('yields', 'produces or provides')">yields</span> <span class="vocab-link" onclick="showPopup('multifaceted', 'having many different aspects')">multifaceted</span> organizational benefits:</p>
                                        <ul>
                                            <li><strong>Cost <span class="vocab-link" onclick="showPopup('attenuation', 'the reduction of something')">attenuation</span>:</strong> Waste elimination directly <span class="vocab-link" onclick="showPopup('augments', 'increases or makes larger')">augments</span> profit margins</li>
                                            <li><strong>Quality <span class="vocab-link" onclick="showPopup('enhancement', 'improvement in quality or value')">enhancement</span>:</strong> Integrated quality mechanisms minimize defect <span class="vocab-link" onclick="showPopup('propagation', 'the spreading of something')">propagation</span></li>
                                            <li><strong>Lead time compression:</strong> Streamlined processes <span class="vocab-link" onclick="showPopup('expedite', 'make happen sooner or faster')">expedite</span> customer fulfillment</li>
                                            <li><strong>Workforce <span class="vocab-link" onclick="showPopup('galvanization', 'shocking someone into action')">galvanization</span>:</strong> Participatory improvement cultures enhance engagement</li>
                                            <li><strong>Operational <span class="vocab-link" onclick="showPopup('agility', 'ability to move quickly and easily')">agility</span>:</strong> Lean systems exhibit superior demand responsiveness</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1460925895917-afdab827c52f?w=800" alt="Benefits of Lean" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 14 - Challenges of Lean Manufacturing -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Challenges of Lean Manufacturing</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p>Lean manufacturing is not easy. Many companies try and fail. Here are some common problems:</p>
                                        <ul>
                                            <li><strong>Change is hard:</strong> People don't like to change how they work. They might <span class="vocab-link" onclick="showPopup('resist', 'to fight against or refuse to accept something')">resist</span> new methods.</li>
                                            <li><strong>Takes time:</strong> You can't become lean in one day. It needs patience and <span class="vocab-link" onclick="showPopup('commitment', 'the state of being dedicated to a cause')">commitment</span>.</li>
                                            <li><strong>Supply chain risk:</strong> With less inventory, if a <span class="vocab-link" onclick="showPopup('supplier', 'a company that provides goods to another company')">supplier</span> has a problem, your factory might stop.</li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>Implementing lean manufacturing presents significant challenges:</p>
                                        <ul>
                                            <li><strong>Cultural <span class="vocab-link" onclick="showPopup('resistance', 'the refusal to accept or comply with something')">resistance</span>:</strong> Changing established work practices requires overcoming deeply <span class="vocab-link" onclick="showPopup('ingrained', 'firmly established; difficult to change')">ingrained</span> habits</li>
                                            <li><strong>Management commitment:</strong> Lean requires long-term thinking; pressure for quick results often <span class="vocab-link" onclick="showPopup('undermines', 'weakens or damages')">undermines</span> implementation</li>
                                            <li><strong>Supply chain <span class="vocab-link" onclick="showPopup('vulnerability', 'the quality of being easily hurt or attacked')">vulnerability</span>:</strong> Reduced inventory buffers increase <span class="vocab-link" onclick="showPopup('exposure', 'the state of being unprotected')">exposure</span> to supplier disruptions</li>
                                            <li><strong>Training investment:</strong> Successful lean requires <span class="vocab-link" onclick="showPopup('extensive', 'large in amount or scale')">extensive</span> employee education</li>
                                        </ul>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Lean implementation encounters <span class="vocab-link" onclick="showPopup('formidable', 'inspiring fear or respect through being impressively powerful')">formidable</span> organizational obstacles:</p>
                                        <ul>
                                            <li><strong>Cultural <span class="vocab-link" onclick="showPopup('inertia', 'a tendency to do nothing or remain unchanged')">inertia</span>:</strong> <span class="vocab-link" onclick="showPopup('Entrenched', 'firmly established and difficult to change')">Entrenched</span> practices resist modification; behavioral change necessitates sustained effort</li>
                                            <li><strong>Leadership <span class="vocab-link" onclick="showPopup('perseverance', 'persistence in doing something despite difficulty')">perseverance</span>:</strong> The <span class="vocab-link" onclick="showPopup('protracted', 'lasting for a long time; prolonged')">protracted</span> nature of lean transformation conflicts with short-term performance pressures</li>
                                            <li><strong>Supply chain <span class="vocab-link" onclick="showPopup('fragility', 'the quality of being easily broken or damaged')">fragility</span>:</strong> Attenuated inventory buffers <span class="vocab-link" onclick="showPopup('amplify', 'increase or make larger')">amplify</span> vulnerability to supplier disruptions</li>
                                            <li><strong>Capability development:</strong> Lean <span class="vocab-link" onclick="showPopup('proficiency', 'a high degree of skill')">proficiency</span> demands substantial investment in workforce development</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1507537297725-24a1c029d3ca?w=800" alt="Challenges of Lean" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 15 - Lean Beyond Manufacturing -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Lean Beyond Manufacturing</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p>Lean ideas work in many places, not just factories:</p>
                                        <ul>
                                            <li><strong>Hospitals:</strong> Lean helps <span class="vocab-link" onclick="showPopup('patients', 'people receiving medical treatment')">patients</span> wait less and get better care</li>
                                            <li><strong>Offices:</strong> Less paperwork, faster <span class="vocab-link" onclick="showPopup('decisions', 'choices made after thinking')">decisions</span></li>
                                            <li><strong>Software:</strong> Teams use "Agile" methods, which come from lean thinking</li>
                                            <li><strong>Your home:</strong> You can use 5S to organize your room!</li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>Lean principles have <span class="vocab-link" onclick="showPopup('transcended', 'gone beyond the limits of')">transcended</span> manufacturing to <span class="vocab-link" onclick="showPopup('permeate', 'spread throughout')">permeate</span> diverse sectors:</p>
                                        <ul>
                                            <li><strong>Healthcare:</strong> Lean reduces patient wait times and improves <span class="vocab-link" onclick="showPopup('clinical', 'relating to medical treatment')">clinical</span> outcomes</li>
                                            <li><strong>Service industries:</strong> Banks, <span class="vocab-link" onclick="showPopup('insurers', 'companies that provide insurance')">insurers</span>, and governments use lean to improve processes</li>
                                            <li><strong>Software development:</strong> Agile and DevOps methodologies <span class="vocab-link" onclick="showPopup('derive', 'obtain something from a source')">derive</span> from lean principles</li>
                                            <li><strong>Construction:</strong> "Lean construction" reduces project delays and cost <span class="vocab-link" onclick="showPopup('overruns', 'amounts by which costs exceed budget')">overruns</span></li>
                                        </ul>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Lean principles have <span class="vocab-link" onclick="showPopup('proliferated', 'increased rapidly in number')">proliferated</span> beyond manufacturing to <span class="vocab-link" onclick="showPopup('permeate', 'spread throughout')">permeate</span> <span class="vocab-link" onclick="showPopup('heterogeneous', 'diverse in character or content')">heterogeneous</span> sectors:</p>
                                        <ul>
                                            <li><strong>Healthcare:</strong> Lean <span class="vocab-link" onclick="showPopup('interventions', 'actions taken to improve a situation')">interventions</span> attenuate patient wait times and enhance clinical outcomes</li>
                                            <li><strong>Service industries:</strong> Financial institutions and governmental entities <span class="vocab-link" onclick="showPopup('leverage', 'use something to maximum advantage')">leverage</span> lean to optimize transactional processes</li>
                                            <li><strong>Software development:</strong> Agile and DevOps <span class="vocab-link" onclick="showPopup('paradigms', 'typical patterns or models')">paradigms</span> represent lean philosophy <span class="vocab-link" onclick="showPopup('instantiated', 'represented as a concrete example')">instantiated</span> in digital contexts</li>
                                            <li><strong>Construction:</strong> "Lean construction" methodologies mitigate schedule <span class="vocab-link" onclick="showPopup('slippage', 'failure to meet a standard or deadline')">slippage</span> and budget <span class="vocab-link" onclick="showPopup('exceedances', 'amounts by which something goes over a limit')">exceedances</span></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1576091160550-2173dba999ef?w=800" alt="Lean Beyond Manufacturing" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 16 - Case Study: Toyota's Success -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Case Study: Toyota's Success</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p>Toyota started small. After World War II, it was just a small Japanese company. American car companies were much bigger and made more cars. But Toyota used lean methods and grew <span class="vocab-link" onclick="showPopup('steadily', 'in a gradual, regular way')">steadily</span>.</p>
                                        <p>By 2008, Toyota became the world's largest car maker! How? By focusing on quality and removing waste. Every worker could stop the <span class="vocab-link" onclick="showPopup('assembly line', 'a line of workers and machines in a factory')">assembly line</span> if they found a problem. This made Toyota cars very <span class="vocab-link" onclick="showPopup('reliable', 'consistently good in quality')">reliable</span>.</p>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>Toyota's <span class="vocab-link" onclick="showPopup('trajectory', 'the path followed by something')">trajectory</span> from a small post-war company to the world's largest automaker <span class="vocab-link" onclick="showPopup('exemplifies', 'serves as a typical example of')">exemplifies</span> lean manufacturing's potential.</p>
                                        <p>Key success factors included:</p>
                                        <ul>
                                            <li><strong><span class="vocab-link" onclick="showPopup('Relentless', 'continuing without pause')">Relentless</span> focus on quality:</strong> The "andon cord" system let any worker stop production</li>
                                            <li><strong>Respect for people:</strong> Workers are seen as <span class="vocab-link" onclick="showPopup('assets', 'valuable things or people')">assets</span>, not costs</li>
                                            <li><strong>Long-term thinking:</strong> <span class="vocab-link" onclick="showPopup('Prioritizing', 'treating something as most important')">Prioritizing</span> sustainable growth over short-term profits</li>
                                        </ul>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Toyota's <span class="vocab-link" onclick="showPopup('ascendancy', 'the state of being dominant or in control')">ascendancy</span> from a <span class="vocab-link" onclick="showPopup('nascent', 'just beginning to develop')">nascent</span> post-war enterprise to global automotive <span class="vocab-link" onclick="showPopup('hegemony', 'leadership or dominance')">hegemony</span> epitomizes lean manufacturing's transformative potential.</p>
                                        <p>Critical success factors included:</p>
                                        <ul>
                                            <li><strong><span class="vocab-link" onclick="showPopup('Unwavering', 'steady or resolute')">Unwavering</span> quality <span class="vocab-link" onclick="showPopup('orientation', 'the direction of someone&apos;s interest')">orientation</span>:</strong> The andon cord system democratized quality control</li>
                                            <li><strong>Human capital <span class="vocab-link" onclick="showPopup('valorization', 'giving value or importance to something')">valorization</span>:</strong> Workers <span class="vocab-link" onclick="showPopup('construed', 'interpreted or understood')">construed</span> as organizational assets rather than <span class="vocab-link" onclick="showPopup('expendable', 'able to be sacrificed or used up')">expendable</span> resources</li>
                                            <li><strong>Temporal <span class="vocab-link" onclick="showPopup('horizon', 'the limit of a person&apos;s mental perception')">horizon</span> extension:</strong> Privileging sustainable growth over immediate returns</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1621361365424-06f0c1376df6?w=800" alt="Toyota Success" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 17 - Common Mistakes -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Common Mistakes in Lean Implementation</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p>Many companies fail when trying lean. Here are mistakes to avoid:</p>
                                        <ul>
                                            <li><strong>Copying without understanding:</strong> You can't just copy Toyota. You must understand WHY they do things.</li>
                                            <li><strong>Only using tools:</strong> Lean is not just about kanban cards or 5S. It's a way of thinking.</li>
                                            <li><strong>Forgetting people:</strong> Lean works because of people, not just <span class="vocab-link" onclick="showPopup('systems', 'sets of connected things that work together')">systems</span>.</li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>Lean implementation frequently fails due to <span class="vocab-link" onclick="showPopup('misconceptions', 'wrong ideas or beliefs')">misconceptions</span>:</p>
                                        <ul>
                                            <li><strong><span class="vocab-link" onclick="showPopup('Superficial', 'appearing to be true until examined more closely')">Superficial</span> copying:</strong> Implementing lean tools without understanding the underlying philosophy</li>
                                            <li><strong>Tool <span class="vocab-link" onclick="showPopup('obsession', 'an unhealthy focus on something')">obsession</span>:</strong> Focusing on <span class="vocab-link" onclick="showPopup('techniques', 'ways of doing something')">techniques</span> (5S, kanban) while neglecting cultural transformation</li>
                                            <li><strong>Cost-cutting focus:</strong> Using lean primarily for layoffs destroys employee trust and engagement</li>
                                            <li><strong>Top-down <span class="vocab-link" onclick="showPopup('imposition', 'the act of forcing something on someone')">imposition</span>:</strong> Mandating lean without <span class="vocab-link" onclick="showPopup('genuine', 'truly what it is said to be; authentic')">genuine</span> leadership commitment</li>
                                        </ul>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p>Lean implementations frequently <span class="vocab-link" onclick="showPopup('founder', 'fail or break down')">founder</span> due to fundamental misconceptions:</p>
                                        <ul>
                                            <li><strong><span class="vocab-link" onclick="showPopup('Superficial', 'appearing to be true until examined more closely')">Superficial</span> <span class="vocab-link" onclick="showPopup('emulation', 'the act of copying someone else')">emulation</span>:</strong> Implementing lean <span class="vocab-link" onclick="showPopup('artifacts', 'objects made by humans')">artifacts</span> absent philosophical <span class="vocab-link" onclick="showPopup('assimilation', 'the process of understanding information')">assimilation</span></li>
                                            <li><strong>Tool <span class="vocab-link" onclick="showPopup('fetishism', 'excessive focus on something')">fetishism</span>:</strong> Privileging technique deployment over cultural <span class="vocab-link" onclick="showPopup('metamorphosis', 'a complete change in form')">metamorphosis</span></li>
                                            <li><strong>Cost <span class="vocab-link" onclick="showPopup('myopia', 'lack of imagination or foresight')">myopia</span>:</strong> <span class="vocab-link" onclick="showPopup('Instrumentalizing', 'treating as a means to an end')">Instrumentalizing</span> lean for workforce reduction <span class="vocab-link" onclick="showPopup('eviscerates', 'deprives of essential content')">eviscerates</span> employee trust</li>
                                            <li><strong><span class="vocab-link" onclick="showPopup('Hierarchical', 'arranged in order of rank')">Hierarchical</span> mandate:</strong> Imposing lean without authentic leadership <span class="vocab-link" onclick="showPopup('advocacy', 'public support for something')">advocacy</span></li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1578575437130-527eed3abbec?w=800" alt="Common Mistakes" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 18 - Key Takeaways -->
                            <div class="discussion-slide slide-horizontal">
                                <div class="slide-text-section-left">
                                    <h3>Key Takeaways</h3>
                                    <!-- B1 Version -->
                                    <div class="difficulty-content difficulty-B1">
                                        <p>Remember these main points about lean manufacturing:</p>
                                        <ul>
                                            <li><strong>Waste is the enemy:</strong> Find waste and remove it</li>
                                            <li><strong>Respect people:</strong> Workers have the best ideas for improvement</li>
                                            <li><strong>Never stop improving:</strong> Kaizen means getting better every day</li>
                                            <li><strong>Make only what's needed:</strong> Don't produce more than customers want</li>
                                            <li><strong>Quality first:</strong> Fix problems immediately, don't pass them on</li>
                                        </ul>
                                    </div>
                                    <!-- B2 Version -->
                                    <div class="difficulty-content difficulty-B2">
                                        <p>Essential lean manufacturing principles to remember:</p>
                                        <ul>
                                            <li><strong>Value definition:</strong> Understand what customers truly value and eliminate everything else</li>
                                            <li><strong>Flow optimization:</strong> Create smooth, <span class="vocab-link" onclick="showPopup('uninterrupted', 'without any breaks or pauses')">uninterrupted</span> production flows</li>
                                            <li><strong>Pull systems:</strong> Let customer demand drive production, not forecasts</li>
                                            <li><strong>Continuous improvement:</strong> <span class="vocab-link" onclick="showPopup('Embrace', 'accept willingly')">Embrace</span> kaizen as an ongoing journey, not a destination</li>
                                            <li><strong>Respect for people:</strong> Develop and engage employees as the foundation of lean success</li>
                                        </ul>
                                    </div>
                                    <!-- C1 Version -->
                                    <div class="difficulty-content difficulty-C1">
                                        <p><span class="vocab-link" onclick="showPopup('Salient', 'most noticeable or important')">Salient</span> lean manufacturing principles:</p>
                                        <ul>
                                            <li><strong>Value <span class="vocab-link" onclick="showPopup('articulation', 'the expression of an idea')">articulation</span>:</strong> <span class="vocab-link" onclick="showPopup('Rigorously', 'in a thorough and careful way')">Rigorously</span> define customer value and <span class="vocab-link" onclick="showPopup('extirpate', 'destroy completely')">extirpate</span> non-value-adding activities</li>
                                            <li><strong>Flow <span class="vocab-link" onclick="showPopup('optimization', 'the action of making the best use of something')">optimization</span>:</strong> Establish <span class="vocab-link" onclick="showPopup('seamless', 'smooth and continuous')">seamless</span>, unimpeded production flows</li>
                                            <li><strong>Demand-driven production:</strong> <span class="vocab-link" onclick="showPopup('Subordinate', 'treat as less important')">Subordinate</span> production cadence to actual customer demand</li>
                                            <li><strong>Perpetual <span class="vocab-link" onclick="showPopup('amelioration', 'the act of making something better')">amelioration</span>:</strong> Conceptualize kaizen as an <span class="vocab-link" onclick="showPopup('asymptotic', 'approaching but never reaching')">asymptotic</span> journey toward perfection</li>
                                            <li><strong>Human capital <span class="vocab-link" onclick="showPopup('primacy', 'the fact of being most important')">primacy</span>:</strong> Cultivate employee development as the <span class="vocab-link" onclick="showPopup('bedrock', 'the fundamental principles on which something is based')">bedrock</span> of sustainable lean transformation</li>
                                        </ul>
                                    </div>
                                </div>
                                <div class="slide-image-section-right">
                                    <img src="https://images.unsplash.com/photo-1553877522-43269d4ea984?w=800" alt="Key Takeaways" style="width: 100%; height: 100%; object-fit: cover; border-radius: 14px;">
                                </div>
                            </div>

                            <!-- Slide 19 - Continue Your Learning -->
                            <div class="discussion-slide lesson-complete-slide">
                                <div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100%; text-align: center; padding: 40px; background: linear-gradient(135deg, rgba(26, 26, 46, 0.95) 0%, rgba(22, 33, 62, 0.95) 50%, rgba(15, 52, 96, 0.95) 100%); border-radius: 20px;">
                                    <h2 style="font-size: 2.8rem; color: #fff; margin-bottom: 15px; font-weight: 700;">Lesson Complete!</h2>
                                    <p style="font-size: 1.2rem; color: rgba(255, 255, 255, 0.7); margin-bottom: 50px; letter-spacing: 2px; text-transform: uppercase;">Continue Your Learning</p>

                                    <div style="display: flex; gap: 30px; flex-wrap: wrap; justify-content: center;">
                                        <!-- Vocabulary Card -->
                                        <div onclick="showSection('vocabulary', document.querySelectorAll('.nav-item')[1])" class="menu-card image-card vocab-card" style="width: 200px; height: 220px; border-radius: 20px; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; cursor: pointer; transition: all 0.4s ease; position: relative; overflow: hidden; border: 2px solid rgba(255, 255, 255, 0.2);">
                                            <div class="image-card-bg" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('https://static.wixstatic.com/media/593d03_475a37d701ba401daa02884abd2fff73~mv2.png'); background-size: 180%; background-position: center; filter: grayscale(100%); transition: filter 0.4s ease;"></div>
                                            <div class="image-card-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); transition: background 0.4s ease;"></div>
                                            <div style="position: relative; z-index: 1; width: 100%; padding: 15px 0; background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 50%, transparent 100%); text-align: center;">
                                                <span style="color: white; font-size: 2rem; font-weight: 700; letter-spacing: 1px;">Vocabulary</span>
                                            </div>
                                        </div>

                                        <!-- Quiz Card -->
                                        <div onclick="showSection('quiz', document.querySelectorAll('.nav-item')[2])" class="menu-card image-card quiz-card" style="width: 200px; height: 220px; border-radius: 20px; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; cursor: pointer; transition: all 0.4s ease; position: relative; overflow: hidden; border: 2px solid rgba(255, 255, 255, 0.2);">
                                            <div class="image-card-bg" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('https://static.wixstatic.com/media/593d03_88c48297c2014a74aada5cab891c0af0~mv2.jpg'); background-size: 180%; background-position: center; filter: grayscale(100%); transition: filter 0.4s ease;"></div>
                                            <div class="image-card-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); transition: background 0.4s ease;"></div>
                                            <div style="position: relative; z-index: 1; width: 100%; padding: 15px 0; background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 50%, transparent 100%); text-align: center;">
                                                <span style="color: white; font-size: 2rem; font-weight: 700; letter-spacing: 1px;">Quiz</span>
                                            </div>
                                        </div>

                                        <!-- Writing Card -->
                                        <div onclick="openWritingForm(document.querySelectorAll('.nav-item')[3])" class="menu-card image-card writing-card" style="width: 200px; height: 220px; border-radius: 20px; display: flex; flex-direction: column; align-items: center; justify-content: flex-end; cursor: pointer; transition: all 0.4s ease; position: relative; overflow: hidden; border: 2px solid rgba(255, 255, 255, 0.2);">
                                            <div class="image-card-bg" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('https://static.wixstatic.com/media/593d03_eb945dbb69d54a21ba8d27cae6ed77a9~mv2.png'); background-size: 180%; background-position: center; filter: grayscale(100%); transition: filter 0.4s ease;"></div>
                                            <div class="image-card-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); transition: background 0.4s ease;"></div>
                                            <div style="position: relative; z-index: 1; width: 100%; padding: 15px 0; background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0.7) 50%, transparent 100%); text-align: center;">
                                                <span style="color: white; font-size: 2rem; font-weight: 700; letter-spacing: 1px;">Writing</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Slide Indicators -->
                        <div class="slide-indicators">
                            <div class="indicator-dot active" onclick="goToSlide(1)"></div>
                            <div class="indicator-dot" onclick="goToSlide(2)"></div>
                            <div class="indicator-dot" onclick="goToSlide(3)"></div>
                            <div class="indicator-dot" onclick="goToSlide(4)"></div>
                            <div class="indicator-dot" onclick="goToSlide(5)"></div>
                            <div class="indicator-dot" onclick="goToSlide(6)"></div>
                            <div class="indicator-dot" onclick="goToSlide(7)"></div>
                            <div class="indicator-dot" onclick="goToSlide(8)"></div>
                            <div class="indicator-dot" onclick="goToSlide(9)"></div>
                            <div class="indicator-dot" onclick="goToSlide(10)"></div>
                            <div class="indicator-dot" onclick="goToSlide(11)"></div>
                            <div class="indicator-dot" onclick="goToSlide(12)"></div>
                            <div class="indicator-dot" onclick="goToSlide(13)"></div>
                            <div class="indicator-dot" onclick="goToSlide(14)"></div>
                            <div class="indicator-dot" onclick="goToSlide(15)"></div>
                            <div class="indicator-dot" onclick="goToSlide(16)"></div>
                            <div class="indicator-dot" onclick="goToSlide(17)"></div>
                            <div class="indicator-dot" onclick="goToSlide(18)"></div>
                            <div class="indicator-dot" onclick="goToSlide(19)"></div>
                        </div>
                    </div>
                </div>

                <!-- Vocabulary Section -->
                <div class="section" id="vocabulary">
                    <h2>Vocabulary Flashcards</h2>
                    <div class="reading-container">
                        <!-- B1 Vocabulary -->
                        <div class="vocab-page" id="vocab-page-B1">
                            <div class="vocab-grid">
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Fear</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">A strong feeling of being scared or worried about danger</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Control</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">To have power over something or someone</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Punish</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">To hurt or make someone suffer because they did something bad</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Ancient</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Very old; from a long time ago</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Strict</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Demanding that rules are obeyed; not allowing freedom</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Empire</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">A group of countries ruled by one leader or government</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Crime</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">An action that breaks the law</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Trade</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Buying and selling things between people or countries</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Society</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">All the people living together in a country or area</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Government</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">The group of people who control a country</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Cruel</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Causing pain or suffering to others</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Behave</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">To act in a particular way</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Shame</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">A bad feeling when others think you did something wrong</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Guilt</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">A feeling that you have done something wrong</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- B2 Vocabulary -->
                        <div class="vocab-page" id="vocab-page-B2">
                            <div class="vocab-grid">
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Stability</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">A situation where things stay the same and do not change suddenly</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Terror</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Extreme fear caused by violence or threats</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Dignity</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">The quality of being worthy of respect</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Chaotic</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Completely disordered and confused</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Harsh</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Severe, cruel, or strict</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Centralize</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">To bring under the control of one central authority</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Pax Mongolica</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">A period of peace and stability across the Mongol Empire (Latin for "Mongol Peace")</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Excluded</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Kept out or prevented from joining a group</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Conscience</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">An inner sense of what is right or wrong</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Compass</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Something that helps you know what is right and what is wrong</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Internalize</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">To make attitudes or behavior part of your nature</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Surveillance</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Close observation, especially of a suspected person</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- C1 Vocabulary -->
                        <div class="vocab-page" id="vocab-page-C1">
                            <div class="vocab-grid">
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Primordial</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Existing from the beginning of time; ancient and fundamental</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Neurobiology</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">The biology of the nervous system and brain</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Transcending</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Going beyond the limits of something</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Codification</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">The process of organizing laws into a systematic written code</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Jurisprudence</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">The theory and philosophy of law</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Draconian</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Extremely harsh and severe (from Draco, the Athenian lawmaker)</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Vendetta</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">A prolonged bitter quarrel with violent revenge</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Annihilation</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Complete destruction</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Impunity</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Freedom from punishment or negative consequences</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Anthropological</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Relating to the study of human societies and cultures</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Ostracism</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Exclusion from a society or group</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Autonomy</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">The right or condition of self-government; independence</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Circumscribed</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Restricted or limited</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Transgression</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">An act that goes against a law, rule, or code of conduct</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Indoctrination</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">The process of teaching a person or group to accept a set of beliefs uncritically</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="flashcard" onclick="flipCard(this)">
                                    <div class="flashcard-inner">
                                        <div class="flashcard-front">
                                            <div class="flashcard-term">Visceral</div>
                                            <div class="flashcard-hint">Click to see definition</div>
                                        </div>
                                        <div class="flashcard-back">
                                            <div class="flashcard-definition">Relating to deep feelings rather than to careful thought</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quiz Section -->
                <div class="section" id="quiz">
                    <h2>Vocabulary Quiz</h2>
                    <div class="quiz-container">
                        <div class="quiz-header" id="quiz-header">
                            <div class="quiz-nav">
                                <button class="nav-btn" onclick="previousQuizQuestion()" id="prevQuizBtn">Previous</button>
                            </div>
                            <div class="progress-container">
                                <div id="quiz-counter">Question 1 of 10</div>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="quizProgressFill"></div>
                                </div>
                            </div>
                            <div class="quiz-nav">
                                <button class="nav-btn" onclick="nextQuizQuestion()" id="nextQuizBtn">Next</button>
                            </div>
                        </div>

                        <div id="quiz-questions-container">
                            <!-- Questions will be generated dynamically -->
                        </div>

                        <div class="quiz-page" id="quiz-results-page" style="display: none;">
                            <div class="results-summary">
                                <h3>Quiz Complete!</h3>
                                <div class="score" id="finalQuizScore">0/10</div>
                                <button class="check-button" onclick="restartVocabQuiz()">Try Again</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Writing Section -->
                <div class="section" id="writing">
                    <h2>Writing Practice</h2>
                    <div class="writing-container">
                        <div class="writing-content">
                            <h3 class="writing-question">Lean Manufacturing in Your Life</h3>

                            <p class="writing-objective">
                                Think about a process in your workplace, school, or home that could be improved using lean principles.<br><br>
                                Write 150-250 words describing the process and how you would apply lean concepts to improve it. Use vocabulary from the lesson (waste, kaizen, 5S, just-in-time, value stream, etc.) in your response.<br><br>
                                Consider: What types of waste exist in this process? Which lean tool or principle would be most helpful? What benefits would you expect from these changes?
                            </p>

                            <form id="writingForm" class="writing-form">
                                <div class="form-group">
                                    <label for="studentName">Student Name</label>
                                    <input type="text" id="studentName" name="studentName" required>
                                </div>

                                <div class="form-group">
                                    <label for="teacherEmail">Teacher's Email</label>
                                    <input type="email" id="teacherEmail" name="teacherEmail" required>
                                </div>

                                <div class="form-group">
                                    <label for="writingInput">Your Response</label>
                                    <textarea id="writingInput" name="writingInput" placeholder="Write your response here..." required></textarea>
                                </div>

                                <div class="button-container">
                                    <button type="button" class="check-button" onclick="openMailto()">Send Response</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Vocabulary Definition Popup -->
    <div class="popup-overlay" id="popupOverlay" onclick="closeVocabPopup()">
        <div class="popup-content" onclick="event.stopPropagation()">
            <div class="popup-word" id="popupWord"></div>
            <div class="popup-definition" id="popupDefinition"></div>
            <button class="popup-close" onclick="closeVocabPopup()">Close</button>
        </div>
    </div>

    <!-- Vocab Popup (for inline vocab links) -->
    <div id="vocabPopup" onclick="closePopup()">
        <div class="popup-content" onclick="event.stopPropagation()">
            <div class="popup-word" id="vocabPopupWord"></div>
            <div class="popup-definition" id="vocabPopupDef"></div>
            <button class="popup-close" onclick="closePopup()">Close</button>
        </div>
    </div>

    <script>
        // ========== GLOBAL STATE ==========
        let currentDifficulty = 'B2';
        let currentSlide = 1;
        const totalSlides = 19;

        // ========== LOADING SCREEN & GAME START ==========
        function startGame(level) {
            currentDifficulty = level;

            // Update difficulty display
            updateDifficultyDisplay();

            // Hide loading screen
            const loadingScreen = document.getElementById('loadingScreen');
            loadingScreen.classList.add('hidden');

            // Show app container
            setTimeout(() => {
                document.getElementById('appContainer').classList.add('visible');
            }, 300);

            // Set difficulty content visibility
            setDifficultyContent(level);

            // Set vocabulary page to match level
            setVocabPage(level);

            // Initialize quiz with level-specific vocabulary
            initializeVocabQuiz();
        }

        function showLoadingScreen() {
            document.getElementById('appContainer').classList.remove('visible');
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.remove('hidden');
            }, 300);
        }

        function setDifficultyContent(level) {
            // Hide all difficulty content
            document.querySelectorAll('.difficulty-content').forEach(el => {
                el.style.display = 'none';
            });

            // Show selected level content
            document.querySelectorAll('.difficulty-' + level).forEach(el => {
                el.style.display = 'block';
            });
        }

        function updateDifficultyDisplay() {
            const badge = document.getElementById('levelBadge');
            const text = document.getElementById('currentLevelText');

            badge.className = 'current-level-badge ' + currentDifficulty.toLowerCase();
            text.textContent = currentDifficulty;
        }

        // ========== NAVIGATION ==========
        function toggleNav() {
            const nav = document.getElementById('navigation');
            const overlay = document.getElementById('navOverlay');
            const toggle = document.getElementById('menuToggle');

            nav.classList.toggle('open');
            overlay.classList.toggle('visible');
            toggle.classList.toggle('active');
        }

        function showSection(sectionId, element) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));

            // Show target section
            document.getElementById(sectionId).classList.add('active');

            // Update nav items
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            element.classList.add('active');

            // Reinitialize quiz when navigating to quiz section
            if (sectionId === 'quiz') {
                // Reset quiz display state
                document.getElementById('quiz-results-page').style.display = 'none';
                document.getElementById('quiz-questions-container').style.display = 'block';
                document.getElementById('quiz-header').style.display = 'flex';
                initializeVocabQuiz();
            }

            // Close nav
            toggleNav();
        }

        function openWritingForm(element) {
            // Update nav items
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            element.classList.add('active');

            // Show writing section
            showSection('writing', element);

            // Close nav
            toggleNav();
        }

        // Writing section - send email
        function openMailto() {
            const studentName = document.getElementById('studentName').value.trim();
            const teacherEmail = document.getElementById('teacherEmail').value.trim();
            const writingResponse = document.getElementById('writingInput').value.trim();

            if (!studentName || !teacherEmail || !writingResponse) {
                alert('Please fill in all fields!');
                return;
            }

            const subject = encodeURIComponent('Writing Assignment - Lean Manufacturing - ' + studentName);
            const body = encodeURIComponent('Student Name: ' + studentName + '\n\nResponse:\n' + writingResponse);
            window.location.href = `mailto:${teacherEmail}?subject=${subject}&body=${body}`;
        }

        // ========== SLIDESHOW ==========
        function changeSlide(direction) {
            const slides = document.querySelectorAll('.discussion-slide');
            const dots = document.querySelectorAll('.indicator-dot');

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide += direction;

            if (currentSlide > totalSlides) currentSlide = 1;
            if (currentSlide < 1) currentSlide = totalSlides;

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');
        }

        function goToSlide(slideNum) {
            const slides = document.querySelectorAll('.discussion-slide');
            const dots = document.querySelectorAll('.indicator-dot');

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide = slideNum;

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');
        }

        // Keyboard navigation
        document.addEventListener('keydown', function(e) {
            const discussionSection = document.getElementById('discussion');
            if (discussionSection && discussionSection.classList.contains('active')) {
                if (e.key === 'ArrowLeft') changeSlide(-1);
                else if (e.key === 'ArrowRight') changeSlide(1);
            }
        });

        // ========== FLASHCARDS ==========
        function flipCard(card) {
            card.classList.toggle('flipped');
            const flipSound = document.getElementById('flipSound');
            if (flipSound) {
                flipSound.currentTime = 0;
                flipSound.play().catch(e => console.log('Audio playback failed:', e));
            }
        }

        function setVocabPage(level) {
            document.querySelectorAll('.vocab-page').forEach(p => p.classList.remove('active'));
            const vocabPage = document.getElementById('vocab-page-' + level);
            if (vocabPage) {
                vocabPage.classList.add('active');
            }
        }

        // ========== POPUPS ==========
        function showPopup(word, definition) {
            document.getElementById('vocabPopupWord').textContent = word.charAt(0).toUpperCase() + word.slice(1);
            document.getElementById('vocabPopupDef').textContent = definition;
            document.getElementById('vocabPopup').style.display = 'flex';
        }

        function closePopup() {
            document.getElementById('vocabPopup').style.display = 'none';
        }

        function closeVocabPopup() {
            document.getElementById('popupOverlay').style.display = 'none';
        }

        // ========== VOCABULARY DATABASE FOR QUIZ ==========
        const vocabularyByLevel = {
            B1: [
                { term: "Fear", definition: "A strong feeling of being scared or worried about danger", sentences: ["___ is a powerful emotion that can control people's behavior.", "The government used ___ to keep citizens obedient.", "Living in constant ___ is not healthy for society."] },
                { term: "Control", definition: "To have power over something or someone", sentences: ["Governments try to ___ their citizens through laws.", "Fear allows rulers to ___ people easily.", "Some leaders believe they must ___ every aspect of society."] },
                { term: "Punish", definition: "To hurt or make someone suffer because they did something bad", sentences: ["Draco's laws would ___ even small crimes with death.", "Society must ___ those who break rules.", "Leaders often ___ citizens to maintain order."] },
                { term: "Ancient", definition: "Very old; from a long time ago", sentences: ["___ Athens had very strict laws.", "Many ___ civilizations used fear to control people.", "These ___ methods are still studied today."] },
                { term: "Strict", definition: "Demanding that rules are obeyed; not allowing freedom", sentences: ["Draco was known for his ___ laws.", "A ___ government doesn't allow much freedom.", "Parents can be too ___ with their children."] },
                { term: "Empire", definition: "A group of countries ruled by one leader or government", sentences: ["The Mongol ___ was the largest in history.", "Genghis Khan built a powerful ___.", "Every ___ eventually falls."] },
                { term: "Crime", definition: "An action that breaks the law", sentences: ["Under Draco's laws, any ___ could mean death.", "Fear of punishment reduces ___.", "Some people commit ___ when desperate."] },
                { term: "Trade", definition: "Buying and selling things between people or countries", sentences: ["The Mongol Empire enabled safe ___ across Asia.", "___ increased during the Pax Mongolica.", "International ___ requires peace and stability."] },
                { term: "Society", definition: "All the people living together in a country or area", sentences: ["Fear affects how ___ functions.", "A healthy ___ needs more than just fear.", "Every ___ has rules to follow."] },
                { term: "Government", definition: "The group of people who control a country", sentences: ["The ___ creates laws for citizens.", "A strong ___ can maintain peace.", "People often fear their ___."] },
                { term: "Cruel", definition: "Causing pain or suffering to others", sentences: ["Draco's punishments were considered ___.", "Some rulers are ___ to their people.", "___ treatment creates fear in society."] },
                { term: "Shame", definition: "A bad feeling when others think you did something wrong", sentences: ["___ cultures focus on what others think of you.", "Public ___ can be a powerful control mechanism.", "In some societies, ___ is worse than guilt."] },
                { term: "Guilt", definition: "A feeling that you have done something wrong", sentences: ["___ comes from inside yourself.", "Western cultures often rely on ___.", "___ makes people follow rules even alone."] }
            ],
            B2: [
                { term: "Stability", definition: "A situation where things stay the same and do not change suddenly", sentences: ["Fear can create ___ in society.", "The empire brought ___ to the region.", "Political ___ is important for trade."] },
                { term: "Terror", definition: "Extreme fear caused by violence or threats", sentences: ["Genghis Khan used ___ as a weapon.", "The threat of ___ kept enemies away.", "___ can be an effective but cruel tool."] },
                { term: "Dignity", definition: "The quality of being worthy of respect", sentences: ["Everyone deserves to live with ___.", "Fear-based control destroys human ___.", "Shame attacks a person's ___."] },
                { term: "Chaotic", definition: "Completely disordered and confused", sentences: ["Athens was ___ before Draco's laws.", "Without rules, society becomes ___.", "The ___ situation required strict measures."] },
                { term: "Harsh", definition: "Severe, cruel, or strict", sentences: ["Draco's laws were extremely ___.", "___ punishments create fear.", "Some believe ___ measures are necessary."] },
                { term: "Centralize", definition: "To bring under the control of one central authority", sentences: ["Empires need to ___ power to survive.", "Genghis Khan worked to ___ his rule.", "It's difficult to ___ a large territory."] },
                { term: "Pax Mongolica", definition: "A period of peace and stability across the Mongol Empire", sentences: ["The ___ allowed trade to flourish.", "During the ___, merchants traveled safely.", "The ___ lasted for about 200 years."] },
                { term: "Excluded", definition: "Kept out or prevented from joining a group", sentences: ["People who break norms are ___ from society.", "Being ___ is painful in shame cultures.", "Those who were ___ often faced hardship."] },
                { term: "Conscience", definition: "An inner sense of what is right or wrong", sentences: ["Your ___ tells you when something is wrong.", "Guilt comes from your ___.", "A person without ___ is dangerous."] },
                { term: "Compass", definition: "Something that helps you know what is right and what is wrong", sentences: ["Your moral ___ guides your decisions.", "Guilt acts as an internal ___.", "Without a moral ___, people can lose their way."] },
                { term: "Internalize", definition: "To make attitudes or behavior part of your nature", sentences: ["We ___ rules from childhood.", "Guilt-based societies ___ moral values.", "It takes time to ___ new behaviors."] },
                { term: "Surveillance", definition: "Close observation, especially of a suspected person", sentences: ["Modern ___ technology increases control.", "Constant ___ makes people feel watched.", "Guilt works without external ___."] }
            ],
            C1: [
                { term: "Primordial", definition: "Existing from the beginning of time; ancient and fundamental", sentences: ["Fear is a ___ human emotion.", "These ___ instincts still affect us.", "The ___ drive for survival shapes society."] },
                { term: "Neurobiology", definition: "The biology of the nervous system and brain", sentences: ["___ explains how fear affects the brain.", "Studies in ___ reveal our emotional responses.", "Understanding ___ helps explain human behavior."] },
                { term: "Transcending", definition: "Going beyond the limits of something", sentences: ["Fear is capable of ___ rational thought.", "Some emotions are ___ cultural boundaries.", "The Mongol Empire succeeded in ___ traditional limits."] },
                { term: "Codification", definition: "The process of organizing laws into a systematic written code", sentences: ["Draco's ___ of laws was revolutionary.", "The ___ of rules creates consistency.", "Legal ___ is essential for civilization."] },
                { term: "Jurisprudence", definition: "The theory and philosophy of law", sentences: ["Western ___ was influenced by Draco.", "Studying ___ helps understand legal systems.", "Different cultures have different approaches to ___."] },
                { term: "Draconian", definition: "Extremely harsh and severe (from Draco, the Athenian lawmaker)", sentences: ["The new policies were called ___.", "___ measures are often criticized.", "His ___ approach created fear but also order."] },
                { term: "Vendetta", definition: "A prolonged bitter quarrel with violent revenge", sentences: ["Before formal laws, ___ cycles were common.", "A ___ can destroy families and communities.", "Legal systems help end ___ violence."] },
                { term: "Annihilation", definition: "Complete destruction", sentences: ["Cities faced ___ if they resisted.", "The threat of ___ ensured compliance.", "Total ___ was Genghis Khan's warning to enemies."] },
                { term: "Impunity", definition: "Freedom from punishment or negative consequences", sentences: ["Rulers often act with ___.", "No one should have complete ___.", "Power without limits leads to ___."] },
                { term: "Anthropological", definition: "Relating to the study of human societies and cultures", sentences: ["___ research reveals patterns in societies.", "From an ___ perspective, shame varies by culture.", "___ evidence supports this theory."] },
                { term: "Ostracism", definition: "Exclusion from a society or group", sentences: ["___ is a powerful punishment in shame cultures.", "Fear of ___ keeps people in line.", "Social ___ can be devastating."] },
                { term: "Autonomy", definition: "The right or condition of self-government; independence", sentences: ["Guilt allows for personal ___.", "Individual ___ is valued in Western cultures.", "___ requires internal moral guidance."] },
                { term: "Circumscribed", definition: "Restricted or limited", sentences: ["Behavior is ___ by social expectations.", "Freedom is ___ by law.", "Our choices are ___ by culture."] },
                { term: "Transgression", definition: "An act that goes against a law, rule, or code of conduct", sentences: ["Every ___ was severely punished.", "Guilt follows a moral ___.", "Society must address each ___."] },
                { term: "Indoctrination", definition: "The process of teaching a person or group to accept a set of beliefs uncritically", sentences: ["___ starts in childhood.", "Religious ___ instills guilt.", "Effective ___ shapes behavior for life."] },
                { term: "Visceral", definition: "Relating to deep feelings rather than to careful thought", sentences: ["Fear produces a ___ response.", "The ___ reaction to danger is immediate.", "Shame can feel ___ and overwhelming."] }
            ]
        };

        // Quiz System Variables
        let currentQuizQuestion = 1;
        let totalQuizQuestions = 10;
        let quizQuestions = [];
        let userQuizAnswers = {};
        let quizScore = 0;

        function initializeVocabQuiz() {
            currentQuizQuestion = 1;
            userQuizAnswers = {};
            quizScore = 0;
            quizQuestions = [];

            // Get vocabulary for current level
            const levelVocab = vocabularyByLevel[currentDifficulty] || vocabularyByLevel.B2;
            const shuffledVocab = [...levelVocab].sort(() => Math.random() - 0.5);

            for (let i = 0; i < Math.min(totalQuizQuestions, shuffledVocab.length); i++) {
                const vocabItem = shuffledVocab[i];
                const sentence = vocabItem.sentences[Math.floor(Math.random() * vocabItem.sentences.length)];
                const hint = vocabItem.term.toLowerCase().substring(0, 2) + '...';

                quizQuestions.push({
                    type: 'fill-blank',
                    question: `Complete the sentence: "${sentence}"`,
                    correctAnswer: vocabItem.term.toLowerCase(),
                    hint: hint,
                    correctTerm: vocabItem.term
                });
            }

            generateQuizHTML();
            showQuizQuestion(1);
            updateQuizProgress();
        }

        function generateQuizHTML() {
            const container = document.getElementById('quiz-questions-container');
            container.innerHTML = '';

            quizQuestions.forEach((q, index) => {
                const questionNum = index + 1;
                const questionDiv = document.createElement('div');
                questionDiv.className = 'quiz-page';
                questionDiv.id = `quiz-question-${questionNum}`;
                if (questionNum === 1) questionDiv.classList.add('active');

                questionDiv.innerHTML = `
                    <div class="quiz-question">
                        <h3>${q.question}</h3>
                        <input type="text" class="quiz-input" id="quiz-answer-${questionNum}" placeholder="${q.hint}" onkeypress="handleQuizKeyPress(event, ${questionNum})">
                        <button class="check-button" onclick="checkQuizAnswer(${questionNum})">Check Answer</button>
                        <div class="feedback" id="quiz-feedback-${questionNum}" style="display: none;"></div>
                    </div>
                `;

                container.appendChild(questionDiv);
            });
        }

        function handleQuizKeyPress(event, questionNum) {
            if (event.key === 'Enter') {
                event.preventDefault();
                const checkButton = document.querySelector(`#quiz-question-${questionNum} .check-button`);
                if (!checkButton.disabled) {
                    checkQuizAnswer(questionNum);
                }
            }
        }

        function checkQuizAnswer(questionNum) {
            const question = quizQuestions[questionNum - 1];
            const feedback = document.getElementById(`quiz-feedback-${questionNum}`);
            const checkButton = document.querySelector(`#quiz-question-${questionNum} .check-button`);
            const userInput = document.getElementById(`quiz-answer-${questionNum}`);
            const userAnswer = userInput.value.trim().toLowerCase();

            if (!userAnswer) {
                alert('Please enter an answer first!');
                return;
            }

            const isCorrect = userAnswer === question.correctAnswer;

            // Play sound effect
            if (isCorrect) {
                document.getElementById('correctSound').play();
            } else {
                document.getElementById('incorrectSound').play();
            }

            userInput.classList.add(isCorrect ? 'correct' : 'incorrect');

            feedback.style.display = 'block';
            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'}`;
            feedback.textContent = isCorrect ? 'Correct! Well done!' :
                `Incorrect. The correct answer is: ${question.correctTerm}`;

            if (isCorrect && !userQuizAnswers[questionNum]) {
                quizScore++;
            }
            userQuizAnswers[questionNum] = isCorrect;

            checkButton.disabled = true;

            updateQuizProgress();

            setTimeout(() => {
                if (currentQuizQuestion < totalQuizQuestions) {
                    nextQuizQuestion();
                } else {
                    showQuizResults();
                }
            }, 2000);
        }

        function showQuizQuestion(questionNum) {
            const questions = document.querySelectorAll('#quiz-questions-container .quiz-page');
            questions.forEach(q => q.classList.remove('active'));

            const currentQ = document.getElementById(`quiz-question-${questionNum}`);
            if (currentQ) {
                currentQ.classList.add('active');
                const inputField = document.getElementById(`quiz-answer-${questionNum}`);
                if (inputField && !inputField.disabled) {
                    setTimeout(() => inputField.focus(), 100);
                }
            }

            currentQuizQuestion = questionNum;
            updateQuizProgress();
            updateQuizNavButtons();
        }

        function nextQuizQuestion() {
            if (currentQuizQuestion < totalQuizQuestions) {
                showQuizQuestion(currentQuizQuestion + 1);
            }
        }

        function previousQuizQuestion() {
            if (currentQuizQuestion > 1) {
                showQuizQuestion(currentQuizQuestion - 1);
            }
        }

        function updateQuizProgress() {
            const counter = document.getElementById('quiz-counter');
            const progressBar = document.getElementById('quizProgressFill');

            if (counter) {
                counter.textContent = `Question ${currentQuizQuestion} of ${totalQuizQuestions}`;
            }

            if (progressBar) {
                const answeredCount = Object.keys(userQuizAnswers).length;
                const progressPercent = (answeredCount / totalQuizQuestions) * 100;
                progressBar.style.width = progressPercent + '%';
            }
        }

        function updateQuizNavButtons() {
            const prevBtn = document.getElementById('prevQuizBtn');
            const nextBtn = document.getElementById('nextQuizBtn');

            if (prevBtn) prevBtn.disabled = (currentQuizQuestion === 1);
            if (nextBtn) nextBtn.disabled = (currentQuizQuestion === totalQuizQuestions);
        }

        function showQuizResults() {
            document.getElementById('quiz-questions-container').style.display = 'none';
            document.getElementById('quiz-header').style.display = 'none';
            document.getElementById('quiz-results-page').style.display = 'block';
            document.getElementById('finalQuizScore').textContent = `${quizScore}/${totalQuizQuestions}`;
        }

        function restartVocabQuiz() {
            document.getElementById('quiz-results-page').style.display = 'none';
            document.getElementById('quiz-questions-container').style.display = 'block';
            document.getElementById('quiz-header').style.display = 'flex';
            initializeVocabQuiz();
        }

        // ========== TOUCH SWIPE FOR MOBILE ==========
        let touchStartX = 0;
        let touchStartY = 0;
        let touchEndX = 0;
        let touchEndY = 0;
        const minSwipeDistance = 50;
        const maxVerticalDistance = 100;

        function initTouchSwipe() {
            const slideshowContainer = document.querySelector('.slideshow-container');
            if (!slideshowContainer) return;

            slideshowContainer.addEventListener('touchstart', handleTouchStart, { passive: true });
            slideshowContainer.addEventListener('touchend', handleTouchEnd, { passive: true });
        }

        function handleTouchStart(e) {
            touchStartX = e.changedTouches[0].screenX;
            touchStartY = e.changedTouches[0].screenY;
        }

        function handleTouchEnd(e) {
            touchEndX = e.changedTouches[0].screenX;
            touchEndY = e.changedTouches[0].screenY;
            handleSwipeGesture();
        }

        function handleSwipeGesture() {
            const deltaX = touchEndX - touchStartX;
            const deltaY = Math.abs(touchEndY - touchStartY);

            // Only register horizontal swipes (not vertical scrolling)
            if (Math.abs(deltaX) > minSwipeDistance && deltaY < maxVerticalDistance) {
                if (deltaX > 0) {
                    // Swipe right - go to previous slide
                    changeSlide(-1);
                } else {
                    // Swipe left - go to next slide
                    changeSlide(1);
                }
            }
        }

        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            initializeVocabQuiz();

            // Set default difficulty content (hidden until game starts)
            setDifficultyContent('B2');

            // Set default vocab page
            setVocabPage('B2');

            // Initialize touch swipe for mobile
            initTouchSwipe();
        });
    </script>
</body>
</html>
