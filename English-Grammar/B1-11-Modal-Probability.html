<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B1-51: Modal Verbs of Probability - might, may, must, can't</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            flex-direction: column;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .header .website {
            text-align: center;
            margin-top: 8px;
        }

        .header .website a {
            color: #4c51bf;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .header .website a:hover {
            color: #553c9a;
        }

        .header-image {
            width: 120px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .container {
            display: flex;
            height: calc(100vh - 120px);
        }

        .navigation {
            width: 280px;
            background: rgba(45, 55, 72, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item {
            padding: 16px 24px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 500;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .section {
            display: none;
            flex: 1;
            padding: 0;
            overflow: hidden;
            height: 100%;
            background: white;
        }

        .section.active {
            display: flex;
            flex-direction: column;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 30px 80px;
        }

        .slide-content-wrapper {
            position: relative;
            width: 100%;
            max-width: 1400px;
            height: 85%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 20px;
            padding: 25px 35px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #8B7EC8;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .slide-arrow:hover {
            background: #7366B0;
            transform: translateY(-50%) scale(1.1);
        }

        .slide-arrow.prev {
            left: -70px;
        }

        .slide-arrow.next {
            right: -70px;
        }

        .slide-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #D1D5DB;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: #667eea;
            transform: scale(1.3);
        }

        .indicator-dot:hover {
            background: #9CA3AF;
        }

        .slide h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: -0.5px;
        }

        .explanation-box {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 0;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .explanation-box h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .explanation-box p {
            color: #2d3748;
            line-height: 1.5;
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .rule-box {
            background: #e3f2fd;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }

        .rule-box h4 {
            color: #667eea;
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .rule-box p {
            font-size: 1rem;
            color: #2d3748;
            margin: 5px 0;
        }

        .yes-no {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #4299e1;
            color: white;
        }

        .auxiliary {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #48bb78;
            color: white;
        }

        .subject {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #9f7aea;
            color: white;
        }

        .verb {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #ed64a6;
            color: white;
        }

        .example-box {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
        }

        .example-box p {
            margin: 5px 0;
            font-size: 1rem;
            color: #2d3748;
        }

        .note-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .note-box strong {
            color: #856404;
            font-size: 1rem;
        }

        .note-box p {
            color: #856404;
            margin-top: 5px;
            line-height: 1.4;
            font-size: 0.95rem;
        }

        .exercise-container {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 10px;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .exercise-container h3 {
            color: #764ba2;
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-box {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 12px;
            margin: 0;
        }

        .question-box p {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 18px;
            margin: 8px 0;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            font-size: 1.05rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 15px 5px 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .feedback {
            padding: 15px 20px;
            border-radius: 12px;
            margin: 15px 0;
            font-weight: 500;
            font-size: 1.05rem;
            display: none;
        }

        .feedback.correct {
            background: rgba(72, 187, 120, 0.1);
            color: #2f855a;
            border: 1px solid rgba(72, 187, 120, 0.3);
            display: block;
        }

        .feedback.incorrect {
            background: rgba(245, 101, 101, 0.1);
            color: #c53030;
            border: 1px solid rgba(245, 101, 101, 0.3);
            display: block;
        }

        ul {
            margin-left: 25px;
            line-height: 1.6;
        }

        li {
            margin: 6px 0;
            font-size: 1.05rem;
            color: #2d3748;
        }

        li strong {
            color: #667eea;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 10px;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 10px;
            border: 1px solid #e2e8f0;
            font-size: 1rem;
            text-align: center;
        }

        .comparison-table tr:nth-child(even) {
            background: #f7fafc;
        }

        .explanation-box::-webkit-scrollbar {
            width: 8px;
        }

        .explanation-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }

        .formula-box {
            background: #e6fffa;
            border: 2px solid #319795;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.3rem;
        }

        .grid-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .grid-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .grid-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .reading-text {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.9;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
        }

        .reading-text p {
            margin: 12px 0;
        }

        .highlight-question {
            background: #bee3f8;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .highlight-answer {
            background: #c6f6d5;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .example-sentence {
            font-size: 1.1rem;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .certainty-scale {
            background: linear-gradient(to right, #f56565, #ed8936, #ecc94b, #48bb78, #38a169);
            height: 40px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 0 20px;
            font-weight: 600;
            color: white;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>B1-51: Modal Verbs of Probability - might, may, must, can't</h1>
            <div class="website">
                <a href="https://www.mimlanguageservices.com/" target="_blank">mimlanguageservices</a>
            </div>
        </div>
        <a href="https://www.mimlanguageservices.com/" target="_blank">
            <img src="https://static.wixstatic.com/media/593d03_8958d96b0f6d4d1ea9dffa7f89bffe8b~mv2.png" alt="ESL Logo" class="header-image">
        </a>
    </div>

    <div class="container">
        <div class="navigation">
            <div class="nav-item active" onclick="showSection('explanation', this)">Explanation</div>
            <div class="nav-item" onclick="showSection('examples', this)">Examples</div>
            <div class="nav-item" onclick="showSection('reading', this)">Reading</div>
            <div class="nav-item" onclick="showSection('media', this)">Media</div>
            <div class="nav-item" onclick="showSection('practice', this)">Practice</div>
            <div class="nav-item" onclick="showSection('writing', this)">Writing</div>
        </div>

        <div class="content">
            <!-- Explanation Section -->
            <div class="section active" id="explanation">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="explanation">
                            <h2>Welcome to Modal Verbs of Probability!</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.2rem; text-align: center; margin: 20px 0;">
                                    Today we will learn <span class="yes-no">MODAL VERBS OF PROBABILITY</span> in English!
                                </p>
                                <p style="font-size: 1.1rem; text-align: center;">
                                    We use these modals to express how certain or uncertain we are about something.
                                </p>
                                <div class="formula-box">
                                    <span class="auxiliary">MUST</span> / <span class="auxiliary">CAN'T</span> / <span class="auxiliary">MIGHT</span> / <span class="auxiliary">MAY</span> / <span class="auxiliary">COULD</span> + <span class="verb">BASE VERB</span>
                                </div>
                                <p style="text-align: center; font-size: 1.1rem;">
                                    Example: She <strong>must be</strong> tired. / He <strong>can't be</strong> at home. / They <strong>might know</strong> the answer.
                                </p>
                                <div class="note-box">
                                    <strong>Important:</strong>
                                    <p>These modals express PROBABILITY, not ability or permission!</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Degrees of Certainty</h2>
                            <div class="explanation-box">
                                <h3>The Scale of Certainty</h3>

                                <div class="certainty-scale">
                                    <span>0%</span>
                                    <span>25%</span>
                                    <span>50%</span>
                                    <span>75%</span>
                                    <span>100%</span>
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Certainty Level</th>
                                        <th>Modal Verb</th>
                                        <th>Meaning</th>
                                        <th>Example</th>
                                    </tr>
                                    <tr>
                                        <td>100% - Impossible</td>
                                        <td><strong>can't / couldn't</strong></td>
                                        <td>I'm certain this is NOT true</td>
                                        <td>He can't be 80 years old!</td>
                                    </tr>
                                    <tr>
                                        <td>30-50% - Possible</td>
                                        <td><strong>might / may / could</strong></td>
                                        <td>It's possible, I'm not sure</td>
                                        <td>She might be at work.</td>
                                    </tr>
                                    <tr>
                                        <td>90-95% - Almost certain</td>
                                        <td><strong>must</strong></td>
                                        <td>I'm very sure this is true</td>
                                        <td>He must be tired.</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Remember:</h4>
                                    <p>• <strong>MUST</strong> = I'm almost certain (90-95% sure)</p>
                                    <p>• <strong>CAN'T</strong> = I'm certain it's impossible</p>
                                    <p>• <strong>MIGHT/MAY/COULD</strong> = It's possible, maybe 50%</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Using MUST for Deductions</h2>
                            <div class="explanation-box">
                                <h3>MUST = I'm almost certain this is true (logical deduction)</h3>

                                <div class="formula-box">
                                    <span class="subject">Subject</span> + <span class="auxiliary">MUST</span> + <span class="verb">base verb</span>
                                </div>

                                <div class="example-box">
                                    <p><strong>Present:</strong></p>
                                    <p>• She's yawning. She <strong>must be</strong> tired.</p>
                                    <p>• The lights are on. Someone <strong>must be</strong> home.</p>
                                    <p>• He drives a Ferrari. He <strong>must have</strong> a lot of money.</p>
                                    <p>• They're laughing. The movie <strong>must be</strong> funny.</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>Past: MUST + HAVE + PAST PARTICIPLE</strong></p>
                                    <p>• She looks exhausted. She <strong>must have worked</strong> all night.</p>
                                    <p>• The door is open. Someone <strong>must have forgotten</strong> to lock it.</p>
                                    <p>• He knows everything. He <strong>must have studied</strong> a lot.</p>
                                </div>

                                <div class="rule-box">
                                    <h4>When to use MUST:</h4>
                                    <p>Use MUST when you see evidence and make a logical conclusion.</p>
                                    <p>You're 90-95% certain based on what you observe or know.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Using CAN'T for Impossibility</h2>
                            <div class="explanation-box">
                                <h3>CAN'T = I'm certain this is NOT true / impossible</h3>

                                <div class="formula-box">
                                    <span class="subject">Subject</span> + <span class="auxiliary">CAN'T</span> + <span class="verb">base verb</span>
                                </div>

                                <div class="example-box">
                                    <p><strong>Present:</strong></p>
                                    <p>• She <strong>can't be</strong> 80 years old! She looks so young.</p>
                                    <p>• He <strong>can't be</strong> the manager. He's only 20.</p>
                                    <p>• That <strong>can't be</strong> your car. You don't have a license!</p>
                                    <p>• They <strong>can't know</strong> about the party. It's a surprise!</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>Past: CAN'T + HAVE + PAST PARTICIPLE</strong></p>
                                    <p>• She <strong>can't have finished</strong> already. It's only been 5 minutes!</p>
                                    <p>• He <strong>can't have seen</strong> me. I was hiding.</p>
                                    <p>• They <strong>can't have left</strong>. Their car is still here.</p>
                                </div>

                                <div class="rule-box">
                                    <h4>When to use CAN'T:</h4>
                                    <p>Use CAN'T when something is logically impossible.</p>
                                    <p>You're certain it's NOT true based on evidence or logic.</p>
                                </div>

                                <div class="note-box">
                                    <strong>Note:</strong>
                                    <p>COULDN'T is also possible but CAN'T is more common for present impossibility.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Using MIGHT / MAY / COULD for Possibility</h2>
                            <div class="explanation-box">
                                <h3>MIGHT / MAY / COULD = It's possible, maybe (about 50% certain)</h3>

                                <div class="formula-box">
                                    <span class="subject">Subject</span> + <span class="auxiliary">MIGHT/MAY/COULD</span> + <span class="verb">base verb</span>
                                </div>

                                <div class="example-box">
                                    <p><strong>Present:</strong></p>
                                    <p>• She <strong>might be</strong> at work. (I'm not sure)</p>
                                    <p>• He <strong>may know</strong> the answer. (It's possible)</p>
                                    <p>• They <strong>could be</strong> in the library. (Maybe)</p>
                                    <p>• It <strong>might rain</strong> later. (Possibly)</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>Past: MIGHT/MAY/COULD + HAVE + PAST PARTICIPLE</strong></p>
                                    <p>• She <strong>might have left</strong> early. (I'm not sure)</p>
                                    <p>• He <strong>may have forgotten</strong> about the meeting. (Possibly)</p>
                                    <p>• They <strong>could have taken</strong> the bus. (Maybe)</p>
                                </div>

                                <div class="rule-box">
                                    <h4>MIGHT vs MAY vs COULD:</h4>
                                    <p>• All three mean the same thing: "possibly" or "maybe"</p>
                                    <p>• MIGHT and MAY are more common</p>
                                    <p>• COULD is slightly more uncertain</p>
                                    <p>• Use these when you're not certain and you're guessing</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Common Mistakes</h2>
                            <div class="explanation-box">
                                <h3>Mistake 1: Using "to" after modal verbs</h3>
                                <div class="example-box">
                                    <p>❌ She must <del>to be</del> tired. → ✅ She <strong>must be</strong> tired.</p>
                                    <p>❌ He can't <del>to know</del> that. → ✅ He <strong>can't know</strong> that.</p>
                                    <p>❌ They might <del>to come</del> later. → ✅ They <strong>might come</strong> later.</p>
                                </div>

                                <h3>Mistake 2: Using wrong form with "have"</h3>
                                <div class="example-box">
                                    <p>❌ She must <del>has left</del>. → ✅ She <strong>must have left</strong>.</p>
                                    <p>❌ He can't <del>has done</del> it. → ✅ He <strong>can't have done</strong> it.</p>
                                    <p>❌ They might <del>has seen</del> us. → ✅ They <strong>might have seen</strong> us.</p>
                                </div>

                                <h3>Mistake 3: Confusing probability with obligation</h3>
                                <div class="example-box">
                                    <p>❌ You must come to the party. (obligation, not probability)</p>
                                    <p>✅ She must be at the party. (probability - I'm almost certain)</p>
                                    <p>✅ You have to come to the party. (obligation - better choice)</p>
                                </div>

                                <h3>Mistake 4: Using "must" for negative deduction</h3>
                                <div class="example-box">
                                    <p>❌ She <del>mustn't be</del> home. → ✅ She <strong>can't be</strong> home.</p>
                                    <p>Note: MUSTN'T = prohibition (you are not allowed), CAN'T = impossibility</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="explanation-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="section" id="examples">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="examples">
                            <h2>Present Probability Examples</h2>
                            <div class="explanation-box">
                                <h3>Making deductions about the present:</h3>
                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>MUST (90-95% certain):</strong><br><br>
                                        • The lights are off. They <strong>must be</strong> sleeping.<br>
                                        • She's wearing a coat. It <strong>must be</strong> cold outside.<br>
                                        • He has a key. He <strong>must live</strong> here.<br>
                                        • They're smiling. They <strong>must be</strong> happy.
                                    </div>
                                    <div class="grid-card">
                                        <strong>CAN'T (impossible):</strong><br><br>
                                        • That <strong>can't be</strong> Maria. She's in Spain!<br>
                                        • He <strong>can't be</strong> hungry. He just ate!<br>
                                        • It <strong>can't be</strong> 10pm already!<br>
                                        • She <strong>can't speak</strong> Chinese. She's never studied it.
                                    </div>
                                </div>

                                <h3>MIGHT / MAY / COULD (possible, 50%):</h3>
                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Possibility:</strong><br><br>
                                        • She <strong>might be</strong> in a meeting.<br>
                                        • He <strong>may know</strong> the answer.<br>
                                        • They <strong>could be</strong> stuck in traffic.<br>
                                        • It <strong>might snow</strong> tomorrow.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Uncertain guesses:</strong><br><br>
                                        • She <strong>might not come</strong> to the party.<br>
                                        • He <strong>may not remember</strong> me.<br>
                                        • They <strong>might live</strong> near here.<br>
                                        • It <strong>could be</strong> true, but I'm not sure.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Past Probability Examples</h2>
                            <div class="explanation-box">
                                <h3>Making deductions about the past:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Modal + have + past participle</th>
                                        <th>Meaning</th>
                                    </tr>
                                    <tr>
                                        <td>She <strong>must have forgotten</strong> about the meeting.</td>
                                        <td>I'm almost certain she forgot</td>
                                    </tr>
                                    <tr>
                                        <td>He <strong>can't have finished</strong> already!</td>
                                        <td>It's impossible he finished</td>
                                    </tr>
                                    <tr>
                                        <td>They <strong>might have left</strong> early.</td>
                                        <td>Maybe they left early (50% sure)</td>
                                    </tr>
                                    <tr>
                                        <td>You <strong>may have seen</strong> her yesterday.</td>
                                        <td>It's possible you saw her</td>
                                    </tr>
                                    <tr>
                                        <td>I <strong>could have lost</strong> my keys at home.</td>
                                        <td>Maybe I lost them there</td>
                                    </tr>
                                </table>

                                <h3>More Past Examples:</h3>
                                <div class="example-box">
                                    <p><strong>MUST HAVE (almost certain about past):</strong></p>
                                    <p>• The ground is wet. It <strong>must have rained</strong> last night.</p>
                                    <p>• She's not answering. She <strong>must have gone</strong> to bed.</p>
                                    <p>• He looks happy. He <strong>must have passed</strong> the exam.</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>CAN'T HAVE (impossible in the past):</strong></p>
                                    <p>• He <strong>can't have walked</strong> here. It's too far!</p>
                                    <p>• She <strong>can't have eaten</strong> all that food!</p>
                                    <p>• They <strong>can't have arrived</strong> yet. The train is delayed.</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>MIGHT/MAY/COULD HAVE (possible in past):</strong></p>
                                    <p>• I <strong>might have left</strong> my phone at the restaurant.</p>
                                    <p>• She <strong>may have missed</strong> the bus.</p>
                                    <p>• They <strong>could have taken</strong> a different route.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Real-Life Situations</h2>
                            <div class="explanation-box">
                                <h3>Practical examples in context:</h3>

                                <div class="example-box">
                                    <p><strong>Situation 1: Your friend isn't answering the phone</strong></p>
                                    <p>• She <strong>might be</strong> in the shower. (possible)</p>
                                    <p>• She <strong>must be</strong> busy. (almost certain - she always answers)</p>
                                    <p>• She <strong>can't be</strong> sleeping. It's only 8pm! (impossible)</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>Situation 2: You see someone who looks like your teacher</strong></p>
                                    <p>• That <strong>might be</strong> Mr. Smith. (not sure)</p>
                                    <p>• It <strong>must be</strong> him! He's wearing the same jacket. (almost certain)</p>
                                    <p>• It <strong>can't be</strong> him. He's on vacation in Italy! (impossible)</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>Situation 3: Your colleague looks very tired</strong></p>
                                    <p>• She <strong>must have worked</strong> late last night. (logical deduction)</p>
                                    <p>• She <strong>might have had</strong> trouble sleeping. (possible)</p>
                                    <p>• She <strong>can't have slept</strong> well. (certain she didn't)</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>Situation 4: The door is open when you come home</strong></p>
                                    <p>• Someone <strong>must have forgotten</strong> to close it. (logical)</p>
                                    <p>• A thief <strong>might have broken</strong> in! (possible but scary)</p>
                                    <p>• The wind <strong>could have blown</strong> it open. (possible)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="examples-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                    </div>
                </div>
            </div>

            <!-- Reading Section -->
            <div class="section" id="reading">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="reading">
                            <h2>Reading: The Mystery at the Office</h2>
                            <div class="explanation-box">
                                <div class="reading-text">
                                    <p><strong>The Mystery at the Office</strong></p>

                                    <p>When I arrived at work this morning, something was strange. The lights were on, but nobody was there yet. Someone <span class="highlight-question">must have arrived</span> early, but who? The coffee machine was warm, so they <span class="highlight-question">must have made</span> coffee just a few minutes ago.</p>

                                    <p>I checked my colleague Sarah's desk. Her computer was on and her bag was there. She <span class="highlight-question">must be</span> in the building somewhere. She <span class="highlight-question">can't be</span> far away because her phone is on the desk too.</p>

                                    <p>Then I heard voices from the conference room. It <span class="highlight-question">might be</span> Sarah, or it <span class="highlight-question">could be</span> the manager. I walked closer and saw through the window - it was both of them! They were having a meeting.</p>

                                    <p>They looked serious. They <span class="highlight-question">might be</span> discussing the new project, or it <span class="highlight-question">could be</span> something about the company budget. Sarah looked happy, so it <span class="highlight-question">can't be</span> bad news. Actually, she was smiling! She <span class="highlight-question">must have gotten</span> a promotion!</p>

                                    <p>When they finished, Sarah came out looking excited. I was right! She told me she got promoted to team leader. The manager <span class="highlight-question">must have decided</span> last night because Sarah said she only found out this morning. She <span class="highlight-question">must have been</span> so surprised when she got the call!</p>

                                    <p>We're having a celebration lunch later. The whole team is coming. It <span class="highlight-question">might be</span> at that Italian restaurant we love, or we <span class="highlight-question">may go</span> to the new sushi place. Sarah hasn't decided yet, but wherever we go, it <span class="highlight-question">must be</span> somewhere nice because this is a big occasion!</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="reading">
                            <h2>Reading Analysis</h2>
                            <div class="explanation-box">
                                <h3>MUST / MUST HAVE (90-95% certain):</h3>
                                <div class="example-box">
                                    <p>• Someone <strong>must have arrived</strong> early (logical - lights are on)</p>
                                    <p>• They <strong>must have made</strong> coffee (evidence - machine is warm)</p>
                                    <p>• She <strong>must be</strong> in the building (her bag and phone are there)</p>
                                    <p>• She <strong>must have gotten</strong> a promotion (she's happy)</p>
                                    <p>• The manager <strong>must have decided</strong> last night (timeline)</p>
                                    <p>• It <strong>must be</strong> somewhere nice (important occasion)</p>
                                </div>

                                <h3>CAN'T / CAN'T BE (impossible, certain it's not true):</h3>
                                <div class="example-box">
                                    <p>• She <strong>can't be</strong> far away (evidence - phone is here)</p>
                                    <p>• It <strong>can't be</strong> bad news (she's smiling)</p>
                                </div>

                                <h3>MIGHT / MAY / COULD (possible, 50% certain):</h3>
                                <div class="example-box">
                                    <p>• It <strong>might be</strong> Sarah (not sure who it is)</p>
                                    <p>• It <strong>could be</strong> the manager (another possibility)</p>
                                    <p>• They <strong>might be</strong> discussing the new project (guessing)</p>
                                    <p>• It <strong>could be</strong> about the budget (another guess)</p>
                                    <p>• It <strong>might be</strong> at the Italian restaurant (possibility)</p>
                                    <p>• We <strong>may go</strong> to the sushi place (another option)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="reading-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="section" id="media">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="media">
                            <h2>Video: Modal Verbs of Probability</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Watch this video about Modal Verbs of Probability:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/V9gAHkWFKqk"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Learn how to use must, might, may, could, and can't for probability
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="media">
                            <h2>Video: Must, Might, May, Could, Can't</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">More examples and practice:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/cUnmoOd36hA"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Understanding degrees of certainty with modal verbs
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="media-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div class="section" id="practice">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="practice">
                            <h2>Practice 1: Choose the correct modal</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"She's yawning. She ___ be tired." (must / might / can't)</p>
                                    <input type="text" id="q1" placeholder="Type: must, might, or can't" onkeypress="if(event.key==='Enter') checkAnswer1()">
                                    <button class="check-button" onclick="checkAnswer1()">Check Answer</button>
                                    <div id="feedback1" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 2: Impossibility</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"He ___ be 90 years old! He looks so young!" (must / can't / might)</p>
                                    <input type="text" id="q2" placeholder="Type the correct modal" onkeypress="if(event.key==='Enter') checkAnswer2()">
                                    <button class="check-button" onclick="checkAnswer2()">Check Answer</button>
                                    <div id="feedback2" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 3: Possibility</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"She ___ be at home. I'm not sure." (must / can't / might)</p>
                                    <input type="text" id="q3" placeholder="Type: might, may, or could" onkeypress="if(event.key==='Enter') checkAnswer3()">
                                    <button class="check-button" onclick="checkAnswer3()">Check Answer</button>
                                    <div id="feedback3" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 4: Past deduction</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"The ground is wet. It ___ ___ rained." (must / have)</p>
                                    <input type="text" id="q4" placeholder="Type: must have" onkeypress="if(event.key==='Enter') checkAnswer4()">
                                    <button class="check-button" onclick="checkAnswer4()">Check Answer</button>
                                    <div id="feedback4" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 5: Past impossibility</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"She ___ ___ finished already! It's only been 5 minutes!" (can't / have)</p>
                                    <input type="text" id="q5" placeholder="Type: can't have or couldn't have" onkeypress="if(event.key==='Enter') checkAnswer5()">
                                    <button class="check-button" onclick="checkAnswer5()">Check Answer</button>
                                    <div id="feedback5" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 6: Fix the mistake</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Fix: "He must to be at work." → "___"</p>
                                    <input type="text" id="q6" placeholder="Type the correct sentence" onkeypress="if(event.key==='Enter') checkAnswer6()">
                                    <button class="check-button" onclick="checkAnswer6()">Check Answer</button>
                                    <div id="feedback6" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 7: Choose certainty level</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"The lights are on. Someone ___ be home." (almost certain - 90%)</p>
                                    <input type="text" id="q7" placeholder="Type: must" onkeypress="if(event.key==='Enter') checkAnswer7()">
                                    <button class="check-button" onclick="checkAnswer7()">Check Answer</button>
                                    <div id="feedback7" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 8: Complete the sentence</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"They ___ ___ left early." (possible in the past - might/have)</p>
                                    <input type="text" id="q8" placeholder="Type: might have, may have, or could have" onkeypress="if(event.key==='Enter') checkAnswer8()">
                                    <button class="check-button" onclick="checkAnswer8()">Check Answer</button>
                                    <div id="feedback8" class="feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="practice-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                        <span class="indicator-dot" onclick="goToSlide(7)"></span>
                        <span class="indicator-dot" onclick="goToSlide(8)"></span>
                    </div>
                </div>
            </div>

            <!-- Writing Section -->
            <div class="section" id="writing">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="writing" style="overflow-y: auto;">
                            <h2>Writing Practice</h2>
                            <div class="explanation-box">
                                <h3>Write 10 sentences using modal verbs of probability</h3>
                                <p style="margin-bottom: 15px;">Use must, can't, might, may, and could to make deductions and guesses.</p>
                                <div class="question-box">
                                    <textarea id="writing1" rows="8" style="width: 100%; padding: 12px; border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 8px; font-size: 1.05rem; font-family: 'Inter', sans-serif; resize: vertical;" spellcheck="true" placeholder="She must be tired. He can't be at home. They might come later. It may rain tomorrow..."></textarea>
                                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                                        <button class="check-button" onclick="checkGrammar()">Check Grammar</button>
                                        <button id="send-teacher-btn" class="check-button" onclick="sendToTeacher()" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); opacity: 0.5; cursor: not-allowed;" disabled>Send to Teacher</button>
                                    </div>
                                    <div id="grammar-feedback" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;"></div>
                                    <p style="font-size: 0.95rem; color: #666; margin-top: 10px;">Example: She must be tired. He can't be serious. They might arrive late. It may snow tonight. He could be at work.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="writing-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSlide = 1;
        let currentSection = 'explanation';

        function showSection(sectionName, element) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            document.getElementById(sectionName).classList.add('active');

            if (element) {
                element.classList.add('active');
            }

            currentSection = sectionName;
            currentSlide = 1;

            setTimeout(() => {
                const activeSection = document.querySelector('.section.active');
                const inputField = activeSection.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                }
            }, 100);
        }

        function changeSlide(direction) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            if (slides.length === 1) return;

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide += direction;

            if (currentSlide > slides.length) {
                currentSlide = 1;
            }
            if (currentSlide < 1) {
                currentSlide = slides.length;
            }

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');

            setTimeout(() => {
                const activeSlide = slides[currentSlide - 1];
                const inputField = activeSlide.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                    inputField.value = '';
                }
            }, 100);
        }

        function goToSlide(slideNum) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide = slideNum;

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                changeSlide(-1);
            } else if (e.key === 'ArrowRight') {
                changeSlide(1);
            }
        });

        function checkAnswer1() {
            const answer = document.getElementById('q1').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback1');

            if (answer === 'must') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "She must be tired" - Use MUST when you\'re almost certain (90-95%).';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ She\'s yawning - this is strong evidence. Use MUST: She must be tired.';
            }
        }

        function checkAnswer2() {
            const answer = document.getElementById('q2').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback2');

            if (answer === "can't" || answer === "cant" || answer === "cannot") {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "He can\'t be 90" - Use CAN\'T when something is impossible.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ This seems impossible. Use CAN\'T: He can\'t be 90 years old!';
            }
        }

        function checkAnswer3() {
            const answer = document.getElementById('q3').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback3');

            if (answer === 'might' || answer === 'may' || answer === 'could') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! Use MIGHT/MAY/COULD when you\'re not sure (about 50% certain).';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ You\'re not sure. Use MIGHT, MAY, or COULD: She might be at home.';
            }
        }

        function checkAnswer4() {
            const answer = document.getElementById('q4').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback4');

            if (answer === 'must have') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "It must have rained" - MUST HAVE for past deductions.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ For past deduction, use MUST + HAVE: It must have rained.';
            }
        }

        function checkAnswer5() {
            const answer = document.getElementById('q5').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback5');

            if (answer === "can't have" || answer === "cant have" || answer === "cannot have" || answer === "couldn't have" || answer === "couldnt have") {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "She can\'t have finished" - CAN\'T HAVE for past impossibility.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ This is impossible in the past. Use CAN\'T HAVE: She can\'t have finished.';
            }
        }

        function checkAnswer6() {
            const answer = document.getElementById('q6').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback6');

            if (answer === 'he must be at work' || answer === 'he must be at work.') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Great! Don\'t use "to" after modal verbs: He must be at work.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Remove "to" after modal verbs: He must be at work.';
            }
        }

        function checkAnswer7() {
            const answer = document.getElementById('q7').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback7');

            if (answer === 'must') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "Someone must be home" - MUST for high certainty (90%).';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ You\'re almost certain (90%). Use MUST: Someone must be home.';
            }
        }

        function checkAnswer8() {
            const answer = document.getElementById('q8').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback8');

            if (answer === 'might have' || answer === 'may have' || answer === 'could have') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! Use MIGHT/MAY/COULD + HAVE for past possibility.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ For past possibility, use MIGHT/MAY/COULD + HAVE: They might have left.';
            }
        }

        async function checkGrammar() {
            const text = document.getElementById('writing1').value;
            const feedbackDiv = document.getElementById('grammar-feedback');
            const textarea = document.getElementById('writing1');

            if (!text.trim()) {
                feedbackDiv.style.display = 'block';
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Please write some sentences first!';
                return;
            }

            textarea.style.display = 'none';
            window.grammarCheckResult = { original: text, corrected: '' };

            feedbackDiv.style.display = 'block';
            feedbackDiv.style.background = 'rgba(102, 126, 234, 0.1)';
            feedbackDiv.style.border = '1px solid rgba(102, 126, 234, 0.3)';
            feedbackDiv.style.color = '#667eea';
            feedbackDiv.innerHTML = '⏳ Checking your grammar and spelling...';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyBTH0NmDb3cqjrY6p7YROPIJel-iCxSxzs`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a strict grammar checker. Fix grammar and spelling errors. Do not change the meaning, style, or add punctuation unless absolutely necessary. Profanities are acceptable, but don't use shortened informal words like "cuz" or "wanna"\n\nText: "${text}"\n\nReturn only the corrected text with minimal changes.`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                const correctedText = data.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || text;

                if (correctedText !== text && correctedText.toLowerCase() !== text.toLowerCase()) {
                    const originalWords = text.split(/(\s+)/);
                    const correctedWords = correctedText.split(/(\s+)/);
                    let highlightedText = '';

                    originalWords.forEach((word, i) => {
                        if (word.match(/\s+/)) {
                            highlightedText += word;
                        } else if (correctedWords[i] && word.toLowerCase() !== correctedWords[i].toLowerCase()) {
                            highlightedText += `<span style="color: #e53e3e; font-weight: 600; background: rgba(245, 101, 101, 0.15); padding: 2px 4px; border-radius: 3px;">${word}</span>`;
                        } else {
                            highlightedText += word;
                        }
                    });

                    let html = `
                        <div style="margin-bottom: 20px;">
                            <strong style="color: #c53030;">Your Text (errors highlighted):</strong>
                            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(245, 101, 101, 0.3); line-height: 1.8;">
                                ${highlightedText}
                            </div>
                        </div>
                        <div>
                            <strong style="color: #2f855a;">Corrected Text:</strong>
                            <div style="background: rgba(72, 187, 120, 0.1); padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(72, 187, 120, 0.3); color: #2d3748; line-height: 1.8;">
                                ${correctedText}
                            </div>
                        </div>
                    `;

                    feedbackDiv.style.background = 'rgba(245, 101, 101, 0.05)';
                    feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                    feedbackDiv.style.color = '#2d3748';
                    feedbackDiv.innerHTML = html;

                    window.grammarCheckResult.corrected = correctedText;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                } else {
                    feedbackDiv.style.background = 'rgba(72, 187, 120, 0.1)';
                    feedbackDiv.style.border = '1px solid rgba(72, 187, 120, 0.3)';
                    feedbackDiv.style.color = '#2f855a';
                    feedbackDiv.innerHTML = '✓ Perfect! No grammar or spelling errors detected!';

                    window.grammarCheckResult.corrected = text;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                }
            } catch (error) {
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Unable to check grammar. Error: ' + error.message;
            }
        }

        function sendToTeacher() {
            const essayTitle = "B1-51: Modal Verbs of Probability - might, may, must, can't";
            const originalText = window.grammarCheckResult.original;
            const correctedText = window.grammarCheckResult.corrected;

            const emailBody = `Essay Title: ${essayTitle}\n\nOriginal Essay:\n${originalText}\n\nWe made some changes:\n\nCorrected Text:\n${correctedText}`;
            const mailtoLink = `mailto:?subject=${encodeURIComponent(essayTitle)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        }
    </script>
</body>
</html>
