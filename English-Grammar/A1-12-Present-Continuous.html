<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A1-12: Present Continuous - Actions Now vs. Temporary</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            flex-direction: column;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .header .website {
            text-align: center;
            margin-top: 8px;
        }

        .header .website a {
            color: #4c51bf;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .header .website a:hover {
            color: #553c9a;
        }

        .header-image {
            width: 120px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .container {
            display: flex;
            height: calc(100vh - 120px);
        }

        .navigation {
            width: 280px;
            background: rgba(45, 55, 72, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item {
            padding: 16px 24px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 500;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .section {
            display: none;
            flex: 1;
            padding: 0;
            overflow: hidden;
            height: 100%;
            background: white;
        }

        .section.active {
            display: flex;
            flex-direction: column;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 30px 80px;
        }

        .slide-content-wrapper {
            position: relative;
            width: 100%;
            max-width: 1400px;
            height: 85%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 20px;
            padding: 25px 35px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #8B7EC8;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .slide-arrow:hover {
            background: #7366B0;
            transform: translateY(-50%) scale(1.1);
        }

        .slide-arrow.prev {
            left: -70px;
        }

        .slide-arrow.next {
            right: -70px;
        }

        .slide-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #D1D5DB;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: #667eea;
            transform: scale(1.3);
        }

        .indicator-dot:hover {
            background: #9CA3AF;
        }

        .slide h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: -0.5px;
        }

        .explanation-box {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 0;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .explanation-box h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .explanation-box p {
            color: #2d3748;
            line-height: 1.5;
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .rule-box {
            background: #e3f2fd;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }

        .rule-box h4 {
            color: #667eea;
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .rule-box p {
            font-size: 1rem;
            color: #2d3748;
            margin: 5px 0;
        }

        .ing-form {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #48bb78;
            color: white;
        }

        .now {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #4299e1;
            color: white;
        }

        .temporary {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #ed8936;
            color: white;
        }

        .present-simple {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #9f7aea;
            color: white;
        }

        .present-continuous {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #ed64a6;
            color: white;
        }

        .time-marker {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #f6ad55;
            color: white;
        }

        .example-box {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
        }

        .example-box p {
            margin: 5px 0;
            font-size: 1rem;
            color: #2d3748;
        }

        .note-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .note-box strong {
            color: #856404;
            font-size: 1rem;
        }

        .note-box p {
            color: #856404;
            margin-top: 5px;
            line-height: 1.4;
            font-size: 0.95rem;
        }

        .exercise-container {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 10px;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .exercise-container h3 {
            color: #764ba2;
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-box {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 12px;
            margin: 0;
        }

        .question-box p {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 18px;
            margin: 8px 0;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            font-size: 1.05rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 15px 5px 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .feedback {
            padding: 15px 20px;
            border-radius: 12px;
            margin: 15px 0;
            font-weight: 500;
            font-size: 1.05rem;
            display: none;
        }

        .feedback.correct {
            background: rgba(72, 187, 120, 0.1);
            color: #2f855a;
            border: 1px solid rgba(72, 187, 120, 0.3);
            display: block;
        }

        .feedback.incorrect {
            background: rgba(245, 101, 101, 0.1);
            color: #c53030;
            border: 1px solid rgba(245, 101, 101, 0.3);
            display: block;
        }

        ul {
            margin-left: 25px;
            line-height: 1.6;
        }

        li {
            margin: 6px 0;
            font-size: 1.05rem;
            color: #2d3748;
        }

        li strong {
            color: #667eea;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 10px;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 10px;
            border: 1px solid #e2e8f0;
            font-size: 1rem;
            text-align: center;
        }

        .comparison-table tr:nth-child(even) {
            background: #f7fafc;
        }

        .explanation-box::-webkit-scrollbar {
            width: 8px;
        }

        .explanation-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }

        .formula-box {
            background: #e6fffa;
            border: 2px solid #319795;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.3rem;
        }

        .vs-box {
            background: #fff5f5;
            border: 2px solid #fc8181;
            padding: 20px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .grid-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .grid-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .grid-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .reading-text {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.9;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
        }

        .reading-text p {
            margin: 12px 0;
        }

        .highlight-pc {
            background: #fbb6ce;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .highlight-ps {
            background: #e9d8fd;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .example-sentence {
            font-size: 1.1rem;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>A1-12: Present Continuous - Actions Now vs. Temporary</h1>
            <div class="website">
                <a href="https://www.mimlanguageservices.com/" target="_blank">mimlanguageservices</a>
            </div>
        </div>
        <a href="https://www.mimlanguageservices.com/" target="_blank">
            <img src="https://static.wixstatic.com/media/593d03_8958d96b0f6d4d1ea9dffa7f89bffe8b~mv2.png" alt="ESL Logo" class="header-image">
        </a>
    </div>

    <div class="container">
        <div class="navigation">
            <div class="nav-item active" onclick="showSection('explanation', this)">Explanation</div>
            <div class="nav-item" onclick="showSection('examples', this)">Examples</div>
            <div class="nav-item" onclick="showSection('reading', this)">Reading</div>
            <div class="nav-item" onclick="showSection('media', this)">Media</div>
            <div class="nav-item" onclick="showSection('practice', this)">Practice</div>
            <div class="nav-item" onclick="showSection('writing', this)">Writing</div>
        </div>

        <div class="content">
            <!-- Explanation Section -->
            <div class="section active" id="explanation">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="explanation">
                            <h2>Welcome to Present Continuous!</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.2rem; text-align: center; margin: 20px 0;">
                                    Today we will learn about the <strong>Present Continuous</strong> tense!
                                </p>
                                <p style="font-size: 1.1rem; text-align: center;">
                                    We use it to talk about actions happening <span class="now">RIGHT NOW</span> and <span class="temporary">TEMPORARY</span> situations.
                                </p>
                                <div class="formula-box">
                                    <span class="ing-form">am/is/are + verb-ing</span>
                                </div>
                                <p style="text-align: center; font-size: 1.1rem;">
                                    Example: I <strong>am studying</strong> now. / She <strong>is working</strong> today.
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Present Continuous: Form</h2>
                            <div class="explanation-box">
                                <h3>Structure: am/is/are + verb-ing</h3>

                                <div class="formula-box">
                                    Subject + <strong>am/is/are</strong> + <strong>verb + -ing</strong>
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Subject</th>
                                        <th>Be Verb</th>
                                        <th>Verb-ing</th>
                                        <th>Example</th>
                                    </tr>
                                    <tr>
                                        <td><strong>I</strong></td>
                                        <td>am</td>
                                        <td>working</td>
                                        <td>I <strong>am working</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>He/She/It</strong></td>
                                        <td>is</td>
                                        <td>eating</td>
                                        <td>She <strong>is eating</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>You/We/They</strong></td>
                                        <td>are</td>
                                        <td>playing</td>
                                        <td>They <strong>are playing</strong>.</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>How to Make -ing Forms</h2>
                            <div class="explanation-box">
                                <h3>Spelling Rules:</h3>

                                <div class="example-box">
                                    <p><strong>1. Most verbs:</strong> Add <strong>-ing</strong></p>
                                    <p style="margin-left: 20px;">work → work<strong>ing</strong> | play → play<strong>ing</strong> | study → study<strong>ing</strong></p>
                                </div>

                                <div class="example-box">
                                    <p><strong>2. Verbs ending in -e:</strong> Remove <strong>e</strong>, add <strong>-ing</strong></p>
                                    <p style="margin-left: 20px;">make → mak<strong>ing</strong> | write → writ<strong>ing</strong> | come → com<strong>ing</strong></p>
                                </div>

                                <div class="example-box">
                                    <p><strong>3. Short verbs (1 vowel + 1 consonant):</strong> Double consonant + <strong>-ing</strong></p>
                                    <p style="margin-left: 20px;">run → run<strong>ning</strong> | sit → sit<strong>ting</strong> | swim → swim<strong>ming</strong></p>
                                </div>

                                <div class="example-box">
                                    <p><strong>4. Exception - verbs ending in -ie:</strong> Change <strong>-ie</strong> to <strong>-ying</strong></p>
                                    <p style="margin-left: 20px;">lie → l<strong>ying</strong> | die → d<strong>ying</strong></p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>When to Use Present Continuous?</h2>
                            <div class="explanation-box">
                                <h3>1. <span class="now">Actions Happening NOW</span></h3>
                                <div class="example-box">
                                    <p>I <strong>am reading</strong> a book right now.</p>
                                    <p>Look! She <strong>is dancing</strong>!</p>
                                    <p>They <strong>are eating</strong> dinner at the moment.</p>
                                </div>

                                <h3>Time Markers for "Now":</h3>
                                <p><span class="time-marker">now</span> | <span class="time-marker">right now</span> | <span class="time-marker">at the moment</span> | <span class="time-marker">currently</span></p>
                                <p><span class="time-marker">Look!</span> | <span class="time-marker">Listen!</span></p>

                                <h3>2. <span class="temporary">Temporary Situations</span></h3>
                                <div class="example-box">
                                    <p>I <strong>am living</strong> in a hotel this week. (temporary, not permanent)</p>
                                    <p>She <strong>is working</strong> from home these days.</p>
                                    <p>They <strong>are studying</strong> English this semester.</p>
                                </div>

                                <h3>Time Markers for "Temporary":</h3>
                                <p><span class="time-marker">this week</span> | <span class="time-marker">these days</span> | <span class="time-marker">this month</span> | <span class="time-marker">this year</span></p>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Negative & Question Forms</h2>
                            <div class="explanation-box">
                                <h3>Negative: am/is/are + not + verb-ing</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Subject</th>
                                        <th>Negative Form</th>
                                        <th>Example</th>
                                    </tr>
                                    <tr>
                                        <td><strong>I</strong></td>
                                        <td>am not / I'm not</td>
                                        <td>I <strong>am not working</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>He/She/It</strong></td>
                                        <td>is not / isn't</td>
                                        <td>She <strong>isn't eating</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>You/We/They</strong></td>
                                        <td>are not / aren't</td>
                                        <td>They <strong>aren't playing</strong>.</td>
                                    </tr>
                                </table>

                                <h3 style="margin-top: 25px;">Questions: Am/Is/Are + subject + verb-ing?</h3>

                                <div class="example-box">
                                    <p><strong>Am I</strong> talking too loud?</p>
                                    <p><strong>Is she</strong> coming?</p>
                                    <p><strong>Are they</strong> working?</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Stative Verbs</h2>
                            <div class="explanation-box">
                                <h3>What are Stative Verbs?</h3>
                                <p>Some verbs describe <strong>states</strong> (not actions). We <strong>DON'T</strong> usually use them in Present Continuous.</p>

                                <div class="rule-box">
                                    <h4>Rule:</h4>
                                    <p>Stative verbs use <strong>Present Simple</strong>, even when talking about now!</p>
                                </div>

                                <h3>Common Stative Verbs:</h3>
                                <table class="comparison-table">
                                    <tr>
                                        <th>Category</th>
                                        <th>Verbs</th>
                                        <th>Example</th>
                                    </tr>
                                    <tr>
                                        <td><strong>Feelings</strong></td>
                                        <td>like, love, hate, want, need</td>
                                        <td>I <strong>like</strong> pizza. (NOT: am liking)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Thinking</strong></td>
                                        <td>know, understand, remember</td>
                                        <td>I <strong>know</strong> him. (NOT: am knowing)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Possession</strong></td>
                                        <td>have, own, belong</td>
                                        <td>She <strong>has</strong> a car. (NOT: is having)</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Senses</strong></td>
                                        <td>see, hear, smell, taste</td>
                                        <td>I <strong>hear</strong> music. (NOT: am hearing)</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="explanation-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="section" id="examples">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="examples">
                            <h2>Present Simple vs Present Continuous</h2>
                            <div class="explanation-box">
                                <h3>Key Difference:</h3>

                                <div class="vs-box" style="background: #f0f9ff; border-color: #9f7aea;">
                                    <h3><span class="present-simple">PRESENT SIMPLE</span></h3>
                                    <p>✅ <strong>Habits, routines, facts</strong> (permanent, regular)</p>
                                    <div class="example-sentence">I <strong>work</strong> from 9 to 5. (permanent job)</div>
                                    <div class="example-sentence">She <strong>drinks</strong> coffee every morning. (habit)</div>
                                </div>

                                <div class="vs-box" style="background: #fff5f7; border-color: #ed64a6;">
                                    <h3><span class="present-continuous">PRESENT CONTINUOUS</span></h3>
                                    <p>✅ <strong>Actions now, temporary situations</strong></p>
                                    <div class="example-sentence">I <strong>am working</strong> right now. (happening now)</div>
                                    <div class="example-sentence">She <strong>is drinking</strong> coffee. (happening now)</div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>More Comparisons</h2>
                            <div class="explanation-box">
                                <table class="comparison-table">
                                    <tr>
                                        <th>Present Simple (Habit)</th>
                                        <th>Present Continuous (Now)</th>
                                    </tr>
                                    <tr>
                                        <td>I <strong>live</strong> in Tokyo. (permanent)</td>
                                        <td>I <strong>am living</strong> in a hotel. (temporary)</td>
                                    </tr>
                                    <tr>
                                        <td>He <strong>reads</strong> books. (hobby)</td>
                                        <td>He <strong>is reading</strong> a book. (now)</td>
                                    </tr>
                                    <tr>
                                        <td>They <strong>play</strong> tennis. (regularly)</td>
                                        <td>They <strong>are playing</strong> tennis. (right now)</td>
                                    </tr>
                                </table>

                                <h3>Actions Happening Now:</h3>
                                <div class="example-box">
                                    <p>Look! The baby <strong>is sleeping</strong>.</p>
                                    <p>Shh! I <strong>am talking</strong> on the phone.</p>
                                    <p>They <strong>are watching</strong> a movie right now.</p>
                                </div>

                                <h3>Temporary Situations:</h3>
                                <div class="example-box">
                                    <p>I <strong>am staying</strong> with my parents this month.</p>
                                    <p>She <strong>is learning</strong> Spanish these days.</p>
                                    <p>We <strong>are using</strong> a rental car this week.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Example Sentences</h2>
                            <div class="explanation-box">
                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Positive:</strong><br><br>
                                        I'm studying now.<br>
                                        She's eating lunch.<br>
                                        They're playing games.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Negative:</strong><br><br>
                                        I'm not studying.<br>
                                        She isn't eating.<br>
                                        They aren't playing.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Questions:</strong><br><br>
                                        Are you studying?<br>
                                        Is she eating?<br>
                                        Are they playing?
                                    </div>
                                </div>

                                <h3>Wh- Questions:</h3>
                                <div class="example-box">
                                    <p><strong>What</strong> are you doing?</p>
                                    <p><strong>Where</strong> is she going?</p>
                                    <p><strong>Why</strong> are they laughing?</p>
                                    <p><strong>Who</strong> is he calling?</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="examples-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                    </div>
                </div>
            </div>

            <!-- Reading Section -->
            <div class="section" id="reading">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="reading">
                            <h2>Reading: A Busy Day</h2>
                            <div class="explanation-box">
                                <div class="reading-text">
                                    <p>It's 10 AM on Saturday. The Smith family <span class="highlight-pc">is having</span> a busy morning at home.</p>

                                    <p>Mr. Smith <span class="highlight-pc">is working</span> in the garage. He <span class="highlight-pc">is fixing</span> his bicycle. He usually <span class="highlight-ps">works</span> in his office, but today he <span class="highlight-pc">is staying</span> home.</p>

                                    <p>Mrs. Smith <span class="highlight-pc">is cooking</span> lunch in the kitchen right now. She <span class="highlight-ps">loves</span> cooking, and she often <span class="highlight-ps">makes</span> special meals on weekends. Today, she <span class="highlight-pc">is preparing</span> pasta.</p>

                                    <p>Their son, Tom, <span class="highlight-pc">is playing</span> video games in his room. He usually <span class="highlight-ps">plays</span> soccer on Saturdays, but today it <span class="highlight-pc">is raining</span>, so he <span class="highlight-pc">is staying</span> inside.</p>

                                    <p>Their daughter, Emma, <span class="highlight-pc">is studying</span> in the library. She <span class="highlight-ps">goes</span> to university and <span class="highlight-ps">studies</span> medicine. This semester, she <span class="highlight-pc">is taking</span> five difficult classes.</p>

                                    <p>The dog, Max, <span class="highlight-pc">is sleeping</span> on the sofa. He <span class="highlight-ps">sleeps</span> a lot because he <span class="highlight-ps">is</span> very old. Right now, he <span class="highlight-pc">is dreaming</span> about food!</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="reading">
                            <h2>Story Analysis</h2>
                            <div class="explanation-box">
                                <h3><span class="present-continuous">Present Continuous (Now/Temporary):</span></h3>
                                <div class="example-box">
                                    <p><strong>Actions now:</strong></p>
                                    <p>• <strong>is working</strong>, <strong>is fixing</strong>, <strong>is cooking</strong>, <strong>is preparing</strong></p>
                                    <p>• <strong>is playing</strong>, <strong>is raining</strong>, <strong>is sleeping</strong>, <strong>is dreaming</strong></p>

                                    <p><strong>Temporary situations:</strong></p>
                                    <p>• <strong>is staying</strong> home (temporary - usually at office)</p>
                                    <p>• <strong>is taking</strong> five classes (this semester only)</p>
                                </div>

                                <h3><span class="present-simple">Present Simple (Habits/Facts):</span></h3>
                                <div class="example-box">
                                    <p>• usually <strong>works</strong> in his office (habit)</p>
                                    <p>• She <strong>loves</strong> cooking (stative verb - feeling)</p>
                                    <p>• often <strong>makes</strong> special meals (habit)</p>
                                    <p>• usually <strong>plays</strong> soccer (habit)</p>
                                    <p>• <strong>goes</strong> to university, <strong>studies</strong> medicine (permanent)</p>
                                    <p>• He <strong>sleeps</strong> a lot, he <strong>is</strong> very old (permanent)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="reading-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="section" id="media">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="media">
                            <h2>Video: Present Continuous</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Watch this video about the Present Continuous tense:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/fqMY83IANTA"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Learn about the Present Continuous tense
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="media">
                            <h2>Video: Present Simple vs Continuous</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Watch this video about Present Simple vs Present Continuous:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/2K87p3wd7Cw"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Learn the difference between Present Simple and Present Continuous
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="media-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div class="section" id="practice">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="practice">
                            <h2>Practice 1: Make -ing Form</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>What is the -ing form of "run"?</p>
                                    <input type="text" id="q1" placeholder="Type the -ing form" onkeypress="if(event.key==='Enter') checkAnswer1()">
                                    <button class="check-button" onclick="checkAnswer1()">Check Answer</button>
                                    <div id="feedback1" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 2: Present Continuous</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Complete: "She ___ (read) a book right now."</p>
                                    <input type="text" id="q2" placeholder="Type: is reading" onkeypress="if(event.key==='Enter') checkAnswer2()">
                                    <button class="check-button" onclick="checkAnswer2()">Check Answer</button>
                                    <div id="feedback2" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 3: Make it Negative</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Make negative: "They are playing." → "They ___ playing."</p>
                                    <input type="text" id="q3" placeholder="Type your answer" onkeypress="if(event.key==='Enter') checkAnswer3()">
                                    <button class="check-button" onclick="checkAnswer3()">Check Answer</button>
                                    <div id="feedback3" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 4: Make a Question</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Make a question: "You are working." → "___ working?"</p>
                                    <input type="text" id="q4" placeholder="Type your answer" onkeypress="if(event.key==='Enter') checkAnswer4()">
                                    <button class="check-button" onclick="checkAnswer4()">Check Answer</button>
                                    <div id="feedback4" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 5: Choose the Right Tense</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"I ___ (drink) coffee every morning." (habit)</p>
                                    <p>Type: drink OR am drinking</p>
                                    <input type="text" id="q5" placeholder="Type your answer" onkeypress="if(event.key==='Enter') checkAnswer5()">
                                    <button class="check-button" onclick="checkAnswer5()">Check Answer</button>
                                    <div id="feedback5" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 6: Choose the Right Tense</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"Look! He ___ (run) very fast!" (now)</p>
                                    <p>Type: runs OR is running</p>
                                    <input type="text" id="q6" placeholder="Type your answer" onkeypress="if(event.key==='Enter') checkAnswer6()">
                                    <button class="check-button" onclick="checkAnswer6()">Check Answer</button>
                                    <div id="feedback6" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 7: Stative Verb</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"I ___ (want) some water." (stative verb)</p>
                                    <p>Type: want OR am wanting</p>
                                    <input type="text" id="q7" placeholder="Type your answer" onkeypress="if(event.key==='Enter') checkAnswer7()">
                                    <button class="check-button" onclick="checkAnswer7()">Check Answer</button>
                                    <div id="feedback7" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 8: -ing Spelling</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>What is the -ing form of "make"?</p>
                                    <input type="text" id="q8" placeholder="Type the -ing form" onkeypress="if(event.key==='Enter') checkAnswer8()">
                                    <button class="check-button" onclick="checkAnswer8()">Check Answer</button>
                                    <div id="feedback8" class="feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="practice-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                        <span class="indicator-dot" onclick="goToSlide(7)"></span>
                        <span class="indicator-dot" onclick="goToSlide(8)"></span>
                    </div>
                </div>
            </div>

            <!-- Writing Section -->
            <div class="section" id="writing">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="writing" style="overflow-y: auto;">
                            <h2>Writing Practice</h2>
                            <div class="explanation-box">
                                <h3>Write about what you and your family are doing now</h3>
                                <p style="margin-bottom: 15px;">Write at least 6 sentences using Present Continuous.</p>
                                <div class="question-box">
                                    <textarea id="writing1" rows="8" style="width: 100%; padding: 12px; border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 8px; font-size: 1.05rem; font-family: 'Inter', sans-serif; resize: vertical;" spellcheck="true" placeholder="I am sitting at my desk. I am studying English. My sister is watching TV..."></textarea>
                                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                                        <button class="check-button" onclick="checkGrammar()">Check Grammar</button>
                                        <button id="send-teacher-btn" class="check-button" onclick="sendToTeacher()" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); opacity: 0.5; cursor: not-allowed;" disabled>Send to Teacher</button>
                                    </div>
                                    <div id="grammar-feedback" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;"></div>
                                    <p style="font-size: 0.95rem; color: #666; margin-top: 10px;">Example: I am sitting at my desk. I am studying English. My sister is watching TV...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="writing-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSlide = 1;
        let currentSection = 'explanation';

        function showSection(sectionName, element) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            document.getElementById(sectionName).classList.add('active');

            if (element) {
                element.classList.add('active');
            }

            currentSection = sectionName;
            currentSlide = 1;

            setTimeout(() => {
                const activeSection = document.querySelector('.section.active');
                const inputField = activeSection.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                }
            }, 100);
        }

        function changeSlide(direction) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            if (slides.length === 1) return;

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide += direction;

            if (currentSlide > slides.length) {
                currentSlide = 1;
            }
            if (currentSlide < 1) {
                currentSlide = slides.length;
            }

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');

            setTimeout(() => {
                const activeSlide = slides[currentSlide - 1];
                const inputField = activeSlide.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                    inputField.value = '';
                }
            }, 100);
        }

        function goToSlide(slideNum) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide = slideNum;

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                changeSlide(-1);
            } else if (e.key === 'ArrowRight') {
                changeSlide(1);
            }
        });

        function checkAnswer1() {
            const answer = document.getElementById('q1').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback1');

            if (answer === 'running') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "running" - double the n before adding -ing.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Not quite. "Run" is short (1 vowel + 1 consonant), so double the consonant: running.';
            }
        }

        function checkAnswer2() {
            const answer = document.getElementById('q2').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback2');

            if (answer === 'is reading') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "She is reading a book right now." Use "is" with "she".';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Incorrect. Use "is reading" with "she" (singular).';
            }
        }

        function checkAnswer3() {
            const answer = document.getElementById('q3').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback3');

            if (answer === "aren't" || answer === 'are not') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Great! "They aren\'t playing." or "They are not playing."';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Try again. Use "aren\'t" or "are not" with "they".';
            }
        }

        function checkAnswer4() {
            const answer = document.getElementById('q4').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback4');

            if (answer === 'are you' || answer === 'are you working' || answer === 'are you working?') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "Are you working?" Move "are" before "you" for questions.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Not quite. For questions, move "are" before "you": Are you working?';
            }
        }

        function checkAnswer5() {
            const answer = document.getElementById('q5').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback5');

            if (answer === 'drink') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! "I drink coffee every morning." Habit = Present Simple.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Incorrect. "Every morning" = habit. Use Present Simple (drink).';
            }
        }

        function checkAnswer6() {
            const answer = document.getElementById('q6').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback6');

            if (answer === 'is running') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "Look! He is running!" "Look" = now, use Present Continuous.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Not quite. "Look!" = happening NOW. Use Present Continuous (is running).';
            }
        }

        function checkAnswer7() {
            const answer = document.getElementById('q7').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback7');

            if (answer === 'want') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "I want some water." "Want" is stative - use Present Simple.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Incorrect. "Want" is stative (feeling). DON\'T use continuous. Use "want".';
            }
        }

        function checkAnswer8() {
            const answer = document.getElementById('q8').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback8');

            if (answer === 'making') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Great! "making" - remove the silent -e before adding -ing.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Not quite. "Make" ends in -e, so remove the -e and add -ing: making.';
            }
        }

        async function checkGrammar() {
            const text = document.getElementById('writing1').value;
            const feedbackDiv = document.getElementById('grammar-feedback');
            const textarea = document.getElementById('writing1');

            if (!text.trim()) {
                feedbackDiv.style.display = 'block';
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Please write some sentences first!';
                return;
            }

            textarea.style.display = 'none';
            window.grammarCheckResult = { original: text, corrected: '' };

            feedbackDiv.style.display = 'block';
            feedbackDiv.style.background = 'rgba(102, 126, 234, 0.1)';
            feedbackDiv.style.border = '1px solid rgba(102, 126, 234, 0.3)';
            feedbackDiv.style.color = '#667eea';
            feedbackDiv.innerHTML = '⏳ Checking your grammar and spelling...';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyBTH0NmDb3cqjrY6p7YROPIJel-iCxSxzs`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a strict grammar checker. Fix grammar and spelling errors. Do not change the meaning, style, or add punctuation unless absolutely necessary. Profanities are acceptable, but don't use shortened informal words like "cuz" or "wanna"\n\nText: "${text}"\n\nReturn only the corrected text with minimal changes.`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                const correctedText = data.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || text;

                if (correctedText !== text && correctedText.toLowerCase() !== text.toLowerCase()) {
                    const originalWords = text.split(/(\s+)/);
                    const correctedWords = correctedText.split(/(\s+)/);
                    let highlightedText = '';

                    originalWords.forEach((word, i) => {
                        if (word.match(/\s+/)) {
                            highlightedText += word;
                        } else if (correctedWords[i] && word.toLowerCase() !== correctedWords[i].toLowerCase()) {
                            highlightedText += `<span style="color: #e53e3e; font-weight: 600; background: rgba(245, 101, 101, 0.15); padding: 2px 4px; border-radius: 3px;">${word}</span>`;
                        } else {
                            highlightedText += word;
                        }
                    });

                    let html = `
                        <div style="margin-bottom: 20px;">
                            <strong style="color: #c53030;">Your Text (errors highlighted):</strong>
                            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(245, 101, 101, 0.3); line-height: 1.8;">
                                ${highlightedText}
                            </div>
                        </div>
                        <div>
                            <strong style="color: #2f855a;">Corrected Text:</strong>
                            <div style="background: rgba(72, 187, 120, 0.1); padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(72, 187, 120, 0.3); color: #2d3748; line-height: 1.8;">
                                ${correctedText}
                            </div>
                        </div>
                    `;

                    feedbackDiv.style.background = 'rgba(245, 101, 101, 0.05)';
                    feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                    feedbackDiv.style.color = '#2d3748';
                    feedbackDiv.innerHTML = html;

                    window.grammarCheckResult.corrected = correctedText;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                } else {
                    feedbackDiv.style.background = 'rgba(72, 187, 120, 0.1)';
                    feedbackDiv.style.border = '1px solid rgba(72, 187, 120, 0.3)';
                    feedbackDiv.style.color = '#2f855a';
                    feedbackDiv.innerHTML = '✓ Perfect! No grammar or spelling errors detected!';

                    window.grammarCheckResult.corrected = text;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                }
            } catch (error) {
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Unable to check grammar. Error: ' + error.message;
            }
        }

        function sendToTeacher() {
            const essayTitle = "A1-12: Present Continuous - Actions Now vs. Temporary";
            const originalText = window.grammarCheckResult.original;
            const correctedText = window.grammarCheckResult.corrected;

            const emailBody = `Essay Title: ${essayTitle}\n\nOriginal Essay:\n${originalText}\n\nWe made some changes:\n\nCorrected Text:\n${correctedText}`;
            const mailtoLink = `mailto:?subject=${encodeURIComponent(essayTitle)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        }
    </script>
</body>
</html>
