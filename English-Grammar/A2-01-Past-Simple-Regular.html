<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A1-21: Past Simple - Regular Verbs</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            flex-direction: column;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .header .website {
            text-align: center;
            margin-top: 8px;
        }

        .header .website a {
            color: #4c51bf;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .header .website a:hover {
            color: #553c9a;
        }

        .header-image {
            width: 120px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .container {
            display: flex;
            height: calc(100vh - 120px);
        }

        .navigation {
            width: 280px;
            background: rgba(45, 55, 72, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item {
            padding: 16px 24px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 500;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .section {
            display: none;
            flex: 1;
            padding: 0;
            overflow: hidden;
            height: 100%;
            background: white;
        }

        .section.active {
            display: flex;
            flex-direction: column;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 30px 80px;
        }

        .slide-content-wrapper {
            position: relative;
            width: 100%;
            max-width: 1400px;
            height: 85%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 20px;
            padding: 25px 35px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #8B7EC8;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .slide-arrow:hover {
            background: #7366B0;
            transform: translateY(-50%) scale(1.1);
        }

        .slide-arrow.prev {
            left: -70px;
        }

        .slide-arrow.next {
            right: -70px;
        }

        .slide-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #D1D5DB;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: #667eea;
            transform: scale(1.3);
        }

        .indicator-dot:hover {
            background: #9CA3AF;
        }

        .slide h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: -0.5px;
        }

        .explanation-box {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 0;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .explanation-box h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .explanation-box p {
            color: #2d3748;
            line-height: 1.5;
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .rule-box {
            background: #e3f2fd;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }

        .rule-box h4 {
            color: #667eea;
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .rule-box p {
            font-size: 1rem;
            color: #2d3748;
            margin: 5px 0;
        }

        .yes-no {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #4299e1;
            color: white;
        }

        .auxiliary {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #48bb78;
            color: white;
        }

        .subject {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #9f7aea;
            color: white;
        }

        .verb {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #ed64a6;
            color: white;
        }

        .example-box {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
        }

        .example-box p {
            margin: 5px 0;
            font-size: 1rem;
            color: #2d3748;
        }

        .note-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .note-box strong {
            color: #856404;
            font-size: 1rem;
        }

        .note-box p {
            color: #856404;
            margin-top: 5px;
            line-height: 1.4;
            font-size: 0.95rem;
        }

        .exercise-container {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 10px;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .exercise-container h3 {
            color: #764ba2;
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-box {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 12px;
            margin: 0;
        }

        .question-box p {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 18px;
            margin: 8px 0;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            font-size: 1.05rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 15px 5px 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .feedback {
            padding: 15px 20px;
            border-radius: 12px;
            margin: 15px 0;
            font-weight: 500;
            font-size: 1.05rem;
            display: none;
        }

        .feedback.correct {
            background: rgba(72, 187, 120, 0.1);
            color: #2f855a;
            border: 1px solid rgba(72, 187, 120, 0.3);
            display: block;
        }

        .feedback.incorrect {
            background: rgba(245, 101, 101, 0.1);
            color: #c53030;
            border: 1px solid rgba(245, 101, 101, 0.3);
            display: block;
        }

        ul {
            margin-left: 25px;
            line-height: 1.6;
        }

        li {
            margin: 6px 0;
            font-size: 1.05rem;
            color: #2d3748;
        }

        li strong {
            color: #667eea;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 10px;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 10px;
            border: 1px solid #e2e8f0;
            font-size: 1rem;
            text-align: center;
        }

        .comparison-table tr:nth-child(even) {
            background: #f7fafc;
        }

        .explanation-box::-webkit-scrollbar {
            width: 8px;
        }

        .explanation-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }

        .formula-box {
            background: #e6fffa;
            border: 2px solid #319795;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.3rem;
        }

        .grid-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .grid-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .grid-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .reading-text {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.9;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
        }

        .reading-text p {
            margin: 12px 0;
        }

        .highlight-question {
            background: #bee3f8;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .highlight-answer {
            background: #c6f6d5;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .example-sentence {
            font-size: 1.1rem;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>A1-21: Past Simple - Regular Verbs</h1>
            <div class="website">
                <a href="https://www.mimlanguageservices.com/" target="_blank">mimlanguageservices</a>
            </div>
        </div>
        <a href="https://www.mimlanguageservices.com/" target="_blank">
            <img src="https://static.wixstatic.com/media/593d03_8958d96b0f6d4d1ea9dffa7f89bffe8b~mv2.png" alt="ESL Logo" class="header-image">
        </a>
    </div>

    <div class="container">
        <div class="navigation">
            <div class="nav-item active" onclick="showSection('explanation', this)">Explanation</div>
            <div class="nav-item" onclick="showSection('examples', this)">Examples</div>
            <div class="nav-item" onclick="showSection('reading', this)">Reading</div>
            <div class="nav-item" onclick="showSection('media', this)">Media</div>
            <div class="nav-item" onclick="showSection('practice', this)">Practice</div>
            <div class="nav-item" onclick="showSection('writing', this)">Writing</div>
        </div>

        <div class="content">
            <!-- Explanation Section -->
            <div class="section active" id="explanation">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="explanation">
                            <h2>Welcome to Past Simple Regular Verbs!</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.2rem; text-align: center; margin: 20px 0;">
                                    Today we will learn the <span class="yes-no">PAST SIMPLE</span> with regular verbs!
                                </p>
                                <p style="font-size: 1.1rem; text-align: center;">
                                    We use Past Simple to talk about completed actions in the past.
                                </p>
                                <div class="formula-box">
                                    <span class="subject">Subject</span> + <span class="verb">Verb + -ED</span>
                                </div>
                                <p style="text-align: center; font-size: 1.1rem;">
                                    Example: I <strong>worked</strong> yesterday / She <strong>played</strong> tennis / They <strong>walked</strong> to school
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>How to Add -ED</h2>
                            <div class="explanation-box">
                                <h3>Three ways to add -ED:</h3>

                                <div class="formula-box">
                                    Base Verb + <span class="verb">-ED</span>
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Rule</th>
                                        <th>Base Form</th>
                                        <th>Past Simple</th>
                                    </tr>
                                    <tr>
                                        <td><strong>Most verbs: Add -ED</strong></td>
                                        <td>work, play, watch, clean</td>
                                        <td>worked, played, watched, cleaned</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Verb ends in -E: Add -D</strong></td>
                                        <td>live, love, dance, like</td>
                                        <td>lived, loved, danced, liked</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Consonant + Y: Change Y to -IED</strong></td>
                                        <td>study, try, cry, carry</td>
                                        <td>studied, tried, cried, carried</td>
                                    </tr>
                                </table>

                                <div class="note-box">
                                    <strong>Note:</strong>
                                    <p>If verb ends in VOWEL + Y, just add -ED: play → played, enjoy → enjoyed</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Double Consonant Rule</h2>
                            <div class="explanation-box">
                                <h3>When to double the final consonant:</h3>

                                <div class="rule-box">
                                    <h4>Double the consonant when:</h4>
                                    <p>• The verb has ONE syllable</p>
                                    <p>• It ends in ONE vowel + ONE consonant</p>
                                    <p>• The last syllable is STRESSED (for 2+ syllable words)</p>
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Base Form</th>
                                        <th>Past Simple</th>
                                        <th>Why?</th>
                                    </tr>
                                    <tr>
                                        <td>stop</td>
                                        <td>stopped</td>
                                        <td>One syllable: o + p</td>
                                    </tr>
                                    <tr>
                                        <td>plan</td>
                                        <td>planned</td>
                                        <td>One syllable: a + n</td>
                                    </tr>
                                    <tr>
                                        <td>prefer</td>
                                        <td>preferred</td>
                                        <td>Stress on 2nd syllable: e + r</td>
                                    </tr>
                                    <tr>
                                        <td>visit</td>
                                        <td>visited</td>
                                        <td>NO double (stress on 1st syllable)</td>
                                    </tr>
                                </table>

                                <div class="example-box">
                                    <p>• stop → stopped (NOT stoped)</p>
                                    <p>• open → opened (NOT openned - stress on O)</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Pronunciation of -ED</h2>
                            <div class="explanation-box">
                                <h3>Three ways to pronounce -ED:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Sound</th>
                                        <th>After these sounds</th>
                                        <th>Examples</th>
                                    </tr>
                                    <tr>
                                        <td><strong>/t/</strong></td>
                                        <td>p, k, f, s, sh, ch</td>
                                        <td>helped, looked, laughed, kissed, washed, watched</td>
                                    </tr>
                                    <tr>
                                        <td><strong>/d/</strong></td>
                                        <td>all vowels and b, g, l, m, n, r, v, z</td>
                                        <td>played, lived, called, seemed, planned, arrived</td>
                                    </tr>
                                    <tr>
                                        <td><strong>/ɪd/</strong></td>
                                        <td>t, d</td>
                                        <td>wanted, needed, started, ended, decided</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Remember:</h4>
                                    <p>/t/ = voiceless sounds (no vibration in throat)</p>
                                    <p>/d/ = voiced sounds (vibration in throat)</p>
                                    <p>/ɪd/ = adds an extra syllable!</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Negative & Questions with DID</h2>
                            <div class="explanation-box">
                                <h3>Use DID/DIDN'T + base verb (NOT -ed)</h3>

                                <div class="formula-box">
                                    Negative: <span class="subject">Subject</span> + <span class="auxiliary">DIDN'T</span> + <span class="verb">base verb</span>
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Positive</th>
                                        <th>Negative</th>
                                    </tr>
                                    <tr>
                                        <td>I worked yesterday.</td>
                                        <td>I didn't work yesterday.</td>
                                    </tr>
                                    <tr>
                                        <td>She played tennis.</td>
                                        <td>She didn't play tennis.</td>
                                    </tr>
                                </table>

                                <div class="formula-box">
                                    Question: <span class="auxiliary">DID</span> + <span class="subject">subject</span> + <span class="verb">base verb</span> ?
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Statement</th>
                                        <th>Question</th>
                                    </tr>
                                    <tr>
                                        <td>You watched TV.</td>
                                        <td>Did you watch TV?</td>
                                    </tr>
                                    <tr>
                                        <td>They lived in Paris.</td>
                                        <td>Did they live in Paris?</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Time Expressions</h2>
                            <div class="explanation-box">
                                <h3>Common time words with Past Simple:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Time Expression</th>
                                        <th>Example</th>
                                    </tr>
                                    <tr>
                                        <td><strong>yesterday</strong></td>
                                        <td>I worked yesterday.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>last (week/month/year)</strong></td>
                                        <td>She visited Paris last year.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>ago</strong></td>
                                        <td>They moved here two years ago.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>in (year)</strong></td>
                                        <td>He graduated in 2020.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>when I was (age/young)</strong></td>
                                        <td>I lived in Tokyo when I was young.</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Examples:</h4>
                                    <p>• I <strong>watched</strong> a movie <strong>yesterday</strong>.</p>
                                    <p>• She <strong>studied</strong> English <strong>last week</strong>.</p>
                                    <p>• We <strong>moved</strong> here <strong>three years ago</strong>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Common Mistakes</h2>
                            <div class="explanation-box">
                                <h3>❌ Mistake 1: Using -ED with DID</h3>
                                <div class="example-box">
                                    <p>❌ I didn't <del>worked</del>. → ✅ I didn't <strong>work</strong>.</p>
                                    <p>❌ Did you <del>played</del>? → ✅ Did you <strong>play</strong>?</p>
                                </div>

                                <h3>❌ Mistake 2: Wrong spelling with Y</h3>
                                <div class="example-box">
                                    <p>❌ I <del>studyed</del> English. → ✅ I <strong>studied</strong> English.</p>
                                    <p>❌ She <del>cryed</del>. → ✅ She <strong>cried</strong>.</p>
                                </div>

                                <h3>❌ Mistake 3: Forgetting to double consonant</h3>
                                <div class="example-box">
                                    <p>❌ We <del>stoped</del> the car. → ✅ We <strong>stopped</strong> the car.</p>
                                    <p>❌ I <del>planed</del> a trip. → ✅ I <strong>planned</strong> a trip.</p>
                                </div>

                                <h3>❌ Mistake 4: Adding -ED to verbs ending in -E</h3>
                                <div class="example-box">
                                    <p>❌ She <del>liveed</del> there. → ✅ She <strong>lived</strong> there.</p>
                                    <p>❌ I <del>likeed</del> it. → ✅ I <strong>liked</strong> it.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="explanation-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                        <span class="indicator-dot" onclick="goToSlide(7)"></span>
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="section" id="examples">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="examples">
                            <h2>Regular Verbs - Positive</h2>
                            <div class="explanation-box">
                                <h3>Simple -ED verbs:</h3>
                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Daily Activities:</strong><br><br>
                                        • I <strong>worked</strong> 8 hours yesterday.<br>
                                        • She <strong>cooked</strong> dinner last night.<br>
                                        • They <strong>cleaned</strong> the house.<br>
                                        • We <strong>watched</strong> a movie.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Verbs ending in -E:</strong><br><br>
                                        • I <strong>lived</strong> in Paris in 2020.<br>
                                        • She <strong>loved</strong> that book.<br>
                                        • He <strong>danced</strong> at the party.<br>
                                        • They <strong>liked</strong> the food.
                                    </div>
                                </div>

                                <h3>Consonant + Y → IED:</h3>
                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Study/Try/Cry:</strong><br><br>
                                        • I <strong>studied</strong> English last night.<br>
                                        • She <strong>tried</strong> to call you.<br>
                                        • The baby <strong>cried</strong> all night.<br>
                                        • He <strong>carried</strong> the bags.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Double Consonant:</strong><br><br>
                                        • We <strong>stopped</strong> at the store.<br>
                                        • I <strong>planned</strong> the trip.<br>
                                        • She <strong>dropped</strong> the glass.<br>
                                        • They <strong>preferred</strong> coffee.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Negative & Questions</h2>
                            <div class="explanation-box">
                                <h3>Negative with DIDN'T:</h3>
                                <div class="example-box">
                                    <p>• I <strong>didn't work</strong> yesterday.</p>
                                    <p>• She <strong>didn't study</strong> for the test.</p>
                                    <p>• They <strong>didn't watch</strong> the game.</p>
                                    <p>• We <strong>didn't like</strong> the movie.</p>
                                    <p>• He <strong>didn't stop</strong> at the red light.</p>
                                </div>

                                <h3>Questions with DID:</h3>
                                <div class="example-box">
                                    <p>• <strong>Did you work</strong> yesterday?</p>
                                    <p>• <strong>Did she study</strong> for the test?</p>
                                    <p>• <strong>Did they watch</strong> the game?</p>
                                    <p>• <strong>Did you like</strong> the movie?</p>
                                    <p>• <strong>Did he stop</strong> at the store?</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>With Time Expressions</h2>
                            <div class="explanation-box">
                                <table class="comparison-table">
                                    <tr>
                                        <th>Time Word</th>
                                        <th>Example Sentence</th>
                                    </tr>
                                    <tr>
                                        <td><strong>yesterday</strong></td>
                                        <td>I called you yesterday.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>last week</strong></td>
                                        <td>She visited her parents last week.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>two days ago</strong></td>
                                        <td>We arrived two days ago.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>in 2019</strong></td>
                                        <td>They moved here in 2019.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>when I was young</strong></td>
                                        <td>I played soccer when I was young.</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Complete Story:</h4>
                                    <p>Yesterday, I <strong>walked</strong> to the park. I <strong>watched</strong> the birds and <strong>relaxed</strong> under a tree. Then I <strong>called</strong> my friend and we <strong>talked</strong> for an hour. It <strong>started</strong> to rain, so I <strong>hurried</strong> home.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="examples-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                    </div>
                </div>
            </div>

            <!-- Reading Section -->
            <div class="section" id="reading">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="reading">
                            <h2>Reading: Sarah's Weekend</h2>
                            <div class="explanation-box">
                                <div class="reading-text">
                                    <p><strong>My Busy Weekend</strong></p>

                                    <p>Last weekend was very busy! On Saturday morning, I <span class="highlight-answer">woke up</span> early and <span class="highlight-answer">cleaned</span> my apartment. I <span class="highlight-answer">vacuumed</span> the floors and <span class="highlight-answer">washed</span> the dishes.</p>

                                    <p>In the afternoon, I <span class="highlight-answer">walked</span> to the park with my dog. We <span class="highlight-answer">played</span> for an hour and then <span class="highlight-answer">relaxed</span> under a tree. The weather was beautiful!</p>

                                    <p>On Saturday evening, I <span class="highlight-answer">cooked</span> dinner for my friends. I <span class="highlight-answer">prepared</span> pasta with tomato sauce. We <span class="highlight-answer">talked</span> and <span class="highlight-answer">laughed</span> all evening. Everyone <span class="highlight-answer">loved</span> the food!</p>

                                    <p>On Sunday, I <span class="highlight-answer">visited</span> my parents. We <span class="highlight-answer">watched</span> a movie together and <span class="highlight-answer">enjoyed</span> some cake. Then I <span class="highlight-answer">helped</span> my dad in the garden. We <span class="highlight-answer">planted</span> some flowers.</p>

                                    <p>In the evening, I <span class="highlight-answer">studied</span> English for two hours. I <span class="highlight-answer">practiced</span> grammar and <span class="highlight-answer">learned</span> new words. Then I <span class="highlight-answer">called</span> my best friend. We <span class="highlight-answer">chatted</span> for a long time!</p>

                                    <p>Finally, I <span class="highlight-answer">finished</span> my homework and <span class="highlight-answer">checked</span> my emails. I was tired but happy. It was a great weekend!</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="reading">
                            <h2>Reading Analysis</h2>
                            <div class="explanation-box">
                                <h3>Simple -ED verbs:</h3>
                                <div class="example-box">
                                    <p>• <strong>cleaned</strong>, <strong>washed</strong>, <strong>walked</strong>, <strong>played</strong>, <strong>relaxed</strong></p>
                                    <p>• <strong>cooked</strong>, <strong>talked</strong>, <strong>laughed</strong>, <strong>watched</strong></p>
                                    <p>• <strong>helped</strong>, <strong>called</strong>, <strong>checked</strong>, <strong>finished</strong></p>
                                </div>

                                <h3>Verbs ending in -E (add -D only):</h3>
                                <div class="example-box">
                                    <p>• <strong>loved</strong> (love + d)</p>
                                    <p>• <strong>prepared</strong> (prepare + d)</p>
                                    <p>• <strong>enjoyed</strong> (enjoy + ed - vowel + y)</p>
                                </div>

                                <h3>Consonant + Y → IED:</h3>
                                <div class="example-box">
                                    <p>• <strong>studied</strong> (study → studied)</p>
                                </div>

                                <h3>Double consonant:</h3>
                                <div class="example-box">
                                    <p>• <strong>chatted</strong> (chat → chatted)</p>
                                    <p>• <strong>planned</strong> (plan → planned - from "planted")</p>
                                </div>

                                <h3>Time expressions used:</h3>
                                <div class="example-box">
                                    <p>• <strong>Last weekend</strong>, <strong>On Saturday</strong>, <strong>On Sunday</strong></p>
                                    <p>• <strong>In the afternoon</strong>, <strong>In the evening</strong></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="reading-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="section" id="media">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="media">
                            <h2>Video: Past Simple Regular Verbs</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Watch this video about Past Simple regular verbs:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/B3U1kd47rKo"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Learn how to form and use Past Simple with regular verbs
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="media">
                            <h2>Video: Pronunciation of -ED</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Learn how to pronounce -ED endings:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/8eAHDNhan8w"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Master the three pronunciations of -ED: /t/, /d/, and /ɪd/
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="media-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div class="section" id="practice">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="practice">
                            <h2>Practice 1: Add -ED</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Change to past: "I (work) yesterday." → "I ___ yesterday."</p>
                                    <input type="text" id="q1" placeholder="Type: worked" onkeypress="if(event.key==='Enter') checkAnswer1()">
                                    <button class="check-button" onclick="checkAnswer1()">Check Answer</button>
                                    <div id="feedback1" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 2: Verb ending in -E</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Change to past: "She (live) in Paris." → "She ___ in Paris."</p>
                                    <input type="text" id="q2" placeholder="Type: lived" onkeypress="if(event.key==='Enter') checkAnswer2()">
                                    <button class="check-button" onclick="checkAnswer2()">Check Answer</button>
                                    <div id="feedback2" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 3: Y → IED</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Change to past: "I (study) English." → "I ___ English."</p>
                                    <input type="text" id="q3" placeholder="Type: studied" onkeypress="if(event.key==='Enter') checkAnswer3()">
                                    <button class="check-button" onclick="checkAnswer3()">Check Answer</button>
                                    <div id="feedback3" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 4: Double Consonant</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Change to past: "We (stop) the car." → "We ___ the car."</p>
                                    <input type="text" id="q4" placeholder="Type: stopped" onkeypress="if(event.key==='Enter') checkAnswer4()">
                                    <button class="check-button" onclick="checkAnswer4()">Check Answer</button>
                                    <div id="feedback4" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 5: Make Negative</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Make negative: "I worked yesterday." → "I ___ yesterday."</p>
                                    <input type="text" id="q5" placeholder="Type: didn't work" onkeypress="if(event.key==='Enter') checkAnswer5()">
                                    <button class="check-button" onclick="checkAnswer5()">Check Answer</button>
                                    <div id="feedback5" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 6: Make Question</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Make a question: "You watched TV." → "___ TV?"</p>
                                    <input type="text" id="q6" placeholder="Type: Did you watch" onkeypress="if(event.key==='Enter') checkAnswer6()">
                                    <button class="check-button" onclick="checkAnswer6()">Check Answer</button>
                                    <div id="feedback6" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 7: Fix the Mistake</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Fix: "I didn't worked yesterday." → "___"</p>
                                    <input type="text" id="q7" placeholder="Type the correct sentence" onkeypress="if(event.key==='Enter') checkAnswer7()">
                                    <button class="check-button" onclick="checkAnswer7()">Check Answer</button>
                                    <div id="feedback7" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 8: Complete the Story</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"Yesterday, I (walk) to the park." → "Yesterday, I ___ to the park."</p>
                                    <input type="text" id="q8" placeholder="Type: walked" onkeypress="if(event.key==='Enter') checkAnswer8()">
                                    <button class="check-button" onclick="checkAnswer8()">Check Answer</button>
                                    <div id="feedback8" class="feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="practice-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                        <span class="indicator-dot" onclick="goToSlide(7)"></span>
                        <span class="indicator-dot" onclick="goToSlide(8)"></span>
                    </div>
                </div>
            </div>

            <!-- Writing Section -->
            <div class="section" id="writing">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="writing" style="overflow-y: auto;">
                            <h2>Writing Practice</h2>
                            <div class="explanation-box">
                                <h3>Write about your last weekend</h3>
                                <p style="margin-bottom: 15px;">Use Past Simple regular verbs to describe what you did. Write at least 10 sentences.</p>
                                <div class="question-box">
                                    <textarea id="writing1" rows="8" style="width: 100%; padding: 12px; border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 8px; font-size: 1.05rem; font-family: 'Inter', sans-serif; resize: vertical;" spellcheck="true" placeholder="Last weekend, I woke up early on Saturday. I cleaned my room and washed the dishes..."></textarea>
                                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                                        <button class="check-button" onclick="checkGrammar()">Check Grammar</button>
                                        <button id="send-teacher-btn" class="check-button" onclick="sendToTeacher()" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); opacity: 0.5; cursor: not-allowed;" disabled>Send to Teacher</button>
                                    </div>
                                    <div id="grammar-feedback" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;"></div>
                                    <p style="font-size: 0.95rem; color: #666; margin-top: 10px;">Example: Last weekend, I woke up early on Saturday. I cleaned my room and washed the dishes. Then I walked to the park with my dog.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="writing-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSlide = 1;
        let currentSection = 'explanation';

        function showSection(sectionName, element) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            document.getElementById(sectionName).classList.add('active');

            if (element) {
                element.classList.add('active');
            }

            currentSection = sectionName;
            currentSlide = 1;

            setTimeout(() => {
                const activeSection = document.querySelector('.section.active');
                const inputField = activeSection.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                }
            }, 100);
        }

        function changeSlide(direction) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            if (slides.length === 1) return;

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide += direction;

            if (currentSlide > slides.length) {
                currentSlide = 1;
            }
            if (currentSlide < 1) {
                currentSlide = slides.length;
            }

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');

            setTimeout(() => {
                const activeSlide = slides[currentSlide - 1];
                const inputField = activeSlide.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                    inputField.value = '';
                }
            }, 100);
        }

        function goToSlide(slideNum) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide = slideNum;

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                changeSlide(-1);
            } else if (e.key === 'ArrowRight') {
                changeSlide(1);
            }
        });

        function checkAnswer1() {
            const answer = document.getElementById('q1').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback1');

            if (answer === 'worked') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! work + ed = worked';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ The answer is: worked (work + -ed)';
            }
        }

        function checkAnswer2() {
            const answer = document.getElementById('q2').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback2');

            if (answer === 'lived') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! Verb ends in -e, so add -d only: live + d = lived';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ The answer is: lived (live + d, NOT liveed)';
            }
        }

        function checkAnswer3() {
            const answer = document.getElementById('q3').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback3');

            if (answer === 'studied') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! Consonant + y changes to -ied: study → studied';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ The answer is: studied (y → ied, NOT studyed)';
            }
        }

        function checkAnswer4() {
            const answer = document.getElementById('q4').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback4');

            if (answer === 'stopped') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! Double the p: stop → stopped';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ The answer is: stopped (double p, NOT stoped)';
            }
        }

        function checkAnswer5() {
            const answer = document.getElementById('q5').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback5');

            if (answer === "didn't work" || answer === "did not work") {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! Use didn\'t + base verb (NOT -ed with didn\'t)';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ The answer is: didn\'t work (didn\'t + base verb)';
            }
        }

        function checkAnswer6() {
            const answer = document.getElementById('q6').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback6');

            if (answer === 'did you watch' || answer === 'did you watch tv') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! Did + subject + base verb';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ The answer is: Did you watch (Did + you + watch)';
            }
        }

        function checkAnswer7() {
            const answer = document.getElementById('q7').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback7');

            if (answer === "i didn't work yesterday" || answer === "i didn't work yesterday." || answer === "i did not work yesterday" || answer === "i did not work yesterday.") {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Great! Use base verb with didn\'t: I didn\'t work yesterday.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Remove -ed after didn\'t: I didn\'t work yesterday';
            }
        }

        function checkAnswer8() {
            const answer = document.getElementById('q8').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback8');

            if (answer === 'walked') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! walk + -ed = walked';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ The answer is: walked';
            }
        }

        async function checkGrammar() {
            const text = document.getElementById('writing1').value;
            const feedbackDiv = document.getElementById('grammar-feedback');
            const textarea = document.getElementById('writing1');

            if (!text.trim()) {
                feedbackDiv.style.display = 'block';
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Please write some sentences first!';
                return;
            }

            textarea.style.display = 'none';
            window.grammarCheckResult = { original: text, corrected: '' };

            feedbackDiv.style.display = 'block';
            feedbackDiv.style.background = 'rgba(102, 126, 234, 0.1)';
            feedbackDiv.style.border = '1px solid rgba(102, 126, 234, 0.3)';
            feedbackDiv.style.color = '#667eea';
            feedbackDiv.innerHTML = '⏳ Checking your grammar and spelling...';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyBTH0NmDb3cqjrY6p7YROPIJel-iCxSxzs`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a strict grammar checker. Fix grammar and spelling errors. Do not change the meaning, style, or add punctuation unless absolutely necessary. Profanities are acceptable, but don't use shortened informal words like "cuz" or "wanna"\n\nText: "${text}"\n\nReturn only the corrected text with minimal changes.`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                const correctedText = data.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || text;

                if (correctedText !== text && correctedText.toLowerCase() !== text.toLowerCase()) {
                    const originalWords = text.split(/(\s+)/);
                    const correctedWords = correctedText.split(/(\s+)/);
                    let highlightedText = '';

                    originalWords.forEach((word, i) => {
                        if (word.match(/\s+/)) {
                            highlightedText += word;
                        } else if (correctedWords[i] && word.toLowerCase() !== correctedWords[i].toLowerCase()) {
                            highlightedText += `<span style="color: #e53e3e; font-weight: 600; background: rgba(245, 101, 101, 0.15); padding: 2px 4px; border-radius: 3px;">${word}</span>`;
                        } else {
                            highlightedText += word;
                        }
                    });

                    let html = `
                        <div style="margin-bottom: 20px;">
                            <strong style="color: #c53030;">Your Text (errors highlighted):</strong>
                            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(245, 101, 101, 0.3); line-height: 1.8;">
                                ${highlightedText}
                            </div>
                        </div>
                        <div>
                            <strong style="color: #2f855a;">Corrected Text:</strong>
                            <div style="background: rgba(72, 187, 120, 0.1); padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(72, 187, 120, 0.3); color: #2d3748; line-height: 1.8;">
                                ${correctedText}
                            </div>
                        </div>
                    `;

                    feedbackDiv.style.background = 'rgba(245, 101, 101, 0.05)';
                    feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                    feedbackDiv.style.color = '#2d3748';
                    feedbackDiv.innerHTML = html;

                    window.grammarCheckResult.corrected = correctedText;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                } else {
                    feedbackDiv.style.background = 'rgba(72, 187, 120, 0.1)';
                    feedbackDiv.style.border = '1px solid rgba(72, 187, 120, 0.3)';
                    feedbackDiv.style.color = '#2f855a';
                    feedbackDiv.innerHTML = '✓ Perfect! No grammar or spelling errors detected!';

                    window.grammarCheckResult.corrected = text;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                }
            } catch (error) {
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Unable to check grammar. Error: ' + error.message;
            }
        }

        function sendToTeacher() {
            const essayTitle = "A1-21: Past Simple - Regular Verbs";
            const originalText = window.grammarCheckResult.original;
            const correctedText = window.grammarCheckResult.corrected;

            const emailBody = `Essay Title: ${essayTitle}\n\nOriginal Essay:\n${originalText}\n\nWe made some changes:\n\nCorrected Text:\n${correctedText}`;
            const mailtoLink = `mailto:?subject=${encodeURIComponent(essayTitle)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        }
    </script>
</body>
</html>