<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B1-41: Present Perfect Simple - Experiences, Unfinished Time</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            flex-direction: column;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .header .website {
            text-align: center;
            margin-top: 8px;
        }

        .header .website a {
            color: #4c51bf;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .header .website a:hover {
            color: #553c9a;
        }

        .header-image {
            width: 120px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .container {
            display: flex;
            height: calc(100vh - 120px);
        }

        .navigation {
            width: 280px;
            background: rgba(45, 55, 72, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item {
            padding: 16px 24px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 500;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .section {
            display: none;
            flex: 1;
            padding: 0;
            overflow: hidden;
            height: 100%;
            background: white;
        }

        .section.active {
            display: flex;
            flex-direction: column;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 30px 80px;
        }

        .slide-content-wrapper {
            position: relative;
            width: 100%;
            max-width: 1400px;
            height: 85%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 20px;
            padding: 25px 35px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #8B7EC8;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .slide-arrow:hover {
            background: #7366B0;
            transform: translateY(-50%) scale(1.1);
        }

        .slide-arrow.prev {
            left: -70px;
        }

        .slide-arrow.next {
            right: -70px;
        }

        .slide-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #D1D5DB;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: #667eea;
            transform: scale(1.3);
        }

        .indicator-dot:hover {
            background: #9CA3AF;
        }

        .slide h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: -0.5px;
        }

        .explanation-box {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 0;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .explanation-box h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .explanation-box p {
            color: #2d3748;
            line-height: 1.5;
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .rule-box {
            background: #e3f2fd;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }

        .rule-box h4 {
            color: #667eea;
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .rule-box p {
            font-size: 1rem;
            color: #2d3748;
            margin: 5px 0;
        }

        .yes-no {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #4299e1;
            color: white;
        }

        .auxiliary {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #48bb78;
            color: white;
        }

        .subject {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #9f7aea;
            color: white;
        }

        .verb {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #ed64a6;
            color: white;
        }

        .example-box {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
        }

        .example-box p {
            margin: 5px 0;
            font-size: 1rem;
            color: #2d3748;
        }

        .note-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .note-box strong {
            color: #856404;
            font-size: 1rem;
        }

        .note-box p {
            color: #856404;
            margin-top: 5px;
            line-height: 1.4;
            font-size: 0.95rem;
        }

        .exercise-container {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 10px;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .exercise-container h3 {
            color: #764ba2;
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-box {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 12px;
            margin: 0;
        }

        .question-box p {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 18px;
            margin: 8px 0;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            font-size: 1.05rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 15px 5px 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .feedback {
            padding: 15px 20px;
            border-radius: 12px;
            margin: 15px 0;
            font-weight: 500;
            font-size: 1.05rem;
            display: none;
        }

        .feedback.correct {
            background: rgba(72, 187, 120, 0.1);
            color: #2f855a;
            border: 1px solid rgba(72, 187, 120, 0.3);
            display: block;
        }

        .feedback.incorrect {
            background: rgba(245, 101, 101, 0.1);
            color: #c53030;
            border: 1px solid rgba(245, 101, 101, 0.3);
            display: block;
        }

        ul {
            margin-left: 25px;
            line-height: 1.6;
        }

        li {
            margin: 6px 0;
            font-size: 1.05rem;
            color: #2d3748;
        }

        li strong {
            color: #667eea;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 10px;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 10px;
            border: 1px solid #e2e8f0;
            font-size: 1rem;
            text-align: center;
        }

        .comparison-table tr:nth-child(even) {
            background: #f7fafc;
        }

        .explanation-box::-webkit-scrollbar {
            width: 8px;
        }

        .explanation-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }

        .formula-box {
            background: #e6fffa;
            border: 2px solid #319795;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.3rem;
        }

        .grid-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .grid-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .grid-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .reading-text {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.9;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
        }

        .reading-text p {
            margin: 12px 0;
        }

        .highlight-question {
            background: #bee3f8;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .highlight-answer {
            background: #c6f6d5;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .example-sentence {
            font-size: 1.1rem;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>B1-41: Present Perfect Simple - Experiences, Unfinished Time</h1>
            <div class="website">
                <a href="https://www.mimlanguageservices.com/" target="_blank">mimlanguageservices</a>
            </div>
        </div>
        <a href="https://www.mimlanguageservices.com/" target="_blank">
            <img src="https://static.wixstatic.com/media/593d03_8958d96b0f6d4d1ea9dffa7f89bffe8b~mv2.png" alt="ESL Logo" class="header-image">
        </a>
    </div>

    <div class="container">
        <div class="navigation">
            <div class="nav-item active" onclick="showSection('explanation', this)">Explanation</div>
            <div class="nav-item" onclick="showSection('examples', this)">Examples</div>
            <div class="nav-item" onclick="showSection('reading', this)">Reading</div>
            <div class="nav-item" onclick="showSection('media', this)">Media</div>
            <div class="nav-item" onclick="showSection('practice', this)">Practice</div>
            <div class="nav-item" onclick="showSection('writing', this)">Writing</div>
        </div>

        <div class="content">
            <!-- Explanation Section -->
            <div class="section active" id="explanation">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="explanation">
                            <h2>Welcome to Present Perfect Simple!</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.2rem; text-align: center; margin: 20px 0;">
                                    Today we will learn the <span class="yes-no">PRESENT PERFECT SIMPLE</span> in English!
                                </p>
                                <p style="font-size: 1.1rem; text-align: center;">
                                    This tense connects the PAST to the PRESENT.
                                </p>
                                <div class="formula-box">
                                    <span class="auxiliary">HAVE/HAS</span> + <span class="verb">PAST PARTICIPLE</span>
                                </div>
                                <p style="text-align: center; font-size: 1.1rem;">
                                    Example: I <strong>have visited</strong> Paris. / She <strong>has lived</strong> here for 5 years.
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>How to Form the Present Perfect</h2>
                            <div class="explanation-box">
                                <h3>The Structure</h3>

                                <div class="formula-box">
                                    <span class="subject">Subject</span> + <span class="auxiliary">have/has</span> + <span class="verb">past participle</span>
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Subject</th>
                                        <th>Auxiliary</th>
                                        <th>Past Participle</th>
                                        <th>Full Sentence</th>
                                    </tr>
                                    <tr>
                                        <td>I/You/We/They</td>
                                        <td>have</td>
                                        <td>visited</td>
                                        <td>I have visited Paris.</td>
                                    </tr>
                                    <tr>
                                        <td>He/She/It</td>
                                        <td>has</td>
                                        <td>eaten</td>
                                        <td>She has eaten sushi.</td>
                                    </tr>
                                    <tr>
                                        <td>We</td>
                                        <td>have</td>
                                        <td>seen</td>
                                        <td>We have seen that movie.</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Regular vs Irregular:</h4>
                                    <p>• Regular: walk → walk<strong>ed</strong>, play → play<strong>ed</strong></p>
                                    <p>• Irregular: go → <strong>gone</strong>, see → <strong>seen</strong>, eat → <strong>eaten</strong></p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Use 1: Life Experiences</h2>
                            <div class="explanation-box">
                                <h3>Talking about experiences without a specific time</h3>

                                <div class="formula-box">
                                    I <span class="auxiliary">have</span> + <span class="verb">past participle</span> (at some point in my life)
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Present Perfect</th>
                                        <th>Meaning</th>
                                    </tr>
                                    <tr>
                                        <td>I have been to Japan.</td>
                                        <td>I visited Japan (sometime in my life)</td>
                                    </tr>
                                    <tr>
                                        <td>She has tried sushi.</td>
                                        <td>She ate sushi (at least once before)</td>
                                    </tr>
                                    <tr>
                                        <td>They have seen that movie.</td>
                                        <td>They watched it (we don't know when)</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Key Words for Experiences:</h4>
                                    <p>• <strong>ever</strong> (in questions): Have you ever been abroad?</p>
                                    <p>• <strong>never</strong> (negative): I have never eaten insects.</p>
                                    <p>• <strong>before</strong>: Have you traveled alone before?</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Use 2: Unfinished Time - FOR</h2>
                            <div class="explanation-box">
                                <h3>Actions that started in the past and continue NOW</h3>

                                <div class="formula-box">
                                    <span class="auxiliary">have/has</span> + <span class="verb">past participle</span> + <span class="yes-no">FOR</span> + period of time
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Present Perfect with FOR</th>
                                        <th>Period of Time</th>
                                    </tr>
                                    <tr>
                                        <td>I have lived here for 5 years.</td>
                                        <td>for 5 years (and I still live here)</td>
                                    </tr>
                                    <tr>
                                        <td>She has worked there for 3 months.</td>
                                        <td>for 3 months (and she still works there)</td>
                                    </tr>
                                    <tr>
                                        <td>We have known each other for 10 years.</td>
                                        <td>for 10 years (and we still know each other)</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>FOR = duration of time:</h4>
                                    <p>• for 2 hours, for 3 days, for a week, for months, for years</p>
                                    <p>• The action started in the past and continues NOW</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Use 3: Unfinished Time - SINCE</h2>
                            <div class="explanation-box">
                                <h3>Actions that started at a specific point and continue NOW</h3>

                                <div class="formula-box">
                                    <span class="auxiliary">have/has</span> + <span class="verb">past participle</span> + <span class="yes-no">SINCE</span> + starting point
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Present Perfect with SINCE</th>
                                        <th>Starting Point</th>
                                    </tr>
                                    <tr>
                                        <td>I have lived here since 2019.</td>
                                        <td>since 2019 (from 2019 until now)</td>
                                    </tr>
                                    <tr>
                                        <td>She has worked there since January.</td>
                                        <td>since January (from January until now)</td>
                                    </tr>
                                    <tr>
                                        <td>We have known each other since childhood.</td>
                                        <td>since childhood (from childhood until now)</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>SINCE = starting point in time:</h4>
                                    <p>• since Monday, since 2020, since last week, since I was a child</p>
                                    <p>• The action started at that point and continues NOW</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Common Mistakes</h2>
                            <div class="explanation-box">
                                <h3>❌ Mistake 1: Using Past Simple instead of Present Perfect</h3>
                                <div class="example-box">
                                    <p>❌ I <del>visited</del> Paris. (when? we need more info) → ✅ I <strong>have visited</strong> Paris. (life experience)</p>
                                    <p>❌ She <del>lived</del> here for 5 years. → ✅ She <strong>has lived</strong> here for 5 years.</p>
                                </div>

                                <h3>❌ Mistake 2: Using FOR instead of SINCE</h3>
                                <div class="example-box">
                                    <p>❌ I have lived here <del>for</del> 2019. → ✅ I have lived here <strong>since</strong> 2019.</p>
                                    <p>❌ They have known each other <del>for</del> January. → ✅ They have known each other <strong>since</strong> January.</p>
                                </div>

                                <h3>❌ Mistake 3: Using SINCE instead of FOR</h3>
                                <div class="example-box">
                                    <p>❌ I have studied English <del>since</del> 3 years. → ✅ I have studied English <strong>for</strong> 3 years.</p>
                                    <p>❌ She has worked there <del>since</del> 6 months. → ✅ She has worked there <strong>for</strong> 6 months.</p>
                                </div>

                                <h3>❌ Mistake 4: Using Present Perfect with specific past time</h3>
                                <div class="example-box">
                                    <p>❌ I <del>have visited</del> Paris last year. → ✅ I <strong>visited</strong> Paris last year. (use Past Simple)</p>
                                    <p>❌ She <del>has seen</del> that movie yesterday. → ✅ She <strong>saw</strong> that movie yesterday.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="explanation-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="section" id="examples">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="examples">
                            <h2>Experience Examples</h2>
                            <div class="explanation-box">
                                <h3>Life Experiences (no specific time):</h3>
                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Travel:</strong><br><br>
                                        • I <strong>have been to</strong> Spain.<br>
                                        • She <strong>has visited</strong> 10 countries.<br>
                                        • They <strong>have traveled</strong> around Europe.<br>
                                        • We <strong>have never been</strong> to Asia.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Food & Activities:</strong><br><br>
                                        • I <strong>have tried</strong> sushi.<br>
                                        • He <strong>has eaten</strong> insects before.<br>
                                        • She <strong>has never driven</strong> a car.<br>
                                        • They <strong>have played</strong> guitar.
                                    </div>
                                </div>

                                <h3>Questions with "ever":</h3>
                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Experience Questions:</strong><br><br>
                                        • <strong>Have</strong> you <strong>ever been</strong> abroad?<br>
                                        • <strong>Has</strong> she <strong>ever seen</strong> snow?<br>
                                        • <strong>Have</strong> they <strong>ever met</strong> a celebrity?<br>
                                        • <strong>Have</strong> you <strong>ever ridden</strong> a horse?
                                    </div>
                                    <div class="grid-card">
                                        <strong>Negative Answers:</strong><br><br>
                                        • No, I <strong>have never been</strong> abroad.<br>
                                        • No, she <strong>has never seen</strong> snow.<br>
                                        • They <strong>have never met</strong> anyone famous.<br>
                                        • I <strong>have never tried</strong> that.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>FOR and SINCE Examples</h2>
                            <div class="explanation-box">
                                <table class="comparison-table">
                                    <tr>
                                        <th>FOR (duration)</th>
                                        <th>SINCE (starting point)</th>
                                    </tr>
                                    <tr>
                                        <td>I have lived here <strong>for 5 years</strong>.</td>
                                        <td>I have lived here <strong>since 2019</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>She has worked there <strong>for 3 months</strong>.</td>
                                        <td>She has worked there <strong>since January</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>We have known each other <strong>for 10 years</strong>.</td>
                                        <td>We have known each other <strong>since childhood</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>They have studied English <strong>for 2 years</strong>.</td>
                                        <td>They have studied English <strong>since 2023</strong>.</td>
                                    </tr>
                                </table>

                                <h3>Complete Sentences:</h3>
                                <div class="example-box">
                                    <p>• I <strong>have been</strong> a teacher <strong>for 10 years</strong>.</p>
                                    <p>• She <strong>has played</strong> piano <strong>since she was 5</strong>.</p>
                                    <p>• We <strong>have lived</strong> in this house <strong>for a long time</strong>.</p>
                                    <p>• They <strong>have been</strong> friends <strong>since university</strong>.</p>
                                    <p>• He <strong>has worked</strong> here <strong>for 6 months</strong>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Summary Table</h2>
                            <div class="explanation-box">
                                <h3>Quick Reference Guide:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Use</th>
                                        <th>Structure</th>
                                        <th>Examples</th>
                                    </tr>
                                    <tr>
                                        <td><strong>Life Experiences</strong></td>
                                        <td>have/has + past participle</td>
                                        <td>I have visited Paris. She has tried sushi.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Duration (FOR)</strong></td>
                                        <td>have/has + past participle + for + period</td>
                                        <td>I have lived here for 5 years.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Starting Point (SINCE)</strong></td>
                                        <td>have/has + past participle + since + point</td>
                                        <td>She has worked here since 2020.</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Remember:</h4>
                                    <p>Present Perfect = past action connected to NOW</p>
                                    <p>FOR = duration | SINCE = starting point</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="examples-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                    </div>
                </div>
            </div>

            <!-- Reading Section -->
            <div class="section" id="reading">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="reading">
                            <h2>Reading: Maria's Life</h2>
                            <div class="explanation-box">
                                <div class="reading-text">
                                    <p><strong>My Life Experiences</strong></p>

                                    <p>My name is Maria. I <span class="highlight-question">have lived</span> in Mexico City <span class="highlight-question">for 30 years</span>. I <span class="highlight-question">have worked</span> as a teacher <span class="highlight-question">since 2015</span>.</p>

                                    <p>I love to travel. I <span class="highlight-question">have visited</span> many countries in my life. I <span class="highlight-question">have been to</span> the United States, Canada, and Spain. I <span class="highlight-question">have never been</span> to Asia, but I want to go someday.</p>

                                    <p><span class="highlight-question">Have</span> you <span class="highlight-question">ever tried</span> Mexican food? I <span class="highlight-question">have eaten</span> tacos my whole life! I <span class="highlight-question">have also tried</span> Japanese, Italian, and Chinese food.</p>

                                    <p>I <span class="highlight-question">have studied</span> English <span class="highlight-question">for 10 years</span>. I started in 2014, so I <span class="highlight-question">have been</span> learning <span class="highlight-question">since then</span>. My English <span class="highlight-question">has improved</span> a lot!</p>

                                    <p>My husband and I <span class="highlight-question">have been married</span> <span class="highlight-question">for 12 years</span>. We <span class="highlight-question">have known</span> each other <span class="highlight-question">since 2010</span>. We <span class="highlight-question">have had</span> many adventures together!</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="reading">
                            <h2>Reading Analysis</h2>
                            <div class="explanation-box">
                                <h3>Life Experiences (no specific time):</h3>
                                <div class="example-box">
                                    <p>• <strong>have visited</strong> many countries (sometime in life)</p>
                                    <p>• <strong>have been to</strong> the US, Canada, Spain (experiences)</p>
                                    <p>• <strong>have never been</strong> to Asia (negative experience)</p>
                                    <p>• <strong>Have you ever tried</strong> Mexican food? (question about experience)</p>
                                    <p>• <strong>have eaten</strong> tacos, <strong>have also tried</strong> other foods</p>
                                </div>

                                <h3>Unfinished Time with FOR (duration):</h3>
                                <div class="example-box">
                                    <p>• <strong>have lived</strong> in Mexico City <strong>for 30 years</strong> (still living there)</p>
                                    <p>• <strong>have studied</strong> English <strong>for 10 years</strong> (still studying)</p>
                                    <p>• <strong>have been married for 12 years</strong> (still married)</p>
                                </div>

                                <h3>Unfinished Time with SINCE (starting point):</h3>
                                <div class="example-box">
                                    <p>• <strong>have worked</strong> as a teacher <strong>since 2015</strong> (from 2015 to now)</p>
                                    <p>• <strong>have been</strong> learning <strong>since then</strong> (from 2014 to now)</p>
                                    <p>• <strong>have known</strong> each other <strong>since 2010</strong> (from 2010 to now)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="reading-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="section" id="media">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="media">
                            <h2>Video: Present Perfect Simple</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Watch this video about the Present Perfect Simple:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/8NDDEM3lDmI"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Learn how to form and use the Present Perfect tense
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="media">
                            <h2>Video: FOR and SINCE</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Understanding FOR and SINCE:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/VT5iUC8YEZI"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Learn the difference between FOR and SINCE
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="media-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div class="section" id="practice">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="practice">
                            <h2>Practice 1: have or has?</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"She ___ visited Paris." (have or has?)</p>
                                    <input type="text" id="q1" placeholder="Type: have or has" onkeypress="if(event.key==='Enter') checkAnswer1()">
                                    <button class="check-button" onclick="checkAnswer1()">Check Answer</button>
                                    <div id="feedback1" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 2: Past Participle</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"I have ___ sushi." (eat - past participle)</p>
                                    <input type="text" id="q2" placeholder="Type the past participle" onkeypress="if(event.key==='Enter') checkAnswer2()">
                                    <button class="check-button" onclick="checkAnswer2()">Check Answer</button>
                                    <div id="feedback2" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 3: for or since?</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"I have lived here ___ 2019." (for or since?)</p>
                                    <input type="text" id="q3" placeholder="Type: for or since" onkeypress="if(event.key==='Enter') checkAnswer3()">
                                    <button class="check-button" onclick="checkAnswer3()">Check Answer</button>
                                    <div id="feedback3" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 4: for or since?</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"She has worked there ___ 5 years." (for or since?)</p>
                                    <input type="text" id="q4" placeholder="Type: for or since" onkeypress="if(event.key==='Enter') checkAnswer4()">
                                    <button class="check-button" onclick="checkAnswer4()">Check Answer</button>
                                    <div id="feedback4" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 5: Complete the sentence</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"Have you ever ___ to Japan?" (be - past participle)</p>
                                    <input type="text" id="q5" placeholder="Type: been" onkeypress="if(event.key==='Enter') checkAnswer5()">
                                    <button class="check-button" onclick="checkAnswer5()">Check Answer</button>
                                    <div id="feedback5" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 6: Fix the mistake</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Fix: "I have visited Paris last year." → "___"</p>
                                    <input type="text" id="q6" placeholder="Type the correct sentence" onkeypress="if(event.key==='Enter') checkAnswer6()">
                                    <button class="check-button" onclick="checkAnswer6()">Check Answer</button>
                                    <div id="feedback6" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 7: for or since?</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"They have known each other ___ childhood." (for or since?)</p>
                                    <input type="text" id="q7" placeholder="Type: for or since" onkeypress="if(event.key==='Enter') checkAnswer7()">
                                    <button class="check-button" onclick="checkAnswer7()">Check Answer</button>
                                    <div id="feedback7" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 8: Complete the question</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"___ she ever tried sushi?" (Have or Has?)</p>
                                    <input type="text" id="q8" placeholder="Type: Have or Has" onkeypress="if(event.key==='Enter') checkAnswer8()">
                                    <button class="check-button" onclick="checkAnswer8()">Check Answer</button>
                                    <div id="feedback8" class="feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="practice-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                        <span class="indicator-dot" onclick="goToSlide(7)"></span>
                        <span class="indicator-dot" onclick="goToSlide(8)"></span>
                    </div>
                </div>
            </div>

            <!-- Writing Section -->
            <div class="section" id="writing">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="writing" style="overflow-y: auto;">
                            <h2>Writing Practice</h2>
                            <div class="explanation-box">
                                <h3>Write 10 sentences about your life experiences</h3>
                                <p style="margin-bottom: 15px;">Use the Present Perfect Simple correctly. Talk about your experiences, and use FOR and SINCE.</p>
                                <div class="question-box">
                                    <textarea id="writing1" rows="8" style="width: 100%; padding: 12px; border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 8px; font-size: 1.05rem; font-family: 'Inter', sans-serif; resize: vertical;" spellcheck="true" placeholder="I have visited many countries. I have lived here for 5 years. I have studied English since 2020..."></textarea>
                                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                                        <button class="check-button" onclick="checkGrammar()">Check Grammar</button>
                                        <button id="send-teacher-btn" class="check-button" onclick="sendToTeacher()" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); opacity: 0.5; cursor: not-allowed;" disabled>Send to Teacher</button>
                                    </div>
                                    <div id="grammar-feedback" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;"></div>
                                    <p style="font-size: 0.95rem; color: #666; margin-top: 10px;">Example: I have visited Paris. I have lived here for 5 years. I have studied English since 2020. Have you ever tried sushi?</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="writing-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSlide = 1;
        let currentSection = 'explanation';

        function showSection(sectionName, element) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            document.getElementById(sectionName).classList.add('active');

            if (element) {
                element.classList.add('active');
            }

            currentSection = sectionName;
            currentSlide = 1;

            setTimeout(() => {
                const activeSection = document.querySelector('.section.active');
                const inputField = activeSection.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                }
            }, 100);
        }

        function changeSlide(direction) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            if (slides.length === 1) return;

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide += direction;

            if (currentSlide > slides.length) {
                currentSlide = 1;
            }
            if (currentSlide < 1) {
                currentSlide = slides.length;
            }

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');

            setTimeout(() => {
                const activeSlide = slides[currentSlide - 1];
                const inputField = activeSlide.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                    inputField.value = '';
                }
            }, 100);
        }

        function goToSlide(slideNum) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide = slideNum;

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                changeSlide(-1);
            } else if (e.key === 'ArrowRight') {
                changeSlide(1);
            }
        });

        function checkAnswer1() {
            const answer = document.getElementById('q1').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback1');

            if (answer === 'has') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "She has visited" - Use HAS with he/she/it.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use HAS with he/she/it: She has visited';
            }
        }

        function checkAnswer2() {
            const answer = document.getElementById('q2').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback2');

            if (answer === 'eaten') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "eaten" is the past participle of "eat".';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Past participle of eat is "eaten": I have eaten';
            }
        }

        function checkAnswer3() {
            const answer = document.getElementById('q3').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback3');

            if (answer === 'since') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! "since 2019" - Use SINCE with a starting point.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use SINCE with a specific point in time: since 2019';
            }
        }

        function checkAnswer4() {
            const answer = document.getElementById('q4').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback4');

            if (answer === 'for') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "for 5 years" - Use FOR with a period of time.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use FOR with a period of time: for 5 years';
            }
        }

        function checkAnswer5() {
            const answer = document.getElementById('q5').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback5');

            if (answer === 'been') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! "Have you ever been" - "been" is the past participle of "be".';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Past participle of "be" is "been": Have you ever been';
            }
        }

        function checkAnswer6() {
            const answer = document.getElementById('q6').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback6');

            if (answer === 'i visited paris last year' || answer === 'i visited paris last year.') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Great! Use Past Simple with specific past time: I visited Paris last year.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use Past Simple with specific past time: I visited Paris last year (not have visited)';
            }
        }

        function checkAnswer7() {
            const answer = document.getElementById('q7').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback7');

            if (answer === 'since') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "since childhood" - Use SINCE with a starting point.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use SINCE with a starting point: since childhood';
            }
        }

        function checkAnswer8() {
            const answer = document.getElementById('q8').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback8');

            if (answer === 'has') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "Has she ever tried" - Use HAS with he/she/it.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use HAS with he/she/it: Has she ever tried';
            }
        }

        async function checkGrammar() {
            const text = document.getElementById('writing1').value;
            const feedbackDiv = document.getElementById('grammar-feedback');
            const textarea = document.getElementById('writing1');

            if (!text.trim()) {
                feedbackDiv.style.display = 'block';
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Please write some sentences first!';
                return;
            }

            textarea.style.display = 'none';
            window.grammarCheckResult = { original: text, corrected: '' };

            feedbackDiv.style.display = 'block';
            feedbackDiv.style.background = 'rgba(102, 126, 234, 0.1)';
            feedbackDiv.style.border = '1px solid rgba(102, 126, 234, 0.3)';
            feedbackDiv.style.color = '#667eea';
            feedbackDiv.innerHTML = '⏳ Checking your grammar and spelling...';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyBTH0NmDb3cqjrY6p7YROPIJel-iCxSxzs`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a strict grammar checker. Fix grammar and spelling errors. Do not change the meaning, style, or add punctuation unless absolutely necessary. Profanities are acceptable, but don't use shortened informal words like "cuz" or "wanna"\n\nText: "${text}"\n\nReturn only the corrected text with minimal changes.`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                const correctedText = data.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || text;

                if (correctedText !== text && correctedText.toLowerCase() !== text.toLowerCase()) {
                    const originalWords = text.split(/(\s+)/);
                    const correctedWords = correctedText.split(/(\s+)/);
                    let highlightedText = '';

                    originalWords.forEach((word, i) => {
                        if (word.match(/\s+/)) {
                            highlightedText += word;
                        } else if (correctedWords[i] && word.toLowerCase() !== correctedWords[i].toLowerCase()) {
                            highlightedText += `<span style="color: #e53e3e; font-weight: 600; background: rgba(245, 101, 101, 0.15); padding: 2px 4px; border-radius: 3px;">${word}</span>`;
                        } else {
                            highlightedText += word;
                        }
                    });

                    let html = `
                        <div style="margin-bottom: 20px;">
                            <strong style="color: #c53030;">Your Text (errors highlighted):</strong>
                            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(245, 101, 101, 0.3); line-height: 1.8;">
                                ${highlightedText}
                            </div>
                        </div>
                        <div>
                            <strong style="color: #2f855a;">Corrected Text:</strong>
                            <div style="background: rgba(72, 187, 120, 0.1); padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(72, 187, 120, 0.3); color: #2d3748; line-height: 1.8;">
                                ${correctedText}
                            </div>
                        </div>
                    `;

                    feedbackDiv.style.background = 'rgba(245, 101, 101, 0.05)';
                    feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                    feedbackDiv.style.color = '#2d3748';
                    feedbackDiv.innerHTML = html;

                    window.grammarCheckResult.corrected = correctedText;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                } else {
                    feedbackDiv.style.background = 'rgba(72, 187, 120, 0.1)';
                    feedbackDiv.style.border = '1px solid rgba(72, 187, 120, 0.3)';
                    feedbackDiv.style.color = '#2f855a';
                    feedbackDiv.innerHTML = '✓ Perfect! No grammar or spelling errors detected!';

                    window.grammarCheckResult.corrected = text;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                }
            } catch (error) {
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Unable to check grammar. Error: ' + error.message;
            }
        }

        function sendToTeacher() {
            const essayTitle = "B1-41: Present Perfect Simple - Experiences, Unfinished Time";
            const originalText = window.grammarCheckResult.original;
            const correctedText = window.grammarCheckResult.corrected;

            const emailBody = `Essay Title: ${essayTitle}\n\nOriginal Essay:\n${originalText}\n\nWe made some changes:\n\nCorrected Text:\n${correctedText}`;
            const mailtoLink = `mailto:?subject=${encodeURIComponent(essayTitle)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        }
    </script>
</body>
</html>