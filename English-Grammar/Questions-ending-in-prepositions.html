<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questions Ending in Prepositions</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            flex-direction: column;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .header .website {
            text-align: center;
            margin-top: 8px;
        }

        .header .website a {
            color: #4c51bf;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .header .website a:hover {
            color: #553c9a;
        }

        .header-image {
            width: 120px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .container {
            display: flex;
            height: calc(100vh - 120px);
        }

        .navigation {
            width: 280px;
            background: rgba(45, 55, 72, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item {
            padding: 16px 24px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 500;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .section {
            display: none;
            flex: 1;
            padding: 0;
            overflow: hidden;
            height: 100%;
            background: white;
        }

        .section.active {
            display: flex;
            flex-direction: column;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 30px 80px;
        }

        .slide-content-wrapper {
            position: relative;
            width: 100%;
            max-width: 1400px;
            height: 85%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 20px;
            padding: 25px 35px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #8B7EC8;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .slide-arrow:hover {
            background: #7366B0;
            transform: translateY(-50%) scale(1.1);
        }

        .slide-arrow.prev {
            left: -70px;
        }

        .slide-arrow.next {
            right: -70px;
        }

        .slide-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #D1D5DB;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: #667eea;
            transform: scale(1.3);
        }

        .indicator-dot:hover {
            background: #9CA3AF;
        }

        .slide h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: -0.5px;
        }

        .explanation-box {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 0;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .explanation-box h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .explanation-box p {
            color: #2d3748;
            line-height: 1.5;
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .rule-box {
            background: #e3f2fd;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }

        .rule-box h4 {
            color: #667eea;
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .rule-box p {
            font-size: 1rem;
            color: #2d3748;
            margin: 5px 0;
        }

        .yes-no {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #4299e1;
            color: white;
        }

        .auxiliary {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #48bb78;
            color: white;
        }

        .subject {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #9f7aea;
            color: white;
        }

        .verb {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #ed64a6;
            color: white;
        }

        .example-box {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
        }

        .example-box p {
            margin: 5px 0;
            font-size: 1rem;
            color: #2d3748;
        }

        .note-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .note-box strong {
            color: #856404;
            font-size: 1rem;
        }

        .note-box p {
            color: #856404;
            margin-top: 5px;
            line-height: 1.4;
            font-size: 0.95rem;
        }

        .exercise-container {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 10px;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .exercise-container h3 {
            color: #764ba2;
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-box {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 12px;
            margin: 0;
        }

        .question-box p {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 18px;
            margin: 8px 0;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            font-size: 1.05rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 15px 5px 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .feedback {
            padding: 15px 20px;
            border-radius: 12px;
            margin: 15px 0;
            font-weight: 500;
            font-size: 1.05rem;
            display: none;
        }

        .feedback.correct {
            background: rgba(72, 187, 120, 0.1);
            color: #2f855a;
            border: 1px solid rgba(72, 187, 120, 0.3);
            display: block;
        }

        .feedback.incorrect {
            background: rgba(245, 101, 101, 0.1);
            color: #c53030;
            border: 1px solid rgba(245, 101, 101, 0.3);
            display: block;
        }

        ul {
            margin-left: 25px;
            line-height: 1.6;
        }

        li {
            margin: 6px 0;
            font-size: 1.05rem;
            color: #2d3748;
        }

        li strong {
            color: #667eea;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 10px;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 10px;
            border: 1px solid #e2e8f0;
            font-size: 1rem;
            text-align: center;
        }

        .comparison-table tr:nth-child(even) {
            background: #f7fafc;
        }

        .explanation-box::-webkit-scrollbar {
            width: 8px;
        }

        .explanation-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }

        .formula-box {
            background: #e6fffa;
            border: 2px solid #319795;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.3rem;
        }

        .grid-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .grid-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .grid-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .reading-text {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.9;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
        }

        .reading-text p {
            margin: 12px 0;
        }

        .highlight-question {
            background: #bee3f8;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .highlight-answer {
            background: #c6f6d5;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .example-sentence {
            font-size: 1.1rem;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>Questions Ending in Prepositions</h1>
            <div class="website">
                <a href="https://www.mimlanguageservices.com/" target="_blank">mimlanguageservices</a>
            </div>
        </div>
        <a href="https://www.mimlanguageservices.com/" target="_blank">
            <img src="https://static.wixstatic.com/media/593d03_8958d96b0f6d4d1ea9dffa7f89bffe8b~mv2.png" alt="ESL Logo" class="header-image">
        </a>
    </div>

    <div class="container">
        <div class="navigation">
            <div class="nav-item active" onclick="showSection('explanation', this)">Explanation</div>
            <div class="nav-item" onclick="showSection('examples', this)">Examples</div>
            <div class="nav-item" onclick="showSection('reading', this)">Reading</div>
            <div class="nav-item" onclick="showSection('media', this)">Media</div>
            <div class="nav-item" onclick="showSection('practice', this)">Practice</div>
            <div class="nav-item" onclick="showSection('writing', this)">Writing</div>
        </div>

        <div class="content">
            <!-- Explanation Section -->
            <div class="section active" id="explanation">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="explanation">
                            <h2>Welcome to Questions Ending in Prepositions!</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.2rem; text-align: center; margin: 20px 0;">
                                    Today we will learn about <span class="yes-no">QUESTIONS ENDING IN PREPOSITIONS</span>
                                </p>
                                <p style="font-size: 1.1rem; text-align: center;">
                                    In natural English, we often end questions with prepositions.
                                </p>
                                <div class="formula-box">
                                    <span class="yes-no">Question word</span> + <span class="verb">verb</span> + <span class="subject">subject</span> + <span class="auxiliary">preposition</span> ?
                                </div>
                                <p style="text-align: center; font-size: 1.1rem;">
                                    Example: What are you thinking <strong>about</strong>?
                                </p>
                                <div class="rule-box">
                                    <h4>Key Points:</h4>
                                    <p>• Ending with prepositions is NATURAL and CORRECT in spoken English</p>
                                    <p>• It sounds more conversational and friendly</p>
                                    <p>• Formal English puts the preposition before the question word</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Common Prepositions in Questions</h2>
                            <div class="explanation-box">
                                <h3>Most Common Prepositions Used:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Preposition</th>
                                        <th>Natural Question</th>
                                        <th>Formal Version</th>
                                    </tr>
                                    <tr>
                                        <td><strong>about</strong></td>
                                        <td>What are you talking about?</td>
                                        <td>About what are you talking?</td>
                                    </tr>
                                    <tr>
                                        <td><strong>for</strong></td>
                                        <td>What is this tool for?</td>
                                        <td>For what is this tool?</td>
                                    </tr>
                                    <tr>
                                        <td><strong>with</strong></td>
                                        <td>Who are you going with?</td>
                                        <td>With whom are you going?</td>
                                    </tr>
                                    <tr>
                                        <td><strong>to</strong></td>
                                        <td>Who did you speak to?</td>
                                        <td>To whom did you speak?</td>
                                    </tr>
                                    <tr>
                                        <td><strong>at</strong></td>
                                        <td>What are you looking at?</td>
                                        <td>At what are you looking?</td>
                                    </tr>
                                    <tr>
                                        <td><strong>from</strong></td>
                                        <td>Where are you from?</td>
                                        <td>From where are you?</td>
                                    </tr>
                                </table>

                                <div class="note-box">
                                    <strong>Remember!</strong>
                                    <p>The natural version (ending with preposition) is what native speakers use in everyday conversation!</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Pattern with "WHAT"</h2>
                            <div class="explanation-box">
                                <h3>What + be/do + subject + preposition?</h3>

                                <div class="formula-box">
                                    <span class="yes-no">What</span> + <span class="verb">auxiliary</span> + <span class="subject">subject</span> + <span class="auxiliary">preposition</span> ?
                                </div>

                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>About:</strong><br><br>
                                        • What are you thinking about?<br>
                                        • What is this book about?<br>
                                        • What are you worried about?<br>
                                        • What did you talk about?
                                    </div>
                                    <div class="grid-card">
                                        <strong>For:</strong><br><br>
                                        • What is this for?<br>
                                        • What are you waiting for?<br>
                                        • What did you buy that for?<br>
                                        • What are you looking for?
                                    </div>
                                    <div class="grid-card">
                                        <strong>At:</strong><br><br>
                                        • What are you looking at?<br>
                                        • What are you staring at?<br>
                                        • What are you laughing at?<br>
                                        • What are you pointing at?
                                    </div>
                                    <div class="grid-card">
                                        <strong>On:</strong><br><br>
                                        • What does it depend on?<br>
                                        • What are you working on?<br>
                                        • What did you spend money on?<br>
                                        • What is this based on?
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Pattern with "WHO"</h2>
                            <div class="explanation-box">
                                <h3>Who + auxiliary + subject + verb + preposition?</h3>

                                <div class="formula-box">
                                    <span class="yes-no">Who</span> + <span class="verb">auxiliary</span> + <span class="subject">subject</span> + verb + <span class="auxiliary">preposition</span> ?
                                </div>

                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>With:</strong><br><br>
                                        • Who are you going with?<br>
                                        • Who did you talk with?<br>
                                        • Who are you working with?<br>
                                        • Who did you come with?
                                    </div>
                                    <div class="grid-card">
                                        <strong>To:</strong><br><br>
                                        • Who are you talking to?<br>
                                        • Who did you give it to?<br>
                                        • Who does this belong to?<br>
                                        • Who are you listening to?
                                    </div>
                                    <div class="grid-card">
                                        <strong>For:</strong><br><br>
                                        • Who are you waiting for?<br>
                                        • Who did you buy it for?<br>
                                        • Who are you looking for?<br>
                                        • Who did you vote for?
                                    </div>
                                    <div class="grid-card">
                                        <strong>About:</strong><br><br>
                                        • Who are you talking about?<br>
                                        • Who did you dream about?<br>
                                        • Who are you thinking about?<br>
                                        • Who are you worried about?
                                    </div>
                                </div>

                                <div class="note-box">
                                    <strong>Formal Alternative:</strong>
                                    <p>In very formal English: "With whom are you going?" But this sounds old-fashioned!</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Pattern with "WHERE"</h2>
                            <div class="explanation-box">
                                <h3>Where + auxiliary + subject + verb + preposition?</h3>

                                <div class="formula-box">
                                    <span class="yes-no">Where</span> + <span class="verb">auxiliary</span> + <span class="subject">subject</span> + verb + <span class="auxiliary">preposition</span> ?
                                </div>

                                <h3>Common Examples:</h3>
                                <div class="example-box">
                                    <p>• <strong>Where are you from?</strong> (origin)</p>
                                    <p>• <strong>Where are you going to?</strong> (destination)</p>
                                    <p>• <strong>Where did you come from?</strong> (origin)</p>
                                    <p>• <strong>Where did you hear about it?</strong> (source)</p>
                                    <p>• <strong>Where are you calling from?</strong> (location)</p>
                                    <p>• <strong>Where did you get that from?</strong> (source)</p>
                                </div>

                                <div class="note-box">
                                    <strong>Special Note:</strong>
                                    <p>"Where are you from?" is the ONLY correct way to ask about someone's origin. "From where are you?" is NOT used!</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Common Mistakes</h2>
                            <div class="explanation-box">
                                <h3>Mistake 1: Trying to sound too formal</h3>
                                <div class="example-box">
                                    <p>✗ For what are you looking?</p>
                                    <p>✗ About what are you thinking?</p>
                                    <p>✓ What are you looking for?</p>
                                    <p>✓ What are you thinking about?</p>
                                    <p><strong>Note:</strong> The preposition-at-end version sounds MUCH more natural!</p>
                                </div>

                                <h3>Mistake 2: Forgetting the preposition</h3>
                                <div class="example-box">
                                    <p>✗ Who are you talking?</p>
                                    <p>✓ Who are you talking to?</p>
                                    <p>✗ What are you looking?</p>
                                    <p>✓ What are you looking for?</p>
                                    <p><strong>Note:</strong> The preposition is NECESSARY for meaning!</p>
                                </div>

                                <h3>Mistake 3: Using wrong preposition</h3>
                                <div class="example-box">
                                    <p>✗ What are you thinking for?</p>
                                    <p>✓ What are you thinking about?</p>
                                    <p>✗ Who are you going for?</p>
                                    <p>✓ Who are you going with?</p>
                                    <p><strong>Note:</strong> Learn which verbs go with which prepositions!</p>
                                </div>

                                <h3>Mistake 4: Double prepositions</h3>
                                <div class="example-box">
                                    <p>✗ Where are you from from?</p>
                                    <p>✓ Where are you from?</p>
                                    <p>✗ Who are you with with?</p>
                                    <p>✓ Who are you with?</p>
                                    <p><strong>Note:</strong> Use the preposition only ONCE at the end!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="explanation-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="section" id="examples">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="examples">
                            <h2>Everyday Conversation Examples</h2>
                            <div class="explanation-box">
                                <h3>Real-life situations using prepositions at the end:</h3>

                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Meeting People:</strong><br><br>
                                        • Where are you from?<br>
                                        • What do you do for a living?<br>
                                        • Who did you come with?<br>
                                        • What brings you here?<br>
                                        • What company do you work for?
                                    </div>
                                    <div class="grid-card">
                                        <strong>Shopping:</strong><br><br>
                                        • What are you looking for?<br>
                                        • How much did you pay for that?<br>
                                        • Where did you get it from?<br>
                                        • What size are you looking for?<br>
                                        • Who are you buying it for?
                                    </div>
                                    <div class="grid-card">
                                        <strong>At Work:</strong><br><br>
                                        • What are you working on?<br>
                                        • Who are you meeting with?<br>
                                        • What time is the meeting at?<br>
                                        • What did you talk about?<br>
                                        • What does the project depend on?
                                    </div>
                                    <div class="grid-card">
                                        <strong>With Friends:</strong><br><br>
                                        • What are you up to?<br>
                                        • What are you thinking about?<br>
                                        • Who are you going out with?<br>
                                        • What movie did you decide on?<br>
                                        • Where should we go to?
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Common Phrasal Verb Questions</h2>
                            <div class="explanation-box">
                                <h3>Questions with phrasal verbs naturally end in prepositions:</h3>

                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Look:</strong><br><br>
                                        • What are you looking for?<br>
                                        • Who are you looking after?<br>
                                        • What are you looking forward to?<br>
                                        • What are you looking into?<br>
                                        • What are you looking at?
                                    </div>
                                    <div class="grid-card">
                                        <strong>Get:</strong><br><br>
                                        • Where did you get that from?<br>
                                        • What time did you get up at?<br>
                                        • What are you getting at?<br>
                                        • Who did you get it for?<br>
                                        • What did you get into?
                                    </div>
                                    <div class="grid-card">
                                        <strong>Go:</strong><br><br>
                                        • Where are you going to?<br>
                                        • What are you going for?<br>
                                        • Who are you going with?<br>
                                        • What time are you going at?<br>
                                        • What does this go with?
                                    </div>
                                    <div class="grid-card">
                                        <strong>Come:</strong><br><br>
                                        • Where did this come from?<br>
                                        • What does it come down to?<br>
                                        • Who did you come with?<br>
                                        • What did you come up with?<br>
                                        • What time did you come in at?
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Questions About Topics & Subjects</h2>
                            <div class="explanation-box">
                                <h3>Asking about what someone is discussing or focused on:</h3>

                                <div class="example-box">
                                    <p><strong>Talking/Speaking:</strong></p>
                                    <p>• What are you talking about?</p>
                                    <p>• Who were you speaking to?</p>
                                    <p>• Who are you talking about?</p>
                                    <p>• What did you speak about?</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>Thinking/Worrying:</strong></p>
                                    <p>• What are you thinking about?</p>
                                    <p>• Who are you thinking of?</p>
                                    <p>• What are you worried about?</p>
                                    <p>• What are you concerned about?</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>Reading/Writing:</strong></p>
                                    <p>• What is this book about?</p>
                                    <p>• What are you writing about?</p>
                                    <p>• Who did you write to?</p>
                                    <p>• What is this article on?</p>
                                </div>

                                <div class="example-box">
                                    <p><strong>Listening/Watching:</strong></p>
                                    <p>• What are you listening to?</p>
                                    <p>• Who are you listening for?</p>
                                    <p>• What are you watching?</p>
                                    <p>• What are you looking at?</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="examples-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                    </div>
                </div>
            </div>

            <!-- Reading Section -->
            <div class="section" id="reading">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="reading">
                            <h2>Reading: A Curious Conversation</h2>
                            <div class="explanation-box">
                                <div class="reading-text">
                                    <p><strong>At a Coffee Shop</strong></p>

                                    <p>Sarah walked into the coffee shop and saw her friend Mark sitting at a table, staring at his laptop screen with a confused expression.</p>

                                    <p>"Hey Mark! <span class="highlight-question">What are you working on?</span>" Sarah asked as she sat down.</p>

                                    <p>"Oh, hey Sarah! I'm trying to finish this report, but I can't remember the data I'm supposed to use. <span class="highlight-question">What was the meeting about</span> yesterday?"</p>

                                    <p>"It was about the new marketing strategy. Don't you remember? <span class="highlight-question">Who were you sitting with?</span> Maybe they took notes."</p>

                                    <p>"I was with Jennifer, but she left early. <span class="highlight-question">What time did she leave at?</span>"</p>

                                    <p>"Around 3 PM, I think. But anyway, <span class="highlight-question">what are you looking for</span> exactly? Maybe I can help."</p>

                                    <p>"I need the customer survey results. <span class="highlight-question">Where did they send them to?</span> I can't find the email."</p>

                                    <p>"They emailed them to the whole team yesterday afternoon. <span class="highlight-question">What email address are you checking?</span> Your work email or personal?"</p>

                                    <p>"Oh! I've been checking my personal email by mistake. That explains it! So <span class="highlight-question">what does the report focus on?</span>"</p>

                                    <p>"Customer satisfaction in different age groups. <span class="highlight-question">Which demographic are you responsible for?</span>"</p>

                                    <p>"I'm handling the 25-40 age group. <span class="highlight-question">What should I base my recommendations on?</span>"</p>

                                    <p>"On the survey results, obviously! And make sure to reference the competitor analysis too. <span class="highlight-question">When is the deadline?</span>"</p>

                                    <p>"Friday at 5 PM. Thanks for your help, Sarah! <span class="highlight-question">What would I do without you?</span>"</p>
                                </div>

                                <div class="note-box">
                                    <strong>Color Code:</strong>
                                    <p>Blue highlight = Questions ending in prepositions (natural English)</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="reading">
                            <h2>Reading Analysis</h2>
                            <div class="explanation-box">
                                <h3>Questions Ending in Prepositions from the Reading:</h3>

                                <div class="example-box">
                                    <p>• <strong>What are you working on?</strong> - asking about current task</p>
                                    <p>• <strong>What was the meeting about?</strong> - asking about topic/subject</p>
                                    <p>• <strong>Who were you sitting with?</strong> - asking about companion</p>
                                    <p>• <strong>What time did she leave at?</strong> - asking about specific time</p>
                                    <p>• <strong>What are you looking for?</strong> - asking about search object</p>
                                    <p>• <strong>Where did they send them to?</strong> - asking about destination</p>
                                    <p>• <strong>What email address are you checking?</strong> - asking about specific location</p>
                                    <p>• <strong>What does the report focus on?</strong> - asking about main topic</p>
                                    <p>• <strong>Which demographic are you responsible for?</strong> - asking about duty</p>
                                    <p>• <strong>What should I base my recommendations on?</strong> - asking about foundation/source</p>
                                </div>

                                <h3>Why These Sound Natural:</h3>
                                <div class="rule-box">
                                    <h4>Natural Flow:</h4>
                                    <p>• Ending with prepositions follows the natural word order of English</p>
                                    <p>• It sounds conversational and friendly</p>
                                    <p>• Native speakers use this pattern 99% of the time in spoken English</p>
                                    <p>• It's easier to understand and process</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="reading-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="section" id="media">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="media">
                            <h2>Video: Ending Sentences with Prepositions</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Watch this video about the grammar rule of ending sentences with prepositions:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/Q4XCZfkGF8k"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Learn why it's perfectly acceptable to end questions with prepositions
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="media">
                            <h2>Video: Common Question Patterns</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Watch native speakers use prepositions at the end of questions:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/dQw4w9WgXcQ"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Listen to natural English questions in context
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="media-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div class="section" id="practice">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="practice">
                            <h2>Practice 1: Complete the question</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"What are you looking ___?" (missing preposition)</p>
                                    <input type="text" id="q1" placeholder="Type: for" onkeypress="if(event.key==='Enter') checkAnswer1()">
                                    <button class="check-button" onclick="checkAnswer1()">Check Answer</button>
                                    <div id="feedback1" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 2: Choose correct preposition</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"Who are you going ___?" (with/to/for)</p>
                                    <input type="text" id="q2" placeholder="Type your answer" onkeypress="if(event.key==='Enter') checkAnswer2()">
                                    <button class="check-button" onclick="checkAnswer2()">Check Answer</button>
                                    <div id="feedback2" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 3: Complete the question</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"What are you thinking ___?"</p>
                                    <input type="text" id="q3" placeholder="Type the preposition" onkeypress="if(event.key==='Enter') checkAnswer3()">
                                    <button class="check-button" onclick="checkAnswer3()">Check Answer</button>
                                    <div id="feedback3" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 4: Natural or Formal?</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"For what are you waiting?" - Natural or Formal?</p>
                                    <input type="text" id="q4" placeholder="Type: natural or formal" onkeypress="if(event.key==='Enter') checkAnswer4()">
                                    <button class="check-button" onclick="checkAnswer4()">Check Answer</button>
                                    <div id="feedback4" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 5: Complete the question</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"Where are you ___?" (asking about origin)</p>
                                    <input type="text" id="q5" placeholder="Type the preposition" onkeypress="if(event.key==='Enter') checkAnswer5()">
                                    <button class="check-button" onclick="checkAnswer5()">Check Answer</button>
                                    <div id="feedback5" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 6: Fix the question</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Make this natural: "About what are you talking?"</p>
                                    <input type="text" id="q6" placeholder="Type the natural version" onkeypress="if(event.key==='Enter') checkAnswer6()">
                                    <button class="check-button" onclick="checkAnswer6()">Check Answer</button>
                                    <div id="feedback6" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 7: Choose preposition</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"Who did you give it ___?" (to/for/with)</p>
                                    <input type="text" id="q7" placeholder="Type the preposition" onkeypress="if(event.key==='Enter') checkAnswer7()">
                                    <button class="check-button" onclick="checkAnswer7()">Check Answer</button>
                                    <div id="feedback7" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 8: Complete the question</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"What does success depend ___?"</p>
                                    <input type="text" id="q8" placeholder="Type the preposition" onkeypress="if(event.key==='Enter') checkAnswer8()">
                                    <button class="check-button" onclick="checkAnswer8()">Check Answer</button>
                                    <div id="feedback8" class="feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="practice-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                        <span class="indicator-dot" onclick="goToSlide(7)"></span>
                        <span class="indicator-dot" onclick="goToSlide(8)"></span>
                    </div>
                </div>
            </div>

            <!-- Writing Section -->
            <div class="section" id="writing">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="writing" style="overflow-y: auto;">
                            <h2>Writing Practice</h2>
                            <div class="explanation-box">
                                <h3>Write a short dialogue using questions ending in prepositions</h3>
                                <p style="margin-bottom: 15px;">Write a conversation between two people (at least 10 questions total). Use various questions ending in prepositions!</p>
                                <div class="question-box">
                                    <textarea id="writing1" rows="8" style="width: 100%; padding: 12px; border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 8px; font-size: 1.05rem; font-family: 'Inter', sans-serif; resize: vertical;" spellcheck="true" placeholder="Example:&#10;A: What are you working on?&#10;B: I'm writing a report. Who did you talk to?&#10;A: I spoke with the manager. What did you discuss?"></textarea>
                                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                                        <button class="check-button" onclick="checkGrammar()">Check Grammar</button>
                                        <button id="send-teacher-btn" class="check-button" onclick="sendToTeacher()" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); opacity: 0.5; cursor: not-allowed;" disabled>Send to Teacher</button>
                                    </div>
                                    <div id="grammar-feedback" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;"></div>
                                    <p style="font-size: 0.95rem; color: #666; margin-top: 10px;">Try to use: about, for, with, to, at, from, on</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="writing-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSlide = 1;
        let currentSection = 'explanation';

        function showSection(sectionName, element) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            document.getElementById(sectionName).classList.add('active');

            if (element) {
                element.classList.add('active');
            }

            currentSection = sectionName;
            currentSlide = 1;

            setTimeout(() => {
                const activeSection = document.querySelector('.section.active');
                const inputField = activeSection.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                }
            }, 100);
        }

        function changeSlide(direction) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            if (slides.length === 1) return;

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide += direction;

            if (currentSlide > slides.length) {
                currentSlide = 1;
            }
            if (currentSlide < 1) {
                currentSlide = slides.length;
            }

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');

            setTimeout(() => {
                const activeSlide = slides[currentSlide - 1];
                const inputField = activeSlide.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                    inputField.value = '';
                }
            }, 100);
        }

        function goToSlide(slideNum) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide = slideNum;

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                changeSlide(-1);
            } else if (e.key === 'ArrowRight') {
                changeSlide(1);
            }
        });

        function checkAnswer1() {
            const answer = document.getElementById('q1').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback1');

            if (answer === 'for') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "What are you looking FOR?" is natural English!';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ The correct preposition is FOR. "Look for" means to search for something.';
            }
        }

        function checkAnswer2() {
            const answer = document.getElementById('q2').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback2');

            if (answer === 'with') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "Who are you going WITH?" asks about your companion!';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use WITH when asking about companions. "Going with" = going together with someone.';
            }
        }

        function checkAnswer3() {
            const answer = document.getElementById('q3').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback3');

            if (answer === 'about') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! "What are you thinking ABOUT?" - we think ABOUT topics!';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ We "think ABOUT" something. The correct preposition is ABOUT!';
            }
        }

        function checkAnswer4() {
            const answer = document.getElementById('q4').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback4');

            if (answer === 'formal') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! This is FORMAL (and old-fashioned). Natural = "What are you waiting for?"';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ This is FORMAL English. The natural version ends with the preposition!';
            }
        }

        function checkAnswer5() {
            const answer = document.getElementById('q5').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback5');

            if (answer === 'from') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Great! "Where are you FROM?" is the standard way to ask about origin!';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use FROM to ask about origin: "Where are you FROM?"';
            }
        }

        function checkAnswer6() {
            const answer = document.getElementById('q6').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback6');

            if (answer.includes('what are you talking about')) {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "What are you talking about?" is the natural version!';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Move the preposition to the end: "What are you talking about?"';
            }
        }

        function checkAnswer7() {
            const answer = document.getElementById('q7').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback7');

            if (answer === 'to') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "Who did you give it TO?" - we give things TO people!';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use TO: "give something TO someone"';
            }
        }

        function checkAnswer8() {
            const answer = document.getElementById('q8').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback8');

            if (answer === 'on') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "What does success depend ON?" - things depend ON other things!';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use ON: "depend ON something"';
            }
        }

        async function checkGrammar() {
            const text = document.getElementById('writing1').value;
            const feedbackDiv = document.getElementById('grammar-feedback');
            const textarea = document.getElementById('writing1');

            if (!text.trim()) {
                feedbackDiv.style.display = 'block';
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Please write your dialogue first!';
                return;
            }

            textarea.style.display = 'none';
            window.grammarCheckResult = { original: text, corrected: '' };

            feedbackDiv.style.display = 'block';
            feedbackDiv.style.background = 'rgba(102, 126, 234, 0.1)';
            feedbackDiv.style.border = '1px solid rgba(102, 126, 234, 0.3)';
            feedbackDiv.style.color = '#667eea';
            feedbackDiv.innerHTML = '⏳ Checking your grammar and spelling...';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyBTH0NmDb3cqjrY6p7YROPIJel-iCxSxzs`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a strict grammar checker. Fix grammar and spelling errors. Do not change the meaning, style, or add punctuation unless absolutely necessary. Profanities are acceptable, but don't use shortened informal words like "cuz" or "wanna"\n\nText: "${text}"\n\nReturn only the corrected text with minimal changes.`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                const correctedText = data.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || text;

                if (correctedText !== text && correctedText.toLowerCase() !== text.toLowerCase()) {
                    const originalWords = text.split(/(\s+)/);
                    const correctedWords = correctedText.split(/(\s+)/);
                    let highlightedText = '';

                    originalWords.forEach((word, i) => {
                        if (word.match(/\s+/)) {
                            highlightedText += word;
                        } else if (correctedWords[i] && word.toLowerCase() !== correctedWords[i].toLowerCase()) {
                            highlightedText += `<span style="color: #e53e3e; font-weight: 600; background: rgba(245, 101, 101, 0.15); padding: 2px 4px; border-radius: 3px;">${word}</span>`;
                        } else {
                            highlightedText += word;
                        }
                    });

                    let html = `
                        <div style="margin-bottom: 20px;">
                            <strong style="color: #c53030;">Your Text (errors highlighted):</strong>
                            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(245, 101, 101, 0.3); line-height: 1.8;">
                                ${highlightedText}
                            </div>
                        </div>
                        <div>
                            <strong style="color: #2f855a;">Corrected Text:</strong>
                            <div style="background: rgba(72, 187, 120, 0.1); padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(72, 187, 120, 0.3); color: #2d3748; line-height: 1.8;">
                                ${correctedText}
                            </div>
                        </div>
                    `;

                    feedbackDiv.style.background = 'rgba(245, 101, 101, 0.05)';
                    feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                    feedbackDiv.style.color = '#2d3748';
                    feedbackDiv.innerHTML = html;

                    window.grammarCheckResult.corrected = correctedText;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                } else {
                    feedbackDiv.style.background = 'rgba(72, 187, 120, 0.1)';
                    feedbackDiv.style.border = '1px solid rgba(72, 187, 120, 0.3)';
                    feedbackDiv.style.color = '#2f855a';
                    feedbackDiv.innerHTML = '✓ Perfect! No grammar or spelling errors detected!';

                    window.grammarCheckResult.corrected = text;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                }
            } catch (error) {
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Unable to check grammar. Error: ' + error.message;
            }
        }

        function sendToTeacher() {
            const essayTitle = "Questions Ending in Prepositions";
            const originalText = window.grammarCheckResult.original;
            const correctedText = window.grammarCheckResult.corrected;

            const emailBody = `Essay Title: ${essayTitle}\n\nOriginal Essay:\n${originalText}\n\nWe made some changes:\n\nCorrected Text:\n${correctedText}`;
            const mailtoLink = `mailto:?subject=${encodeURIComponent(essayTitle)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        }
    </script>
</body>
</html>
