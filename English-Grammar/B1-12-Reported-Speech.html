<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B1-52: Reported Speech - Statements</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            flex-direction: column;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .header .website {
            text-align: center;
            margin-top: 8px;
        }

        .header .website a {
            color: #4c51bf;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .header .website a:hover {
            color: #553c9a;
        }

        .header-image {
            width: 120px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .container {
            display: flex;
            height: calc(100vh - 120px);
        }

        .navigation {
            width: 280px;
            background: rgba(45, 55, 72, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item {
            padding: 16px 24px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 500;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .section {
            display: none;
            flex: 1;
            padding: 0;
            overflow: hidden;
            height: 100%;
            background: white;
        }

        .section.active {
            display: flex;
            flex-direction: column;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 30px 80px;
        }

        .slide-content-wrapper {
            position: relative;
            width: 100%;
            max-width: 1400px;
            height: 85%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 20px;
            padding: 25px 35px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #8B7EC8;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .slide-arrow:hover {
            background: #7366B0;
            transform: translateY(-50%) scale(1.1);
        }

        .slide-arrow.prev {
            left: -70px;
        }

        .slide-arrow.next {
            right: -70px;
        }

        .slide-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #D1D5DB;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: #667eea;
            transform: scale(1.3);
        }

        .indicator-dot:hover {
            background: #9CA3AF;
        }

        .slide h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: -0.5px;
        }

        .explanation-box {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 0;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .explanation-box h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .explanation-box p {
            color: #2d3748;
            line-height: 1.5;
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .rule-box {
            background: #e3f2fd;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }

        .rule-box h4 {
            color: #667eea;
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .rule-box p {
            font-size: 1rem;
            color: #2d3748;
            margin: 5px 0;
        }

        .yes-no {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #4299e1;
            color: white;
        }

        .auxiliary {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #48bb78;
            color: white;
        }

        .subject {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #9f7aea;
            color: white;
        }

        .verb {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #ed64a6;
            color: white;
        }

        .example-box {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
        }

        .example-box p {
            margin: 5px 0;
            font-size: 1rem;
            color: #2d3748;
        }

        .note-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .note-box strong {
            color: #856404;
            font-size: 1rem;
        }

        .note-box p {
            color: #856404;
            margin-top: 5px;
            line-height: 1.4;
            font-size: 0.95rem;
        }

        .exercise-container {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 10px;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .exercise-container h3 {
            color: #764ba2;
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-box {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 12px;
            margin: 0;
        }

        .question-box p {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 18px;
            margin: 8px 0;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            font-size: 1.05rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 15px 5px 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .feedback {
            padding: 15px 20px;
            border-radius: 12px;
            margin: 15px 0;
            font-weight: 500;
            font-size: 1.05rem;
            display: none;
        }

        .feedback.correct {
            background: rgba(72, 187, 120, 0.1);
            color: #2f855a;
            border: 1px solid rgba(72, 187, 120, 0.3);
            display: block;
        }

        .feedback.incorrect {
            background: rgba(245, 101, 101, 0.1);
            color: #c53030;
            border: 1px solid rgba(245, 101, 101, 0.3);
            display: block;
        }

        ul {
            margin-left: 25px;
            line-height: 1.6;
        }

        li {
            margin: 6px 0;
            font-size: 1.05rem;
            color: #2d3748;
        }

        li strong {
            color: #667eea;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 10px;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 10px;
            border: 1px solid #e2e8f0;
            font-size: 1rem;
            text-align: center;
        }

        .comparison-table tr:nth-child(even) {
            background: #f7fafc;
        }

        .explanation-box::-webkit-scrollbar {
            width: 8px;
        }

        .explanation-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }

        .formula-box {
            background: #e6fffa;
            border: 2px solid #319795;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.3rem;
        }

        .grid-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .grid-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .grid-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .reading-text {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.9;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
        }

        .reading-text p {
            margin: 12px 0;
        }

        .highlight-question {
            background: #bee3f8;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .highlight-answer {
            background: #c6f6d5;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .example-sentence {
            font-size: 1.1rem;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>B1-52: Reported Speech - Statements</h1>
            <div class="website">
                <a href="https://www.mimlanguageservices.com/" target="_blank">mimlanguageservices</a>
            </div>
        </div>
        <a href="https://www.mimlanguageservices.com/" target="_blank">
            <img src="https://static.wixstatic.com/media/593d03_8958d96b0f6d4d1ea9dffa7f89bffe8b~mv2.png" alt="ESL Logo" class="header-image">
        </a>
    </div>

    <div class="container">
        <div class="navigation">
            <div class="nav-item active" onclick="showSection('explanation', this)">Explanation</div>
            <div class="nav-item" onclick="showSection('examples', this)">Examples</div>
            <div class="nav-item" onclick="showSection('reading', this)">Reading</div>
            <div class="nav-item" onclick="showSection('media', this)">Media</div>
            <div class="nav-item" onclick="showSection('practice', this)">Practice</div>
            <div class="nav-item" onclick="showSection('writing', this)">Writing</div>
        </div>

        <div class="content">
            <!-- Explanation Section -->
            <div class="section active" id="explanation">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="explanation">
                            <h2>Welcome to Reported Speech!</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.2rem; text-align: center; margin: 20px 0;">
                                    Today we will learn <span class="yes-no">REPORTED SPEECH</span> in English!
                                </p>
                                <p style="font-size: 1.1rem; text-align: center;">
                                    Reported speech is used to tell someone what another person said WITHOUT using their exact words.
                                </p>
                                <div class="formula-box">
                                    <span class="subject">Subject</span> + <span class="auxiliary">SAID/TOLD</span> + <span class="verb">(that) + clause</span>
                                </div>
                                <table class="comparison-table">
                                    <tr>
                                        <th>Direct Speech</th>
                                        <th>Reported Speech</th>
                                    </tr>
                                    <tr>
                                        <td>She said, "I am happy."</td>
                                        <td>She said (that) she was happy.</td>
                                    </tr>
                                    <tr>
                                        <td>He said, "I work here."</td>
                                        <td>He said (that) he worked there.</td>
                                    </tr>
                                </table>
                                <p style="text-align: center; font-size: 1.1rem; margin-top: 15px;">
                                    Notice: The verb tense changes, pronouns change, and time/place words change!
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Verb Tense Changes (Backshifting)</h2>
                            <div class="explanation-box">
                                <h3>When the reporting verb is in the PAST (said, told), we usually move the tense BACK one step:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Direct Speech</th>
                                        <th>Reported Speech</th>
                                    </tr>
                                    <tr>
                                        <td><strong>Present Simple:</strong> "I live in Paris."</td>
                                        <td><strong>Past Simple:</strong> He said he lived in Paris.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Present Continuous:</strong> "I am studying."</td>
                                        <td><strong>Past Continuous:</strong> She said she was studying.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Present Perfect:</strong> "I have finished."</td>
                                        <td><strong>Past Perfect:</strong> He said he had finished.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Past Simple:</strong> "I went home."</td>
                                        <td><strong>Past Perfect:</strong> She said she had gone home.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Will:</strong> "I will call you."</td>
                                        <td><strong>Would:</strong> He said he would call me.</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Can:</strong> "I can help."</td>
                                        <td><strong>Could:</strong> She said she could help.</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Important Note:</h4>
                                    <p>• This is called "backshifting" - moving the tense backwards in time</p>
                                    <p>• Some tenses don't change: Past Perfect, could, would, should, might</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Pronoun and Time Expression Changes</h2>
                            <div class="explanation-box">
                                <h3>Pronouns change to match the new perspective:</h3>

                                <div class="example-box">
                                    <p><strong>Direct:</strong> She said, "<strong>I</strong> love <strong>my</strong> job."</p>
                                    <p><strong>Reported:</strong> She said <strong>she</strong> loved <strong>her</strong> job.</p>
                                </div>

                                <h3>Time and place expressions also change:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Direct Speech</th>
                                        <th>Reported Speech</th>
                                    </tr>
                                    <tr>
                                        <td>today</td>
                                        <td>that day</td>
                                    </tr>
                                    <tr>
                                        <td>tonight</td>
                                        <td>that night</td>
                                    </tr>
                                    <tr>
                                        <td>tomorrow</td>
                                        <td>the next day / the following day</td>
                                    </tr>
                                    <tr>
                                        <td>yesterday</td>
                                        <td>the day before / the previous day</td>
                                    </tr>
                                    <tr>
                                        <td>now</td>
                                        <td>then / at that moment</td>
                                    </tr>
                                    <tr>
                                        <td>here</td>
                                        <td>there</td>
                                    </tr>
                                    <tr>
                                        <td>this</td>
                                        <td>that</td>
                                    </tr>
                                    <tr>
                                        <td>these</td>
                                        <td>those</td>
                                    </tr>
                                    <tr>
                                        <td>ago</td>
                                        <td>before</td>
                                    </tr>
                                    <tr>
                                        <td>last week/month/year</td>
                                        <td>the week/month/year before</td>
                                    </tr>
                                    <tr>
                                        <td>next week/month/year</td>
                                        <td>the following week/month/year</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Say vs Tell</h2>
                            <div class="explanation-box">
                                <h3>Both SAY and TELL are reporting verbs, but they're used differently:</h3>

                                <div class="rule-box">
                                    <h4>SAY:</h4>
                                    <p>• <strong>say</strong> + (that) + clause</p>
                                    <p>• <strong>say</strong> + to + person + (that) + clause</p>
                                    <p>• We DON'T use an object directly after "say"</p>
                                </div>

                                <div class="example-box">
                                    <p>✓ She <strong>said</strong> (that) she was tired.</p>
                                    <p>✓ He <strong>said to me</strong> (that) he would come.</p>
                                    <p>✗ She <del>said me</del> that she was tired. (WRONG!)</p>
                                </div>

                                <div class="rule-box">
                                    <h4>TELL:</h4>
                                    <p>• <strong>tell</strong> + person + (that) + clause</p>
                                    <p>• We ALWAYS use an object (person) after "tell"</p>
                                </div>

                                <div class="example-box">
                                    <p>✓ She <strong>told me</strong> (that) she was tired.</p>
                                    <p>✓ He <strong>told us</strong> (that) he would come.</p>
                                    <p>✗ She <del>told</del> that she was tired. (WRONG!)</p>
                                    <p>✗ He <del>told to me</del> that he would come. (WRONG!)</p>
                                </div>

                                <div class="note-box">
                                    <strong>Quick Memory Tip:</strong>
                                    <p>• SAY = say TO someone (optional)</p>
                                    <p>• TELL = tell someone (required!)</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Place and Reference Changes</h2>
                            <div class="explanation-box">
                                <h3>When location or reference changes, we adjust the words:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Direct Speech</th>
                                        <th>Reported Speech</th>
                                    </tr>
                                    <tr>
                                        <td>She said, "I work <strong>here</strong>."</td>
                                        <td>She said she worked <strong>there</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>He said, "I'll come <strong>tonight</strong>."</td>
                                        <td>He said he would come <strong>that night</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>She said, "I saw him <strong>yesterday</strong>."</td>
                                        <td>She said she had seen him <strong>the day before</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>He said, "I'll leave <strong>tomorrow</strong>."</td>
                                        <td>He said he would leave <strong>the next day</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>She said, "I met him <strong>3 days ago</strong>."</td>
                                        <td>She said she had met him <strong>3 days before</strong>.</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Remember:</h4>
                                    <p>• Change from the speaker's perspective to your perspective</p>
                                    <p>• "here" becomes "there" if you're in a different place</p>
                                    <p>• Time words shift to match when the statement was made</p>
                                </div>

                                <div class="note-box">
                                    <strong>Exception:</strong>
                                    <p>If the situation is STILL TRUE now, you don't have to change the tense:</p>
                                    <p>• She said, "I live in Paris." → She said she lives in Paris. (if she still does)</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Common Mistakes</h2>
                            <div class="explanation-box">
                                <h3>❌ Mistake 1: Forgetting to change the tense</h3>
                                <div class="example-box">
                                    <p>❌ She said she <del>is</del> happy. → ✅ She said she <strong>was</strong> happy.</p>
                                    <p>❌ He told me he <del>will</del> come. → ✅ He told me he <strong>would</strong> come.</p>
                                </div>

                                <h3>❌ Mistake 2: Using SAY and TELL incorrectly</h3>
                                <div class="example-box">
                                    <p>❌ She <del>said me</del> the truth. → ✅ She <strong>told me</strong> the truth.</p>
                                    <p>❌ He <del>told</del> that he was tired. → ✅ He <strong>said</strong> (that) he was tired.</p>
                                    <p>❌ She <del>told to me</del> the story. → ✅ She <strong>told me</strong> the story.</p>
                                </div>

                                <h3>❌ Mistake 3: Not changing pronouns</h3>
                                <div class="example-box">
                                    <p>❌ Maria said, "I am busy." → Maria said <del>I</del> was busy. → ✅ Maria said <strong>she</strong> was busy.</p>
                                    <p>❌ He said, "My car is red." → He said <del>my</del> car was red. → ✅ He said <strong>his</strong> car was red.</p>
                                </div>

                                <h3>❌ Mistake 4: Not changing time expressions</h3>
                                <div class="example-box">
                                    <p>❌ She said she would come <del>tomorrow</del>. → ✅ She said she would come <strong>the next day</strong>.</p>
                                    <p>❌ He said he saw her <del>yesterday</del>. → ✅ He said he had seen her <strong>the day before</strong>.</p>
                                </div>

                                <h3>❌ Mistake 5: Keeping quotation marks</h3>
                                <div class="example-box">
                                    <p>❌ She said <del>"she was happy"</del>. → ✅ She said <strong>she was happy</strong>. (no quotes!)</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="explanation-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="section" id="examples">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="examples">
                            <h2>Present to Past Changes</h2>
                            <div class="explanation-box">
                                <h3>Converting different tenses to reported speech:</h3>

                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Present Simple → Past Simple:</strong><br><br>
                                        <strong>Direct:</strong> "I like coffee."<br>
                                        <strong>Reported:</strong> She said she liked coffee.<br><br>
                                        <strong>Direct:</strong> "We live in Tokyo."<br>
                                        <strong>Reported:</strong> They said they lived in Tokyo.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Present Continuous → Past Continuous:</strong><br><br>
                                        <strong>Direct:</strong> "I am working."<br>
                                        <strong>Reported:</strong> He said he was working.<br><br>
                                        <strong>Direct:</strong> "They are playing."<br>
                                        <strong>Reported:</strong> She said they were playing.
                                    </div>
                                </div>

                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Present Perfect → Past Perfect:</strong><br><br>
                                        <strong>Direct:</strong> "I have finished."<br>
                                        <strong>Reported:</strong> She said she had finished.<br><br>
                                        <strong>Direct:</strong> "We have seen it."<br>
                                        <strong>Reported:</strong> They said they had seen it.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Past Simple → Past Perfect:</strong><br><br>
                                        <strong>Direct:</strong> "I went home."<br>
                                        <strong>Reported:</strong> He said he had gone home.<br><br>
                                        <strong>Direct:</strong> "She called me."<br>
                                        <strong>Reported:</strong> He said she had called him.
                                    </div>
                                </div>

                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Will → Would:</strong><br><br>
                                        <strong>Direct:</strong> "I will help you."<br>
                                        <strong>Reported:</strong> She said she would help me.<br><br>
                                        <strong>Direct:</strong> "We will arrive soon."<br>
                                        <strong>Reported:</strong> They said they would arrive soon.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Can → Could:</strong><br><br>
                                        <strong>Direct:</strong> "I can swim."<br>
                                        <strong>Reported:</strong> He said he could swim.<br><br>
                                        <strong>Direct:</strong> "We can help."<br>
                                        <strong>Reported:</strong> They said they could help.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Time and Place Expression Changes</h2>
                            <div class="explanation-box">
                                <h3>Examples showing how time and place words change:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Direct Speech</th>
                                        <th>Reported Speech</th>
                                    </tr>
                                    <tr>
                                        <td>"I'll see you <strong>tomorrow</strong>."</td>
                                        <td>She said she would see me <strong>the next day</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>"I met him <strong>yesterday</strong>."</td>
                                        <td>He said he had met him <strong>the day before</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>"I'm leaving <strong>now</strong>."</td>
                                        <td>She said she was leaving <strong>then</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>"I live <strong>here</strong>."</td>
                                        <td>He said he lived <strong>there</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>"I'll finish it <strong>tonight</strong>."</td>
                                        <td>She said she would finish it <strong>that night</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>"I bought <strong>this</strong> car <strong>last week</strong>."</td>
                                        <td>He said he had bought <strong>that</strong> car <strong>the week before</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>"We arrived <strong>3 days ago</strong>."</td>
                                        <td>They said they had arrived <strong>3 days before</strong>.</td>
                                    </tr>
                                    <tr>
                                        <td>"I'll call you <strong>next Monday</strong>."</td>
                                        <td>She said she would call me <strong>the following Monday</strong>.</td>
                                    </tr>
                                </table>

                                <div class="note-box">
                                    <strong>Remember:</strong>
                                    <p>These changes depend on context! If you're still in the same time/place, you might not need to change them.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Various Reporting Verb Examples</h2>
                            <div class="explanation-box">
                                <h3>Using SAY and TELL correctly:</h3>

                                <div class="example-box">
                                    <strong>Using SAY:</strong><br><br>
                                    • Direct: "I am tired."<br>
                                    Reported: She <strong>said</strong> (that) she was tired.<br><br>
                                    • Direct: "We are going home."<br>
                                    Reported: They <strong>said</strong> (that) they were going home.<br><br>
                                    • Direct: "I love this movie."<br>
                                    Reported: He <strong>said to me</strong> (that) he loved that movie.<br><br>
                                    • Direct: "The meeting starts at 9."<br>
                                    Reported: She <strong>said</strong> (that) the meeting started at 9.
                                </div>

                                <div class="example-box">
                                    <strong>Using TELL:</strong><br><br>
                                    • Direct: "I am busy."<br>
                                    Reported: She <strong>told me</strong> (that) she was busy.<br><br>
                                    • Direct: "We won the game."<br>
                                    Reported: They <strong>told us</strong> (that) they had won the game.<br><br>
                                    • Direct: "I can't come to the party."<br>
                                    Reported: He <strong>told her</strong> (that) he couldn't come to the party.<br><br>
                                    • Direct: "I will help you tomorrow."<br>
                                    Reported: She <strong>told him</strong> (that) she would help him the next day.
                                </div>

                                <div class="rule-box">
                                    <h4>Pattern Summary:</h4>
                                    <p>• <strong>say</strong> (that) ... OR <strong>say to</strong> + person (that) ...</p>
                                    <p>• <strong>tell</strong> + person (that) ...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="examples-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                    </div>
                </div>
            </div>

            <!-- Reading Section -->
            <div class="section" id="reading">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="reading">
                            <h2>Reading: A Conversation</h2>
                            <div class="explanation-box">
                                <div class="reading-text">
                                    <p><strong>Direct Speech - What They Actually Said:</strong></p>

                                    <p><strong>Maria:</strong> "I love my new job. I work in the city center now."</p>

                                    <p><strong>Tom:</strong> "That's great! I am looking for a new job too. I will send you my resume tomorrow."</p>

                                    <p><strong>Maria:</strong> "Perfect! My boss told me yesterday that we need more people. I can give him your resume."</p>

                                    <p><strong>Tom:</strong> "Thank you! I have been waiting for this opportunity. I studied marketing at university, and I finished my degree last year."</p>

                                    <p><strong>Maria:</strong> "Excellent! Come to my office next week and we will talk about it."</p>
                                </div>

                                <div class="reading-text" style="background: #e6fffa;">
                                    <p><strong>Later, Maria tells her friend Sarah about the conversation:</strong></p>

                                    <p>Maria said <span class="highlight-answer">she loved her new job</span> and <span class="highlight-answer">she worked in the city center</span>.</p>

                                    <p>Tom said <span class="highlight-answer">that was great</span> and <span class="highlight-answer">he was looking for a new job too</span>. He told her <span class="highlight-answer">he would send her his resume the next day</span>.</p>

                                    <p>Maria told him <span class="highlight-answer">that was perfect</span>. She said <span class="highlight-answer">her boss had told her the day before that they needed more people</span>. She said <span class="highlight-answer">she could give him Tom's resume</span>.</p>

                                    <p>Tom told her <span class="highlight-answer">he had been waiting for that opportunity</span>. He said <span class="highlight-answer">he had studied marketing at university</span> and <span class="highlight-answer">he had finished his degree the year before</span>.</p>

                                    <p>Maria told him <span class="highlight-answer">to come to her office the following week</span> and <span class="highlight-answer">they would talk about it</span>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="reading">
                            <h2>Analysis of Changes</h2>
                            <div class="explanation-box">
                                <h3>Tense Changes:</h3>
                                <div class="example-box">
                                    <p>• "I <strong>love</strong>" → she <strong>loved</strong> (Present Simple → Past Simple)</p>
                                    <p>• "I <strong>work</strong>" → she <strong>worked</strong> (Present Simple → Past Simple)</p>
                                    <p>• "I <strong>am looking</strong>" → he <strong>was looking</strong> (Present Continuous → Past Continuous)</p>
                                    <p>• "I <strong>will send</strong>" → he <strong>would send</strong> (Will → Would)</p>
                                    <p>• "told me <strong>yesterday</strong>" → had told her <strong>the day before</strong> (Past Simple → Past Perfect)</p>
                                    <p>• "I <strong>can give</strong>" → she <strong>could give</strong> (Can → Could)</p>
                                    <p>• "I <strong>have been waiting</strong>" → he <strong>had been waiting</strong> (Present Perfect Continuous → Past Perfect Continuous)</p>
                                    <p>• "I <strong>studied</strong>" → he <strong>had studied</strong> (Past Simple → Past Perfect)</p>
                                    <p>• "I <strong>finished</strong>" → he <strong>had finished</strong> (Past Simple → Past Perfect)</p>
                                </div>

                                <h3>Pronoun Changes:</h3>
                                <div class="example-box">
                                    <p>• "<strong>I</strong> love <strong>my</strong> job" → <strong>she</strong> loved <strong>her</strong> job</p>
                                    <p>• "<strong>I</strong> will send <strong>you</strong>" → <strong>he</strong> would send <strong>her</strong></p>
                                    <p>• "<strong>My</strong> boss told <strong>me</strong>" → <strong>her</strong> boss had told <strong>her</strong></p>
                                </div>

                                <h3>Time Expression Changes:</h3>
                                <div class="example-box">
                                    <p>• "<strong>tomorrow</strong>" → <strong>the next day</strong></p>
                                    <p>• "<strong>yesterday</strong>" → <strong>the day before</strong></p>
                                    <p>• "<strong>last year</strong>" → <strong>the year before</strong></p>
                                    <p>• "<strong>next week</strong>" → <strong>the following week</strong></p>
                                </div>

                                <h3>Place/Reference Changes:</h3>
                                <div class="example-box">
                                    <p>• "<strong>this</strong> opportunity" → <strong>that</strong> opportunity</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="reading-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="section" id="media">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="media">
                            <h2>Video: Reported Speech Basics</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Watch this video about Reported Speech:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/TvBVd-3Y0WA"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Learn how to convert direct speech into reported speech
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="media">
                            <h2>Video: Reported Speech - Say vs Tell</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Understanding the difference between SAY and TELL:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/eyGRICWi45o"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Master the correct usage of reporting verbs
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="media-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div class="section" id="practice">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="practice">
                            <h2>Practice 1: Present Simple to Past Simple</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>She said, "I live in London." → She said she ___ in London.</p>
                                    <input type="text" id="q1" placeholder="Type the verb" onkeypress="if(event.key==='Enter') checkAnswer1()">
                                    <button class="check-button" onclick="checkAnswer1()">Check Answer</button>
                                    <div id="feedback1" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 2: Will to Would</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>He said, "I will help you." → He said he ___ help me.</p>
                                    <input type="text" id="q2" placeholder="Type the verb" onkeypress="if(event.key==='Enter') checkAnswer2()">
                                    <button class="check-button" onclick="checkAnswer2()">Check Answer</button>
                                    <div id="feedback2" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 3: Say vs Tell</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>She ___ me that she was tired. (say or tell?)</p>
                                    <input type="text" id="q3" placeholder="Type: said or told" onkeypress="if(event.key==='Enter') checkAnswer3()">
                                    <button class="check-button" onclick="checkAnswer3()">Check Answer</button>
                                    <div id="feedback3" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 4: Time Expression Change</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>She said, "I'll see you tomorrow." → She said she would see me ___.</p>
                                    <input type="text" id="q4" placeholder="Type the time expression" onkeypress="if(event.key==='Enter') checkAnswer4()">
                                    <button class="check-button" onclick="checkAnswer4()">Check Answer</button>
                                    <div id="feedback4" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 5: Complete Conversion</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>He said, "I am working." → He said he ___ ___.</p>
                                    <input type="text" id="q5" placeholder="Type two words" onkeypress="if(event.key==='Enter') checkAnswer5()">
                                    <button class="check-button" onclick="checkAnswer5()">Check Answer</button>
                                    <div id="feedback5" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 6: Past Simple to Past Perfect</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>She said, "I went home." → She said she ___ ___ home.</p>
                                    <input type="text" id="q6" placeholder="Type two words" onkeypress="if(event.key==='Enter') checkAnswer6()">
                                    <button class="check-button" onclick="checkAnswer6()">Check Answer</button>
                                    <div id="feedback6" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 7: Pronoun Change</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Tom said, "I love my job." → Tom said ___ loved ___ job.</p>
                                    <input type="text" id="q7" placeholder="Type two pronouns (he his)" onkeypress="if(event.key==='Enter') checkAnswer7()">
                                    <button class="check-button" onclick="checkAnswer7()">Check Answer</button>
                                    <div id="feedback7" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 8: Here to There</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>She said, "I work here." → She said she worked ___.</p>
                                    <input type="text" id="q8" placeholder="Type the place word" onkeypress="if(event.key==='Enter') checkAnswer8()">
                                    <button class="check-button" onclick="checkAnswer8()">Check Answer</button>
                                    <div id="feedback8" class="feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="practice-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                        <span class="indicator-dot" onclick="goToSlide(7)"></span>
                        <span class="indicator-dot" onclick="goToSlide(8)"></span>
                    </div>
                </div>
            </div>

            <!-- Writing Section -->
            <div class="section" id="writing">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="writing" style="overflow-y: auto;">
                            <h2>Writing Practice</h2>
                            <div class="explanation-box">
                                <h3>Convert these direct speech statements to reported speech</h3>
                                <p style="margin-bottom: 15px;">Write 10 sentences using reported speech. Change the tenses, pronouns, and time expressions correctly.</p>
                                <div class="question-box">
                                    <textarea id="writing1" rows="8" style="width: 100%; padding: 12px; border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 8px; font-size: 1.05rem; font-family: 'Inter', sans-serif; resize: vertical;" spellcheck="true" placeholder="Example: She said, 'I am happy.' → She said (that) she was happy. / He told me, 'I will come tomorrow.' → He told me (that) he would come the next day."></textarea>
                                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                                        <button class="check-button" onclick="checkGrammar()">Check Grammar</button>
                                        <button id="send-teacher-btn" class="check-button" onclick="sendToTeacher()" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); opacity: 0.5; cursor: not-allowed;" disabled>Send to Teacher</button>
                                    </div>
                                    <div id="grammar-feedback" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;"></div>
                                    <p style="font-size: 0.95rem; color: #666; margin-top: 10px;">Practice sentences: "I love pizza." / "We are studying." / "I will call you tomorrow." / "I have finished my homework." / "I went to Paris last year."</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="writing-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSlide = 1;
        let currentSection = 'explanation';

        function showSection(sectionName, element) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            document.getElementById(sectionName).classList.add('active');

            if (element) {
                element.classList.add('active');
            }

            currentSection = sectionName;
            currentSlide = 1;

            setTimeout(() => {
                const activeSection = document.querySelector('.section.active');
                const inputField = activeSection.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                }
            }, 100);
        }

        function changeSlide(direction) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            if (slides.length === 1) return;

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide += direction;

            if (currentSlide > slides.length) {
                currentSlide = 1;
            }
            if (currentSlide < 1) {
                currentSlide = slides.length;
            }

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');

            setTimeout(() => {
                const activeSlide = slides[currentSlide - 1];
                const inputField = activeSlide.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                    inputField.value = '';
                }
            }, 100);
        }

        function goToSlide(slideNum) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide = slideNum;

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                changeSlide(-1);
            } else if (e.key === 'ArrowRight') {
                changeSlide(1);
            }
        });

        function checkAnswer1() {
            const answer = document.getElementById('q1').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback1');

            if (answer === 'lived') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! Present Simple "live" becomes Past Simple "lived" in reported speech.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Change Present Simple to Past Simple: live → lived';
            }
        }

        function checkAnswer2() {
            const answer = document.getElementById('q2').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback2');

            if (answer === 'would') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "will" changes to "would" in reported speech.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Change "will" to "would": He said he would help me.';
            }
        }

        function checkAnswer3() {
            const answer = document.getElementById('q3').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback3');

            if (answer === 'told') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! Use "told" + person (me). She told me...';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use "told" when there is an object (me): She told me...';
            }
        }

        function checkAnswer4() {
            const answer = document.getElementById('q4').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback4');

            if (answer === 'the next day' || answer === 'the following day') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "tomorrow" becomes "the next day" or "the following day".';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Change "tomorrow" to "the next day" or "the following day"';
            }
        }

        function checkAnswer5() {
            const answer = document.getElementById('q5').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback5');

            if (answer === 'was working') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Great! Present Continuous "am working" becomes Past Continuous "was working".';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Change Present Continuous to Past Continuous: am working → was working';
            }
        }

        function checkAnswer6() {
            const answer = document.getElementById('q6').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback6');

            if (answer === 'had gone') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! Past Simple "went" becomes Past Perfect "had gone".';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Change Past Simple to Past Perfect: went → had gone';
            }
        }

        function checkAnswer7() {
            const answer = document.getElementById('q7').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback7');

            if (answer === 'he his') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! Change "I" to "he" and "my" to "his".';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Change the pronouns: I → he, my → his';
            }
        }

        function checkAnswer8() {
            const answer = document.getElementById('q8').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback8');

            if (answer === 'there') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! "here" changes to "there" in reported speech.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Change "here" to "there": She said she worked there.';
            }
        }

        async function checkGrammar() {
            const text = document.getElementById('writing1').value;
            const feedbackDiv = document.getElementById('grammar-feedback');
            const textarea = document.getElementById('writing1');

            if (!text.trim()) {
                feedbackDiv.style.display = 'block';
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Please write some sentences first!';
                return;
            }

            textarea.style.display = 'none';
            window.grammarCheckResult = { original: text, corrected: '' };

            feedbackDiv.style.display = 'block';
            feedbackDiv.style.background = 'rgba(102, 126, 234, 0.1)';
            feedbackDiv.style.border = '1px solid rgba(102, 126, 234, 0.3)';
            feedbackDiv.style.color = '#667eea';
            feedbackDiv.innerHTML = '⏳ Checking your grammar and spelling...';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyBTH0NmDb3cqjrY6p7YROPIJel-iCxSxzs`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a strict grammar checker. Fix grammar and spelling errors. Do not change the meaning, style, or add punctuation unless absolutely necessary. Profanities are acceptable, but don't use shortened informal words like "cuz" or "wanna"\n\nText: "${text}"\n\nReturn only the corrected text with minimal changes.`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                const correctedText = data.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || text;

                if (correctedText !== text && correctedText.toLowerCase() !== text.toLowerCase()) {
                    const originalWords = text.split(/(\s+)/);
                    const correctedWords = correctedText.split(/(\s+)/);
                    let highlightedText = '';

                    originalWords.forEach((word, i) => {
                        if (word.match(/\s+/)) {
                            highlightedText += word;
                        } else if (correctedWords[i] && word.toLowerCase() !== correctedWords[i].toLowerCase()) {
                            highlightedText += `<span style="color: #e53e3e; font-weight: 600; background: rgba(245, 101, 101, 0.15); padding: 2px 4px; border-radius: 3px;">${word}</span>`;
                        } else {
                            highlightedText += word;
                        }
                    });

                    let html = `
                        <div style="margin-bottom: 20px;">
                            <strong style="color: #c53030;">Your Text (errors highlighted):</strong>
                            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(245, 101, 101, 0.3); line-height: 1.8;">
                                ${highlightedText}
                            </div>
                        </div>
                        <div>
                            <strong style="color: #2f855a;">Corrected Text:</strong>
                            <div style="background: rgba(72, 187, 120, 0.1); padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(72, 187, 120, 0.3); color: #2d3748; line-height: 1.8;">
                                ${correctedText}
                            </div>
                        </div>
                    `;

                    feedbackDiv.style.background = 'rgba(245, 101, 101, 0.05)';
                    feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                    feedbackDiv.style.color = '#2d3748';
                    feedbackDiv.innerHTML = html;

                    window.grammarCheckResult.corrected = correctedText;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                } else {
                    feedbackDiv.style.background = 'rgba(72, 187, 120, 0.1)';
                    feedbackDiv.style.border = '1px solid rgba(72, 187, 120, 0.3)';
                    feedbackDiv.style.color = '#2f855a';
                    feedbackDiv.innerHTML = '✓ Perfect! No grammar or spelling errors detected!';

                    window.grammarCheckResult.corrected = text;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                }
            } catch (error) {
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Unable to check grammar. Error: ' + error.message;
            }
        }

        function sendToTeacher() {
            const essayTitle = "B1-52: Reported Speech - Statements";
            const originalText = window.grammarCheckResult.original;
            const correctedText = window.grammarCheckResult.corrected;

            const emailBody = `Essay Title: ${essayTitle}\n\nOriginal Essay:\n${originalText}\n\nWe made some changes:\n\nCorrected Text:\n${correctedText}`;
            const mailtoLink = `mailto:?subject=${encodeURIComponent(essayTitle)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        }
    </script>
</body>
</html>
