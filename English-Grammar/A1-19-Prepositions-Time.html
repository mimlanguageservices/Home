<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A1-19: Prepositions of Time - at, on, in</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .header-left {
            display: flex;
            flex-direction: column;
        }

        .header h1 {
            color: #2d3748;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .header .website {
            text-align: center;
            margin-top: 8px;
        }

        .header .website a {
            color: #4c51bf;
            text-decoration: none;
            font-size: 1.2rem;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .header .website a:hover {
            color: #553c9a;
        }

        .header-image {
            width: 120px;
            height: 80px;
            border-radius: 12px;
            object-fit: cover;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        .container {
            display: flex;
            height: calc(100vh - 120px);
        }

        .navigation {
            width: 280px;
            background: rgba(45, 55, 72, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px 20px;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-item {
            padding: 16px 24px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: #e2e8f0;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
            font-weight: 500;
            font-size: 1.1rem;
            backdrop-filter: blur(5px);
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .nav-item.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border-color: transparent;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .content {
            flex: 1;
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }

        .section {
            display: none;
            flex: 1;
            padding: 0;
            overflow: hidden;
            height: 100%;
            background: white;
        }

        .section.active {
            display: flex;
            flex-direction: column;
        }

        .slideshow-container {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: white;
            padding: 30px 80px;
        }

        .slide-content-wrapper {
            position: relative;
            width: 100%;
            max-width: 1400px;
            height: 85%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .slide {
            display: none;
            width: 100%;
            height: 100%;
            background: white;
            border-radius: 20px;
            padding: 25px 35px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .slide.active {
            display: flex;
            flex-direction: column;
            animation: slideIn 0.5s ease-in-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .slide-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #8B7EC8;
            color: white;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .slide-arrow:hover {
            background: #7366B0;
            transform: translateY(-50%) scale(1.1);
        }

        .slide-arrow.prev {
            left: -70px;
        }

        .slide-arrow.next {
            right: -70px;
        }

        .slide-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
        }

        .indicator-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #D1D5DB;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .indicator-dot.active {
            background: #667eea;
            transform: scale(1.3);
        }

        .indicator-dot:hover {
            background: #9CA3AF;
        }

        .slide h2 {
            color: #2d3748;
            margin-bottom: 15px;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            letter-spacing: -0.5px;
        }

        .explanation-box {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 0;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .explanation-box h3 {
            color: #667eea;
            font-size: 1.3rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .explanation-box p {
            color: #2d3748;
            line-height: 1.5;
            font-size: 1rem;
            margin-bottom: 8px;
        }

        .rule-box {
            background: #e3f2fd;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }

        .rule-box h4 {
            color: #667eea;
            font-size: 1.2rem;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .rule-box p {
            font-size: 1rem;
            color: #2d3748;
            margin: 5px 0;
        }

        .yes-no {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #4299e1;
            color: white;
        }

        .auxiliary {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #48bb78;
            color: white;
        }

        .subject {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #9f7aea;
            color: white;
        }

        .verb {
            display: inline-block;
            padding: 6px 12px;
            margin: 3px;
            border-radius: 6px;
            font-weight: 600;
            font-size: 1rem;
            background: #ed64a6;
            color: white;
        }

        .example-box {
            background: #f7fafc;
            border-left: 4px solid #667eea;
            padding: 12px;
            border-radius: 8px;
            margin: 8px 0;
        }

        .example-box p {
            margin: 5px 0;
            font-size: 1rem;
            color: #2d3748;
        }

        .note-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .note-box strong {
            color: #856404;
            font-size: 1rem;
        }

        .note-box p {
            color: #856404;
            margin-top: 5px;
            line-height: 1.4;
            font-size: 0.95rem;
        }

        .exercise-container {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 0;
            margin-bottom: 10px;
            backdrop-filter: none;
            box-shadow: none;
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .exercise-container h3 {
            color: #764ba2;
            font-size: 1.4rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .question-box {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 12px;
            margin: 0;
        }

        .question-box p {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 12px;
            font-size: 1.1rem;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px 18px;
            margin: 8px 0;
            border: 2px solid rgba(102, 126, 234, 0.3);
            border-radius: 8px;
            font-size: 1.05rem;
            font-family: 'Inter', sans-serif;
            background: rgba(255, 255, 255, 0.8);
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
        }

        .check-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 15px 5px 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .check-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .feedback {
            padding: 15px 20px;
            border-radius: 12px;
            margin: 15px 0;
            font-weight: 500;
            font-size: 1.05rem;
            display: none;
        }

        .feedback.correct {
            background: rgba(72, 187, 120, 0.1);
            color: #2f855a;
            border: 1px solid rgba(72, 187, 120, 0.3);
            display: block;
        }

        .feedback.incorrect {
            background: rgba(245, 101, 101, 0.1);
            color: #c53030;
            border: 1px solid rgba(245, 101, 101, 0.3);
            display: block;
        }

        ul {
            margin-left: 25px;
            line-height: 1.6;
        }

        li {
            margin: 6px 0;
            font-size: 1.05rem;
            color: #2d3748;
        }

        li strong {
            color: #667eea;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 12px 0;
        }

        .comparison-table th {
            background: #667eea;
            color: white;
            padding: 10px;
            font-size: 1.05rem;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 10px;
            border: 1px solid #e2e8f0;
            font-size: 1rem;
            text-align: center;
        }

        .comparison-table tr:nth-child(even) {
            background: #f7fafc;
        }

        .explanation-box::-webkit-scrollbar {
            width: 8px;
        }

        .explanation-box::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb {
            background: #667eea;
            border-radius: 10px;
        }

        .explanation-box::-webkit-scrollbar-thumb:hover {
            background: #5568d3;
        }

        .formula-box {
            background: #e6fffa;
            border: 2px solid #319795;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.3rem;
        }

        .grid-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .grid-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #e2e8f0;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .grid-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .reading-text {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            line-height: 1.9;
            margin: 15px 0;
            border: 2px solid #e2e8f0;
        }

        .reading-text p {
            margin: 12px 0;
        }

        .highlight-question {
            background: #bee3f8;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .highlight-answer {
            background: #c6f6d5;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: bold;
        }

        .example-sentence {
            font-size: 1.1rem;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <h1>A1-19: Prepositions of Time - at, on, in</h1>
            <div class="website">
                <a href="https://www.mimlanguageservices.com/" target="_blank">mimlanguageservices</a>
            </div>
        </div>
        <a href="https://www.mimlanguageservices.com/" target="_blank">
            <img src="https://static.wixstatic.com/media/593d03_8958d96b0f6d4d1ea9dffa7f89bffe8b~mv2.png" alt="ESL Logo" class="header-image">
        </a>
    </div>

    <div class="container">
        <div class="navigation">
            <div class="nav-item active" onclick="showSection('explanation', this)">Explanation</div>
            <div class="nav-item" onclick="showSection('examples', this)">Examples</div>
            <div class="nav-item" onclick="showSection('reading', this)">Reading</div>
            <div class="nav-item" onclick="showSection('media', this)">Media</div>
            <div class="nav-item" onclick="showSection('practice', this)">Practice</div>
            <div class="nav-item" onclick="showSection('writing', this)">Writing</div>
        </div>

        <div class="content">
            <!-- Explanation Section -->
            <div class="section active" id="explanation">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="explanation">
                            <h2>Welcome to Prepositions of Time!</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.2rem; text-align: center; margin: 20px 0;">
                                    Today we will learn <span class="yes-no">PREPOSITIONS OF TIME</span> in English!
                                </p>
                                <p style="font-size: 1.1rem; text-align: center;">
                                    These words tell us WHEN things happen.
                                </p>
                                <div class="formula-box">
                                    <span class="auxiliary">AT</span> + times | <span class="subject">ON</span> + days/dates | <span class="verb">IN</span> + longer periods
                                </div>
                                <p style="text-align: center; font-size: 1.1rem;">
                                    Example: <strong>at</strong> 3 o'clock / <strong>on</strong> Monday / <strong>in</strong> January
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>AT - For Specific Times</h2>
                            <div class="explanation-box">
                                <h3>Use AT for clock times and specific moments</h3>

                                <div class="formula-box">
                                    <span class="auxiliary">AT</span> + clock time / specific moment
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Use</th>
                                        <th>Examples</th>
                                    </tr>
                                    <tr>
                                        <td><strong>Clock times</strong></td>
                                        <td>at 3 o'clock, at 7:30, at 12:15</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Night</strong></td>
                                        <td>at night, at midnight</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Specific moments</strong></td>
                                        <td>at noon, at sunrise, at sunset, at the moment</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Examples:</h4>
                                    <p>• The meeting is <strong>at 9 o'clock</strong>.</p>
                                    <p>• I sleep <strong>at night</strong>.</p>
                                    <p>• We eat lunch <strong>at noon</strong>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>ON - For Days and Dates</h2>
                            <div class="explanation-box">
                                <h3>Use ON for days of the week and dates</h3>

                                <div class="formula-box">
                                    <span class="subject">ON</span> + day / date
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Use</th>
                                        <th>Examples</th>
                                    </tr>
                                    <tr>
                                        <td><strong>Days of the week</strong></td>
                                        <td>on Monday, on Friday, on weekends</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Dates</strong></td>
                                        <td>on June 5th, on the 15th, on New Year's Day</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Special days</strong></td>
                                        <td>on Christmas Day, on my birthday, on Valentine's Day</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Examples:</h4>
                                    <p>• I have English class <strong>on Tuesday</strong>.</p>
                                    <p>• Her birthday is <strong>on March 10th</strong>.</p>
                                    <p>• We don't work <strong>on Sundays</strong>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>IN - For Longer Periods</h2>
                            <div class="explanation-box">
                                <h3>Use IN for months, years, seasons, and longer periods</h3>

                                <div class="formula-box">
                                    <span class="verb">IN</span> + month / year / season / longer period
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Use</th>
                                        <th>Examples</th>
                                    </tr>
                                    <tr>
                                        <td><strong>Months</strong></td>
                                        <td>in January, in July, in December</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Years</strong></td>
                                        <td>in 2024, in 1990, in 2030</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Seasons</strong></td>
                                        <td>in summer, in winter, in spring, in autumn/fall</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Parts of day</strong></td>
                                        <td>in the morning, in the afternoon, in the evening</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Examples:</h4>
                                    <p>• I was born <strong>in 1995</strong>.</p>
                                    <p>• It's cold <strong>in winter</strong>.</p>
                                    <p>• I drink coffee <strong>in the morning</strong>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>NO Preposition!</h2>
                            <div class="explanation-box">
                                <h3>Don't use prepositions with these time words:</h3>

                                <div class="formula-box">
                                    <span class="auxiliary">NEXT</span> / <span class="subject">LAST</span> / <span class="verb">THIS</span> / EVERY + time word
                                </div>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Time Word</th>
                                        <th>Correct</th>
                                        <th>Wrong</th>
                                    </tr>
                                    <tr>
                                        <td><strong>Next</strong></td>
                                        <td>next week, next Monday, next year</td>
                                        <td>❌ on next Monday, in next year</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Last</strong></td>
                                        <td>last night, last summer, last Friday</td>
                                        <td>❌ at last night, in last summer</td>
                                    </tr>
                                    <tr>
                                        <td><strong>This</strong></td>
                                        <td>this morning, this week, this year</td>
                                        <td>❌ in this morning, on this week</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Every</strong></td>
                                        <td>every day, every Monday, every year</td>
                                        <td>❌ on every day, in every year</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Examples:</h4>
                                    <p>• I saw him <strong>last night</strong>. (NOT at last night)</p>
                                    <p>• We're meeting <strong>next Tuesday</strong>. (NOT on next Tuesday)</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="explanation">
                            <h2>Common Mistakes</h2>
                            <div class="explanation-box">
                                <h3>❌ Mistake 1: Mixing up AT and IN</h3>
                                <div class="example-box">
                                    <p>❌ I wake up <del>in</del> 6 o'clock. → ✅ I wake up <strong>at</strong> 6 o'clock.</p>
                                    <p>❌ It's cold <del>at</del> winter. → ✅ It's cold <strong>in</strong> winter.</p>
                                </div>

                                <h3>❌ Mistake 2: Using preposition with NEXT/LAST/THIS</h3>
                                <div class="example-box">
                                    <p>❌ See you <del>on</del> next Monday. → ✅ See you <strong>next Monday</strong>.</p>
                                    <p>❌ I went there <del>in</del> last summer. → ✅ I went there <strong>last summer</strong>.</p>
                                </div>

                                <h3>❌ Mistake 3: Using AT for days</h3>
                                <div class="example-box">
                                    <p>❌ The party is <del>at</del> Saturday. → ✅ The party is <strong>on</strong> Saturday.</p>
                                    <p>❌ I don't work <del>at</del> Sundays. → ✅ I don't work <strong>on</strong> Sundays.</p>
                                </div>

                                <h3>❌ Mistake 4: AT night vs IN the morning/afternoon/evening</h3>
                                <div class="example-box">
                                    <p>❌ I study <del>in</del> night. → ✅ I study <strong>at</strong> night.</p>
                                    <p>❌ She works <del>at</del> the morning. → ✅ She works <strong>in</strong> the morning.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="explanation-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                    </div>
                </div>
            </div>

            <!-- Examples Section -->
            <div class="section" id="examples">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="examples">
                            <h2>AT Examples</h2>
                            <div class="explanation-box">
                                <h3>Using AT with times and moments:</h3>
                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Clock Times:</strong><br><br>
                                        • The class starts <strong>at 9 o'clock</strong>.<br>
                                        • I wake up <strong>at 7:30</strong>.<br>
                                        • The meeting is <strong>at 2:15 pm</strong>.<br>
                                        • We eat dinner <strong>at 6 o'clock</strong>.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Specific Moments:</strong><br><br>
                                        • I sleep <strong>at night</strong>.<br>
                                        • We meet <strong>at noon</strong>.<br>
                                        • She studies <strong>at midnight</strong>.<br>
                                        • The sun rises <strong>at sunrise</strong>.
                                    </div>
                                </div>

                                <h3>ON Examples:</h3>
                                <div class="grid-examples">
                                    <div class="grid-card">
                                        <strong>Days:</strong><br><br>
                                        • I have English <strong>on Monday</strong>.<br>
                                        • We don't work <strong>on Sunday</strong>.<br>
                                        • The party is <strong>on Friday</strong>.<br>
                                        • I relax <strong>on weekends</strong>.
                                    </div>
                                    <div class="grid-card">
                                        <strong>Dates & Special Days:</strong><br><br>
                                        • My birthday is <strong>on June 15th</strong>.<br>
                                        • Christmas is <strong>on December 25th</strong>.<br>
                                        • The exam is <strong>on the 20th</strong>.<br>
                                        • We celebrate <strong>on New Year's Day</strong>.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>IN Examples</h2>
                            <div class="explanation-box">
                                <table class="comparison-table">
                                    <tr>
                                        <th>Category</th>
                                        <th>Examples</th>
                                    </tr>
                                    <tr>
                                        <td><strong>Months</strong></td>
                                        <td>in January, in March, in July, in December</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Years</strong></td>
                                        <td>in 2024, in 1995, in 2030, in the 21st century</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Seasons</strong></td>
                                        <td>in summer, in winter, in spring, in autumn/fall</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Parts of Day</strong></td>
                                        <td>in the morning, in the afternoon, in the evening</td>
                                    </tr>
                                </table>

                                <h3>Complete Sentences:</h3>
                                <div class="example-box">
                                    <p>• I was born <strong>in May</strong>.</p>
                                    <p>• She graduated <strong>in 2020</strong>.</p>
                                    <p>• It's hot <strong>in summer</strong>.</p>
                                    <p>• I drink coffee <strong>in the morning</strong>.</p>
                                    <p>• We're going on vacation <strong>in August</strong>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="examples">
                            <h2>Summary Table</h2>
                            <div class="explanation-box">
                                <h3>Quick Reference Guide:</h3>

                                <table class="comparison-table">
                                    <tr>
                                        <th>Preposition</th>
                                        <th>Use For</th>
                                        <th>Examples</th>
                                    </tr>
                                    <tr>
                                        <td><strong>AT</strong></td>
                                        <td>Clock times, specific moments</td>
                                        <td>at 3pm, at night, at noon, at midnight</td>
                                    </tr>
                                    <tr>
                                        <td><strong>ON</strong></td>
                                        <td>Days, dates, special days</td>
                                        <td>on Monday, on June 5th, on Christmas Day</td>
                                    </tr>
                                    <tr>
                                        <td><strong>IN</strong></td>
                                        <td>Months, years, seasons, parts of day</td>
                                        <td>in July, in 2024, in summer, in the morning</td>
                                    </tr>
                                    <tr>
                                        <td><strong>NO PREPOSITION</strong></td>
                                        <td>next, last, this, every</td>
                                        <td>next week, last night, this morning, every day</td>
                                    </tr>
                                </table>

                                <div class="rule-box">
                                    <h4>Remember:</h4>
                                    <p>AT = specific time | ON = day/date | IN = longer period</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="examples-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                    </div>
                </div>
            </div>

            <!-- Reading Section -->
            <div class="section" id="reading">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="reading">
                            <h2>Reading: Tom's Schedule</h2>
                            <div class="explanation-box">
                                <div class="reading-text">
                                    <p><strong>My Daily Schedule</strong></p>

                                    <p>My name is Tom. I work <span class="highlight-question">at a hospital</span>. I wake up <span class="highlight-question">at 6:30</span> every morning. I always exercise <span class="highlight-question">in the morning</span> before work.</p>

                                    <p>I start work <span class="highlight-question">at 8 o'clock</span>. I have lunch <span class="highlight-question">at noon</span>. I work <span class="highlight-question">on Mondays, Tuesdays, Wednesdays, and Thursdays</span>. I don't work <span class="highlight-question">on weekends</span>.</p>

                                    <p>I have English class <span class="highlight-question">on Tuesday evenings</span> <span class="highlight-question">at 7 pm</span>. My birthday is <span class="highlight-question">on March 15th</span>. I was born <span class="highlight-question">in 1995</span>.</p>

                                    <p>I love to travel. <span class="highlight-question">In summer</span>, I usually go to the beach. <span class="highlight-question">In winter</span>, I like to go skiing. I'm planning a trip to Japan <span class="highlight-question">next year</span>.</p>

                                    <p>I usually study <span class="highlight-question">at night</span> because it's quiet. I go to bed <span class="highlight-question">at 10:30</span>. <span class="highlight-question">On Saturdays</span>, I sleep late and relax <span class="highlight-question">in the afternoon</span>.</p>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="reading">
                            <h2>Reading Analysis</h2>
                            <div class="explanation-box">
                                <h3>AT - for specific times:</h3>
                                <div class="example-box">
                                    <p>• <strong>at 6:30</strong> (clock time)</p>
                                    <p>• <strong>at 8 o'clock</strong> (clock time)</p>
                                    <p>• <strong>at noon</strong> (specific moment)</p>
                                    <p>• <strong>at 7 pm</strong> (clock time)</p>
                                    <p>• <strong>at night</strong> (specific time)</p>
                                    <p>• <strong>at 10:30</strong> (clock time)</p>
                                </div>

                                <h3>ON - for days and dates:</h3>
                                <div class="example-box">
                                    <p>• <strong>on Mondays, Tuesdays, Wednesdays, and Thursdays</strong> (days)</p>
                                    <p>• <strong>on weekends</strong> (days)</p>
                                    <p>• <strong>on Tuesday evenings</strong> (specific day)</p>
                                    <p>• <strong>on March 15th</strong> (date)</p>
                                    <p>• <strong>On Saturdays</strong> (day)</p>
                                </div>

                                <h3>IN - for longer periods:</h3>
                                <div class="example-box">
                                    <p>• <strong>in the morning</strong> (part of day)</p>
                                    <p>• <strong>in 1995</strong> (year)</p>
                                    <p>• <strong>In summer / In winter</strong> (seasons)</p>
                                    <p>• <strong>in the afternoon</strong> (part of day)</p>
                                </div>

                                <h3>NO preposition:</h3>
                                <div class="example-box">
                                    <p>• <strong>next year</strong> (NOT "in next year")</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="reading-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Media Section -->
            <div class="section" id="media">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="media">
                            <h2>Video: Prepositions of Time</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">Watch this video about prepositions of time:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/xjLWj-OzKJ4"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Learn when to use AT, ON, and IN with time expressions
                                </p>
                            </div>
                        </div>

                        <div class="slide" data-section="media">
                            <h2>Video: AT, ON, IN Practice</h2>
                            <div class="explanation-box">
                                <p style="font-size: 1.1rem; margin-bottom: 20px;">More practice with AT, ON, and IN:</p>
                                <div style="text-align: center; margin: 30px 0;">
                                    <iframe width="800" height="450"
                                        src="https://www.youtube.com/embed/MrfuB_lW9O4"
                                        style="border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2);"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen>
                                    </iframe>
                                </div>
                                <p style="font-size: 1rem; color: #666; text-align: center; font-style: italic;">
                                    Practice using prepositions of time correctly
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="media-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                    </div>
                </div>
            </div>

            <!-- Practice Section -->
            <div class="section" id="practice">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="practice">
                            <h2>Practice 1: Choose AT or ON</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"I have class ___ Monday" (AT or ON?)</p>
                                    <input type="text" id="q1" placeholder="Type: at or on" onkeypress="if(event.key==='Enter') checkAnswer1()">
                                    <button class="check-button" onclick="checkAnswer1()">Check Answer</button>
                                    <div id="feedback1" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 2: Choose IN or AT</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"The meeting is ___ 3 o'clock" (IN or AT?)</p>
                                    <input type="text" id="q2" placeholder="Type: in or at" onkeypress="if(event.key==='Enter') checkAnswer2()">
                                    <button class="check-button" onclick="checkAnswer2()">Check Answer</button>
                                    <div id="feedback2" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 3: IN or ON?</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"My birthday is ___ July" (IN or ON?)</p>
                                    <input type="text" id="q3" placeholder="Type: in or on" onkeypress="if(event.key==='Enter') checkAnswer3()">
                                    <button class="check-button" onclick="checkAnswer3()">Check Answer</button>
                                    <div id="feedback3" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 4: Complete the Sentence</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"I was born ___ 1995" (Complete with preposition)</p>
                                    <input type="text" id="q4" placeholder="Type: in" onkeypress="if(event.key==='Enter') checkAnswer4()">
                                    <button class="check-button" onclick="checkAnswer4()">Check Answer</button>
                                    <div id="feedback4" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 5: AT or IN?</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"She sleeps ___ night" (AT or IN?)</p>
                                    <input type="text" id="q5" placeholder="Type: at or in" onkeypress="if(event.key==='Enter') checkAnswer5()">
                                    <button class="check-button" onclick="checkAnswer5()">Check Answer</button>
                                    <div id="feedback5" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 6: Correct the Mistake</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Fix this: "See you on next Monday" → "___"</p>
                                    <input type="text" id="q6" placeholder="Type the correct sentence" onkeypress="if(event.key==='Enter') checkAnswer6()">
                                    <button class="check-button" onclick="checkAnswer6()">Check Answer</button>
                                    <div id="feedback6" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 7: Choose the Preposition</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>"The party is ___ Saturday evening" (Which preposition?)</p>
                                    <input type="text" id="q7" placeholder="Type: at, on, or in" onkeypress="if(event.key==='Enter') checkAnswer7()">
                                    <button class="check-button" onclick="checkAnswer7()">Check Answer</button>
                                    <div id="feedback7" class="feedback"></div>
                                </div>
                            </div>
                        </div>

                        <div class="slide" data-section="practice">
                            <h2>Practice 8: Fix the Error</h2>
                            <div class="exercise-container">
                                <div class="question-box">
                                    <p>Fix: "I drink coffee at the morning" → "___"</p>
                                    <input type="text" id="q8" placeholder="Type the correct sentence" onkeypress="if(event.key==='Enter') checkAnswer8()">
                                    <button class="check-button" onclick="checkAnswer8()">Check Answer</button>
                                    <div id="feedback8" class="feedback"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="practice-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                        <span class="indicator-dot" onclick="goToSlide(2)"></span>
                        <span class="indicator-dot" onclick="goToSlide(3)"></span>
                        <span class="indicator-dot" onclick="goToSlide(4)"></span>
                        <span class="indicator-dot" onclick="goToSlide(5)"></span>
                        <span class="indicator-dot" onclick="goToSlide(6)"></span>
                        <span class="indicator-dot" onclick="goToSlide(7)"></span>
                        <span class="indicator-dot" onclick="goToSlide(8)"></span>
                    </div>
                </div>
            </div>

            <!-- Writing Section -->
            <div class="section" id="writing">
                <div class="slideshow-container">
                    <div class="slide-content-wrapper">
                        <button class="slide-arrow prev" onclick="changeSlide(-1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="15 18 9 12 15 6"></polyline>
                            </svg>
                        </button>
                        <button class="slide-arrow next" onclick="changeSlide(1)">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>

                        <div class="slide active" data-section="writing" style="overflow-y: auto;">
                            <h2>Writing Practice</h2>
                            <div class="explanation-box">
                                <h3>Write 10 sentences about your daily schedule</h3>
                                <p style="margin-bottom: 15px;">Use AT, ON, and IN correctly with time expressions.</p>
                                <div class="question-box">
                                    <textarea id="writing1" rows="8" style="width: 100%; padding: 12px; border: 2px solid rgba(102, 126, 234, 0.3); border-radius: 8px; font-size: 1.05rem; font-family: 'Inter', sans-serif; resize: vertical;" spellcheck="true" placeholder="I wake up at 7 o'clock. I have class on Monday. I was born in 1995..."></textarea>
                                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                                        <button class="check-button" onclick="checkGrammar()">Check Grammar</button>
                                        <button id="send-teacher-btn" class="check-button" onclick="sendToTeacher()" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); opacity: 0.5; cursor: not-allowed;" disabled>Send to Teacher</button>
                                    </div>
                                    <div id="grammar-feedback" style="margin-top: 15px; padding: 15px; border-radius: 8px; display: none;"></div>
                                    <p style="font-size: 0.95rem; color: #666; margin-top: 10px;">Example: I wake up at 7 o'clock. I have class on Monday. I was born in 1995. I exercise in the morning.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide-indicators" id="writing-indicators">
                        <span class="indicator-dot active" onclick="goToSlide(1)"></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSlide = 1;
        let currentSection = 'explanation';

        function showSection(sectionName, element) {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));

            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));

            document.getElementById(sectionName).classList.add('active');

            if (element) {
                element.classList.add('active');
            }

            currentSection = sectionName;
            currentSlide = 1;

            setTimeout(() => {
                const activeSection = document.querySelector('.section.active');
                const inputField = activeSection.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                }
            }, 100);
        }

        function changeSlide(direction) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            if (slides.length === 1) return;

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide += direction;

            if (currentSlide > slides.length) {
                currentSlide = 1;
            }
            if (currentSlide < 1) {
                currentSlide = slides.length;
            }

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');

            setTimeout(() => {
                const activeSlide = slides[currentSlide - 1];
                const inputField = activeSlide.querySelector('input[type="text"]');
                if (inputField) {
                    inputField.focus();
                    inputField.value = '';
                }
            }, 100);
        }

        function goToSlide(slideNum) {
            const activeSection = document.querySelector('.section.active');
            const slides = activeSection.querySelectorAll('.slide');
            const dots = activeSection.querySelectorAll('.indicator-dot');

            slides[currentSlide - 1].classList.remove('active');
            dots[currentSlide - 1].classList.remove('active');

            currentSlide = slideNum;

            slides[currentSlide - 1].classList.add('active');
            dots[currentSlide - 1].classList.add('active');
        }

        document.addEventListener('keydown', function(e) {
            if (e.key === 'ArrowLeft') {
                changeSlide(-1);
            } else if (e.key === 'ArrowRight') {
                changeSlide(1);
            }
        });

        function checkAnswer1() {
            const answer = document.getElementById('q1').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback1');

            if (answer === 'on') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "on Monday" - Use ON with days of the week.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use ON with days of the week: on Monday';
            }
        }

        function checkAnswer2() {
            const answer = document.getElementById('q2').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback2');

            if (answer === 'at') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! "at 3 o\'clock" - Use AT with clock times.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use AT with clock times: at 3 o\'clock';
            }
        }

        function checkAnswer3() {
            const answer = document.getElementById('q3').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback3');

            if (answer === 'in') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! "in July" - Use IN with months.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use IN with months: in July';
            }
        }

        function checkAnswer4() {
            const answer = document.getElementById('q4').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback4');

            if (answer === 'in') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "in 1995" - Use IN with years.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use IN with years: in 1995';
            }
        }

        function checkAnswer5() {
            const answer = document.getElementById('q5').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback5');

            if (answer === 'at') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Correct! "at night" - Use AT with night (special case).';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use AT with night: at night (NOT in night)';
            }
        }

        function checkAnswer6() {
            const answer = document.getElementById('q6').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback6');

            if (answer === 'see you next monday' || answer === 'see you next monday.') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Great! "See you next Monday" - No preposition with NEXT!';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Remove "on": See you next Monday (no preposition with next)';
            }
        }

        function checkAnswer7() {
            const answer = document.getElementById('q7').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback7');

            if (answer === 'on') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Perfect! "on Saturday evening" - Use ON with days.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use ON with days: on Saturday evening';
            }
        }

        function checkAnswer8() {
            const answer = document.getElementById('q8').value.trim().toLowerCase();
            const feedback = document.getElementById('feedback8');

            if (answer === 'i drink coffee in the morning' || answer === 'i drink coffee in the morning.') {
                feedback.className = 'feedback correct';
                feedback.textContent = '✓ Excellent! Use IN with parts of day: in the morning.';
                setTimeout(() => { changeSlide(1); }, 1500);
            } else {
                feedback.className = 'feedback incorrect';
                feedback.textContent = '✗ Use IN with parts of day: I drink coffee in the morning (NOT at the morning)';
            }
        }

        async function checkGrammar() {
            const text = document.getElementById('writing1').value;
            const feedbackDiv = document.getElementById('grammar-feedback');
            const textarea = document.getElementById('writing1');

            if (!text.trim()) {
                feedbackDiv.style.display = 'block';
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Please write some sentences first!';
                return;
            }

            textarea.style.display = 'none';
            window.grammarCheckResult = { original: text, corrected: '' };

            feedbackDiv.style.display = 'block';
            feedbackDiv.style.background = 'rgba(102, 126, 234, 0.1)';
            feedbackDiv.style.border = '1px solid rgba(102, 126, 234, 0.3)';
            feedbackDiv.style.color = '#667eea';
            feedbackDiv.innerHTML = '⏳ Checking your grammar and spelling...';

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=AIzaSyBTH0NmDb3cqjrY6p7YROPIJel-iCxSxzs`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `You are a strict grammar checker. Fix grammar and spelling errors. Do not change the meaning, style, or add punctuation unless absolutely necessary. Profanities are acceptable, but don't use shortened informal words like "cuz" or "wanna"\n\nText: "${text}"\n\nReturn only the corrected text with minimal changes.`
                            }]
                        }]
                    })
                });

                const data = await response.json();
                const correctedText = data.candidates?.[0]?.content?.parts?.[0]?.text?.trim() || text;

                if (correctedText !== text && correctedText.toLowerCase() !== text.toLowerCase()) {
                    const originalWords = text.split(/(\s+)/);
                    const correctedWords = correctedText.split(/(\s+)/);
                    let highlightedText = '';

                    originalWords.forEach((word, i) => {
                        if (word.match(/\s+/)) {
                            highlightedText += word;
                        } else if (correctedWords[i] && word.toLowerCase() !== correctedWords[i].toLowerCase()) {
                            highlightedText += `<span style="color: #e53e3e; font-weight: 600; background: rgba(245, 101, 101, 0.15); padding: 2px 4px; border-radius: 3px;">${word}</span>`;
                        } else {
                            highlightedText += word;
                        }
                    });

                    let html = `
                        <div style="margin-bottom: 20px;">
                            <strong style="color: #c53030;">Your Text (errors highlighted):</strong>
                            <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(245, 101, 101, 0.3); line-height: 1.8;">
                                ${highlightedText}
                            </div>
                        </div>
                        <div>
                            <strong style="color: #2f855a;">Corrected Text:</strong>
                            <div style="background: rgba(72, 187, 120, 0.1); padding: 15px; border-radius: 8px; margin-top: 10px; border: 2px solid rgba(72, 187, 120, 0.3); color: #2d3748; line-height: 1.8;">
                                ${correctedText}
                            </div>
                        </div>
                    `;

                    feedbackDiv.style.background = 'rgba(245, 101, 101, 0.05)';
                    feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                    feedbackDiv.style.color = '#2d3748';
                    feedbackDiv.innerHTML = html;

                    window.grammarCheckResult.corrected = correctedText;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                } else {
                    feedbackDiv.style.background = 'rgba(72, 187, 120, 0.1)';
                    feedbackDiv.style.border = '1px solid rgba(72, 187, 120, 0.3)';
                    feedbackDiv.style.color = '#2f855a';
                    feedbackDiv.innerHTML = '✓ Perfect! No grammar or spelling errors detected!';

                    window.grammarCheckResult.corrected = text;
                    const sendBtn = document.getElementById('send-teacher-btn');
                    sendBtn.disabled = false;
                    sendBtn.style.opacity = '1';
                    sendBtn.style.cursor = 'pointer';
                }
            } catch (error) {
                feedbackDiv.style.background = 'rgba(245, 101, 101, 0.1)';
                feedbackDiv.style.border = '1px solid rgba(245, 101, 101, 0.3)';
                feedbackDiv.style.color = '#c53030';
                feedbackDiv.innerHTML = '✗ Unable to check grammar. Error: ' + error.message;
            }
        }

        function sendToTeacher() {
            const essayTitle = "A1-19: Prepositions of Time - at, on, in";
            const originalText = window.grammarCheckResult.original;
            const correctedText = window.grammarCheckResult.corrected;

            const emailBody = `Essay Title: ${essayTitle}\n\nOriginal Essay:\n${originalText}\n\nWe made some changes:\n\nCorrected Text:\n${correctedText}`;
            const mailtoLink = `mailto:?subject=${encodeURIComponent(essayTitle)}&body=${encodeURIComponent(emailBody)}`;
            window.location.href = mailtoLink;
        }
    </script>
</body>
</html>
